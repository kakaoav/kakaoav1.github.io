(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video"],{1326:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"16be":function(e,t,o){(function(t,o){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
(function(t,o){e.exports=o()})(0,(function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function n(e){return"function"===typeof e}var i=void 0;i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var a=i,r=0,s=void 0,l=void 0,d=function(e,t){k[r]=e,k[r+1]=t,r+=2,2===r&&(l?l(w):E())};function c(e){l=e}function u(e){d=e}var p="undefined"!==typeof window?window:void 0,m=p||{},f=m.MutationObserver||m.WebKitMutationObserver,y="undefined"===typeof self&&"undefined"!==typeof t&&"[object process]"==={}.toString.call(t),g="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function v(){return function(){return t.nextTick(w)}}function h(){return"undefined"!==typeof s?function(){s(w)}:C()}function _(){var e=0,t=new f(w),o=document.createTextNode("");return t.observe(o,{characterData:!0}),function(){o.data=e=++e%2}}function b(){var e=new MessageChannel;return e.port1.onmessage=w,function(){return e.port2.postMessage(0)}}function C(){var e=setTimeout;return function(){return e(w,1)}}var k=new Array(1e3);function w(){for(var e=0;e<r;e+=2){var t=k[e],o=k[e+1];t(o),k[e]=void 0,k[e+1]=void 0}r=0}function P(){try{var e=Function("return this")().require("vertx");return s=e.runOnLoop||e.runOnContext,h()}catch(t){return C()}}var E=void 0;function A(e,t){var o=this,n=new this.constructor(L);void 0===n[T]&&K(n);var i=o._state;if(i){var a=arguments[i-1];d((function(){return $(i,n,a,o._result)}))}else W(o,n,e,t);return n}function I(e){var t=this;if(e&&"object"===typeof e&&e.constructor===t)return e;var o=new t(L);return F(o,e),o}E=y?v():f?_():g?b():void 0===p?P():C();var T=Math.random().toString(36).substring(2);function L(){}var O=void 0,R=1,V=2;function S(){return new TypeError("You cannot resolve a promise with itself")}function B(){return new TypeError("A promises callback cannot return that same promise.")}function x(e,t,o,n){try{e.call(t,o,n)}catch(i){return i}}function N(e,t,o){d((function(e){var n=!1,i=x(o,t,(function(o){n||(n=!0,t!==o?F(e,o):j(e,o))}),(function(t){n||(n=!0,H(e,t))}),"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,H(e,i))}),e)}function M(e,t){t._state===R?j(e,t._result):t._state===V?H(e,t._result):W(t,void 0,(function(t){return F(e,t)}),(function(t){return H(e,t)}))}function D(e,t,o){t.constructor===e.constructor&&o===A&&t.constructor.resolve===I?M(e,t):void 0===o?j(e,t):n(o)?N(e,t,o):j(e,t)}function F(t,o){if(t===o)H(t,S());else if(e(o)){var n=void 0;try{n=o.then}catch(i){return void H(t,i)}D(t,o,n)}else j(t,o)}function U(e){e._onerror&&e._onerror(e._result),z(e)}function j(e,t){e._state===O&&(e._result=t,e._state=R,0!==e._subscribers.length&&d(z,e))}function H(e,t){e._state===O&&(e._state=V,e._result=t,d(U,e))}function W(e,t,o,n){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+R]=o,i[a+V]=n,0===a&&e._state&&d(z,e)}function z(e){var t=e._subscribers,o=e._state;if(0!==t.length){for(var n=void 0,i=void 0,a=e._result,r=0;r<t.length;r+=3)n=t[r],i=t[r+o],n?$(o,n,i,a):i(a);e._subscribers.length=0}}function $(e,t,o,i){var a=n(o),r=void 0,s=void 0,l=!0;if(a){try{r=o(i)}catch(d){l=!1,s=d}if(t===r)return void H(t,B())}else r=i;t._state!==O||(a&&l?F(t,r):!1===l?H(t,s):e===R?j(t,r):e===V&&H(t,r))}function G(e,t){try{t((function(t){F(e,t)}),(function(t){H(e,t)}))}catch(o){H(e,o)}}var q=0;function X(){return q++}function K(e){e[T]=q++,e._state=void 0,e._result=void 0,e._subscribers=[]}function Q(){return new Error("Array Methods must be provided an Array")}var J=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(L),this.promise[T]||K(this.promise),a(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&j(this.promise,this._result))):H(this.promise,Q())}return e.prototype._enumerate=function(e){for(var t=0;this._state===O&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var o=this._instanceConstructor,n=o.resolve;if(n===I){var i=void 0,a=void 0,r=!1;try{i=e.then}catch(l){r=!0,a=l}if(i===A&&e._state!==O)this._settledAt(e._state,t,e._result);else if("function"!==typeof i)this._remaining--,this._result[t]=e;else if(o===ne){var s=new o(L);r?H(s,a):D(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new o((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,o){var n=this.promise;n._state===O&&(this._remaining--,e===V?H(n,o):this._result[t]=o),0===this._remaining&&j(n,this._result)},e.prototype._willSettleAt=function(e,t){var o=this;W(e,void 0,(function(e){return o._settledAt(R,t,e)}),(function(e){return o._settledAt(V,t,e)}))},e}();function Y(e){return new J(this,e).promise}function Z(e){var t=this;return a(e)?new t((function(o,n){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(o,n)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function ee(e){var t=this,o=new t(L);return H(o,e),o}function te(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function oe(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ne=function(){function e(t){this[T]=X(),this._result=this._state=void 0,this._subscribers=[],L!==t&&("function"!==typeof t&&te(),this instanceof e?G(this,t):oe())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this,o=t.constructor;return n(e)?t.then((function(t){return o.resolve(e()).then((function(){return t}))}),(function(t){return o.resolve(e()).then((function(){throw t}))})):t.then(e,e)},e}();function ie(){var e=void 0;if("undefined"!==typeof o)e=o;else if("undefined"!==typeof self)e=self;else try{e=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(i){}if("[object Promise]"===n&&!t.cast)return}e.Promise=ne}return ne.prototype.then=A,ne.all=Y,ne.race=Z,ne.resolve=I,ne.reject=ee,ne._setScheduler=c,ne._setAsap=u,ne._asap=d,ne.polyfill=ie,ne.Promise=ne,ne}))}).call(this,o("eef6"),o("2409"))},"16fc":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pa-4",attrs:{id:"video-details"}},[o("v-container",[o("v-btn",{staticClass:"pl-0",attrs:{text:"",small:""},on:{click:function(t){return e.$router.go(-1)}}},[o("v-icon",{attrs:{left:""}},[e._v("mdi-arrow-left")]),e._v(" Channel videos")],1),o("h2",{staticClass:"mt-5"},[e._v("Video details")]),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit,i=t.reset;return[o("form",{on:{submit:function(t){return t.preventDefault(),n(e.submit)},reset:function(e){return e.preventDefault(),i.apply(null,arguments)}}},[o("ValidationProvider",{attrs:{name:"Title",rules:"required|min:3"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[o("v-text-field",{staticClass:"mb-3",attrs:{loading:e.inputLoading,"error-messages":n,label:"Title (required)",filled:"",dense:"",counter:"100","max-length":"100"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})]}}],null,!0)}),o("ValidationProvider",{attrs:{name:"Description",rules:"required|min:3"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[o("v-textarea",{attrs:{loading:e.inputLoading,filled:"","auto-grow":"","error-messages":n,label:"Description",placeholder:"Tell viewers about your video",rows:"5",counter:"5000","max-length":"5000","row-height":"20"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})]}}],null,!0)}),o("ValidationProvider",{attrs:{name:"Visibilty",rules:"required|oneOf:private,public"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[o("v-select",{attrs:{loading:e.inputLoading,items:e.visibility,"error-messages":n,filled:"",label:"Visibilty",value:e.formData.visibility},model:{value:e.formData.visibility,callback:function(t){e.$set(e.formData,"visibility",t)},expression:"formData.visibility"}})]}}],null,!0)}),o("ValidationProvider",{attrs:{name:"Cateogry",rules:"required|min:3"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[o("v-select",{attrs:{loading:e.categoryLoading,items:e.categoriesTitles,"error-messages":n,filled:"",label:"Categories"},model:{value:e.formData.category,callback:function(t){e.$set(e.formData,"category",t)},expression:"formData.category"}})]}}],null,!0)}),o("div",{staticClass:"mt-6 d-flex justify-space-between"},[o("v-btn",{staticClass:"primary",attrs:{loading:e.submitLoading,type:"submit",depressed:""}},[e._v("Submit")])],1)],1)]}}])})],1),o("v-col",{staticClass:"text-center",attrs:{cols:"4"}},[o("v-btn",{attrs:{text:""},on:{click:e.toggleShow}},[e._v("Upload Thumbnails")]),o("my-upload",{attrs:{field:"thumbnail",method:"PUT",width:1280,height:720,url:e.url,headers:e.headers,"img-format":"jpg",langType:"en"},on:{"crop-success":e.cropSuccess},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),o("v-responsive",{staticStyle:{"max-width":"100%"}},[e.imgDataUrl?o("v-img",{attrs:{height:"350",src:e.imgDataUrl}}):o("div",{staticClass:"px-12",attrs:{id:"image-placeholder"}},[o("v-icon",[e._v("mdi-image-plus")])],1)],1)],1)],1)],1)],1)},i=[],a=o("b5e5"),r=(o("e186"),o("a9b6"),o("44ad"),o("49e9"),o("c2e6"),o("a9d5"),o("59d7"),o("663a")),s=o("7b4e"),l=o("3678"),d={name:"Details",data:function(){return{inputLoading:!1,submitLoading:!1,categoryLoading:!1,value:0,show:!1,rules:[function(e){return!e||e.size<5e6||"Video size should be less than 5 MB!"}],categoriesTitles:[],categories:[],visibility:["public","private"],formData:{title:"",description:"",category:"",visibility:""},imgDataUrl:"",url:"",headers:{Authorization:"Bearer ".concat(this.$store.getters.getToken)}}},methods:{getVideo:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.inputLoading=!0,t.next=3,s["a"].getById(e.$route.params.id).catch((function(e){console.log(e)})).finally((function(){e.inputLoading=!1}));case 3:if(o=t.sent,o){t.next=6;break}return t.abrupt("return");case 6:o=o.data.data,e.url="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_URL,"/api/v1/videos/").concat(o._id,"/thumbnails"),e.formData.title=o.title,e.formData.description=o.description,e.formData.visibility="draft"==o.status?"":o.status,e.formData.category=o.categoryId.title,e.imgDataUrl="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_URL,"/uploads/thumbnails/").concat(o.thumbnailUrl);case 13:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.submitLoading=!0,e.formData.category=e.categories.find((function(t){return t.title===e.formData.category}))._id,t.next=4,s["a"].updateVideo(e.$route.params.id,{title:e.formData.title,description:e.formData.description,categoryId:e.formData.category,status:e.formData.visibility.toLowerCase()}).catch((function(e){console.log(e)})).finally((function(){return e.submitLoading=!1}));case 4:if(o=t.sent,o){t.next=7;break}return t.abrupt("return");case 7:e.$router.push("/studio/videos");case 8:case"end":return t.stop()}}),t)})))()},getCategories:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.categoryLoading=!0,t.next=3,l["a"].getAll().catch((function(e){console.log(e)})).finally((function(){return e.categoryLoading=!1}));case 3:o=t.sent,e.categoriesTitles=o.data.data.map((function(e){return e.title})),e.categories=o.data.data;case 6:case"end":return t.stop()}}),t)})))()},toggleShow:function(){this.show=!this.show},cropSuccess:function(e,t){console.log("-------- crop success --------"),console.log(t),this.imgDataUrl=e}},components:{myUpload:r["a"]},mounted:function(){this.getVideo(),this.getCategories()}},c=d,u=(o("3adf"),o("cba8")),p=o("72e9"),m=o.n(p),f=o("3df0"),y=o("8742"),g=o("262a"),v=o("1e55"),h=o("d46d"),_=o("d38f"),b=o("a519"),C=o("10a0"),k=o("69fa"),w=o("260f"),P=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=P.exports;m()(P,{VBtn:f["a"],VCol:y["a"],VContainer:g["a"],VIcon:v["a"],VImg:h["a"],VResponsive:_["a"],VRow:b["a"],VSelect:C["a"],VTextField:k["a"],VTextarea:w["a"]})},"222f":function(e,t,o){"use strict";o("3ad9")},"2d3b":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pl-6",attrs:{id:"search"}},[o("v-container",{attrs:{fluid:""}},[o("v-row",[e.errored?o("v-alert",{staticClass:"mx-auto",attrs:{prominent:"",type:"error"}},[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"grow"},[o("div",{staticClass:"title"},[e._v("Error!")]),o("div",[e._v(" Something went wrong, but don’t fret — let’s give it another shot. ")])]),o("v-col",{staticClass:"shrink"},[o("v-btn",{on:{click:e.get}},[e._v("Take action")])],1)],1)],1):o("v-col",{attrs:{cols:"12",sm:"12",md:"10",lg:"11"}},[0===e.results.length?[o("p",{staticClass:"text-center"},[e._v("Ops! No search results")])]:e._l(e.loading?5:e.results,(function(t,n){return o("div",{key:n,staticClass:"mb-5"},[o("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-avatar-three-line",loading:e.loading,tile:"",large:""}},["undefined"!==typeof t.channelName?o("v-card",{staticClass:"card mb-10",attrs:{to:"/channels/"+t._id,tile:"",flat:""}},[o("v-row",{attrs:{"no-gutters":"",justify:"center"}},[o("v-col",{staticClass:"d-flex",attrs:{cols:"10",sm:"10",md:"3",lg:"3"}},[o("v-avatar",{staticClass:"mx-auto red",attrs:{size:"120","max-width":"150"}},["no-photo.jpg"!==t.photoUrl?o("img",{attrs:{src:e.getUrl+"/uploads/avatars/"+t.photoUrl,alt:t.channelName+" avatar"}}):[o("span",{staticClass:"white--text display-1"},[e._v(" "+e._s(t.channelName.split("")[0].toUpperCase()))])]],2)],1),o("v-col",{staticClass:"justify-center",attrs:{cols:"10",sm:"10",md:"6",lg:"6"}},[o("v-card-title",{staticClass:"pl-2 pt-0 subtitle-1 font-weight-bold align-center"},[e._v(" "+e._s(t.channelName)+" ")]),o("v-card-subtitle",{staticClass:"pl-2 pt-2 pb-0",staticStyle:{"line-height":"1.2"}},[e._v(" "+e._s(t.subscribers)+" subscribers"),o("v-icon",[e._v("mdi-circle-small")]),e._v(e._s(t.videos)+" videos ")],1),o("v-card-subtitle",{staticClass:"pl-2 pt-2 pb-0"},[e._v(" "+e._s(t.description)+" ")])],1)],1)],1):o("v-card",{staticClass:"card mb-10",attrs:{to:"/watch/"+t._id,tile:"",flat:""}},[t.userId?o("v-row",{attrs:{"no-gutters":""}},[o("v-col",{attrs:{cols:"5",sm:"3",md:"3",lg:"3"}},[o("v-img",{staticClass:"align-center",attrs:{src:e.getUrl+"/uploads/thumbnails/"+t.thumbnailUrl,alt:t.userId.channelName+" avatar"}})],1),o("v-col",{attrs:{cols:"7",sm:"7",md:"8",lg:"8"}},[o("div",{staticClass:"ml-2"},[o("v-card-title",{staticClass:"pl-2 pt-0 subtitle-1 font-weight-bold"},[e._v(" "+e._s(t.title)+" ")]),o("v-card-subtitle",{staticClass:"pl-2 pt-2 pb-0",staticStyle:{"line-height":"1.2"}},[e._v(" "+e._s(t.userId.channelName)),o("br"),e._v(" "+e._s(t.views)+" views"),o("v-icon",[e._v("mdi-circle-small")]),e._v("6 hours ago ")],1),o("v-card-subtitle",{staticClass:"pl-2 pt-2 pb-0"},[e._v(" "+e._s(t.description)+" ")])],1)])],1):e._e()],1)],1)],1)})),o("infinite-loading",{attrs:{identifier:e.infiniteId},on:{infinite:e.getSearchResults},scopedSlots:e._u([{key:"error",fn:function(t){var n=t.trigger;return o("div",{},[o("v-alert",{attrs:{prominent:"",type:"error"}},[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"grow"},[o("div",{staticClass:"title"},[e._v("Error!")]),o("div",[e._v(" Something went wrong, but don’t fret — let’s give it another shot. ")])]),o("v-col",{staticClass:"shrink"},[o("v-btn",{on:{click:n}},[e._v("Take action")])],1)],1)],1)],1)}}])},[o("div",{attrs:{slot:"spinner"},slot:"spinner"},[o("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1),o("div",{attrs:{slot:"no-results"},slot:"no-results"}),o("span",{attrs:{slot:"no-more"},slot:"no-more"})])],2)],1)],1)],1)},i=[],a=o("c1f9"),r=o("b5e5"),s=o("a19a"),l=(o("e186"),o("a9b6"),o("3fab"),o("814e"),o("1a5f")),d=o.n(l),c=o("7736"),u=o("3f4a"),p={search:function(e,t){return Object(u["a"])().post("search?page=".concat(e),t)}},m={data:function(){return{errored:!1,loading:!0,loaded:!1,page:1,results:[],text:"",infiniteId:+new Date}},computed:Object(s["a"])({},Object(c["b"])(["getUrl"])),methods:{getSearchResults:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.errored=!1,t.loaded||(t.loading=!0),o.next=4,p.search(t.page,{text:t.text}).catch((function(e){console.log(e),t.errored=!0})).finally((function(){t.loading=!1}));case 4:if(n=o.sent,n){o.next=7;break}return o.abrupt("return");case 7:n.data.data.length?(t.page+=1,(i=t.results).push.apply(i,Object(a["a"])(n.data.data)),e&&e.loaded(),t.loaded=!0):e&&e.complete();case 8:case"end":return o.stop()}}),o)})))()}},components:{InfiniteLoading:d.a},beforeRouteUpdate:function(e,t,o){""!==e.query["search-query"]&&(this.text=e.query["search-query"],this.page=1,this.results=[],this.infiniteId+=1,o())},mounted:function(){this.text=this.$route.query["search-query"]}},f=m,y=o("cba8"),g=o("72e9"),v=o.n(g),h=o("ff9c"),_=o("234c"),b=o("3df0"),C=o("c0ce"),k=o("c615"),w=o("8742"),P=o("262a"),E=o("1e55"),A=o("d46d"),I=o("d924"),T=o("a519"),L=o("6f1f"),O=Object(y["a"])(f,n,i,!1,null,null,null);t["default"]=O.exports;v()(O,{VAlert:h["a"],VAvatar:_["a"],VBtn:b["a"],VCard:C["a"],VCardSubtitle:k["b"],VCardTitle:k["d"],VCol:w["a"],VContainer:P["a"],VIcon:E["a"],VImg:A["a"],VProgressCircular:I["a"],VRow:T["a"],VSkeletonLoader:L["a"]})},"329d":function(e,t,o){},"3ad9":function(e,t,o){},"3adf":function(e,t,o){"use strict";o("b5a7")},"3bdf":function(e,t,o){"use strict";var n=o("e7ec"),i=o("1111").PROPER,a=o("a3e9"),r=o("16bc"),s=o("99a6"),l=o("78f8"),d=o("b68d"),c=o("3f3e"),u="toString",p=RegExp.prototype,m=p[u],f=n(c),y=d((function(){return"/a/b"!=m.call({source:"a",flags:"b"})})),g=i&&m.name!=u;(y||g)&&a(RegExp.prototype,u,(function(){var e=r(this),t=l(e.source),o=e.flags,n=l(void 0===o&&s(p,e)&&!("flags"in p)?f(e):o);return"/"+t+"/"+n}),{unsafe:!0})},"3f2f":function(e,t,o){"use strict";o("b663")},"4eb8":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"watch",staticClass:" black",attrs:{id:"watch"}},[o("v-container",{attrs:{fluid:""}},[o("v-row",[e.errored?o("v-alert",{staticClass:"mx-auto",attrs:{prominent:"",type:"error"}},[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"grow"},[o("div",{staticClass:"title"},[e._v("Error!")]),o("div",[e._v(" 오류가 났습니다. 다시 시도하시기를 클릭하십시오. ")])]),o("v-col",{staticClass:"shrink"},[o("v-btn",{on:{click:e.actions}},[e._v("새로 고치다")])],1)],1)],1):o("v-col",{staticClass:"mx-auto",attrs:{cols:"11"}},[o("v-row",[o("v-col",{attrs:{cols:"12",sm:"12",md:"8",lg:"8"}},[o("v-skeleton-loader",{attrs:{type:"card-avatar, article, actions",tile:"",large:""}},[o("div",{ref:"hello"},[o("v-responsive",[o("fluid-player",{attrs:{option:e.options}})],1),o("v-card",{staticClass:"card",attrs:{flat:"",tile:"",color:"black"}},[o("v-card-title",{staticClass:"pl-0 pb-0"},[e._v(e._s(e.video.title))]),o("div",{staticClass:"d-flex flex-wrap justify-space-between",attrs:{id:"btns"}},[o("v-card-subtitle",{staticClass:"pl-0 pt-0 pb-0 subtitle-1",staticStyle:{"line-height":"2.4em"}},[e._v(" "+e._s(e.video.views)+" 관람하다."),o("v-icon",[e._v("mdi-circle-small")]),e._v(e._s(e.video.CreatedAt)+" ")],1),o("v-card-actions",{staticClass:"pt-0 pl-0"},[o("v-btn",{attrs:{text:""}},[o("v-icon",{class:"pr-2"+("like"!==e.feeling?" grey--text text--darken-1":"")},[e._v("mdi-thumb-up")]),e._v(e._s(e.video.likes))],1),o("v-btn",{attrs:{text:""}},[o("v-icon",{class:"pr-2"+("dislike"!==e.feeling?" grey--text text--darken-1":"")},[e._v("mdi-thumb-down")]),e._v(" "+e._s(e.video.dislikes))],1)],1)],1)],1)],1),e._l(e.posters,(function(e){return o("div",{key:e._id},[o("v-card",{attrs:{width:"100%",href:e.href,target:"_blank"}},[o("v-img",{staticClass:"grey darken-4",attrs:{src:e.pic_url,"max-height":"600",width:"100%",contain:""}})],1)],1)}))],2)],1),o("v-col",{attrs:{cols:"12",sm:"12",md:"4",lg:"4"},scopedSlots:e._u([{key:"error",fn:function(t){var n=t.trigger;return o("div",{},[o("v-alert",{attrs:{prominent:"",type:"error"}},[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"grow"},[o("div",{staticClass:"title"},[e._v("Error!")]),o("div",[e._v(" 오류가 났습니다. 다시 시도하시기를 클릭하십시오. ")])]),o("v-col",{staticClass:"shrink"},[o("v-btn",{on:{click:n}},[e._v("새로 고치다")])],1)],1)],1)],1)}}])},[o("hr",{staticClass:"grey--text"}),o("h4",{staticClass:"mb-3 mt-3"},[e._v("고객이 좋아할만한 것")]),e._l(e.videos,(function(t,n){return o("div",{key:n,staticClass:"mb-5"},[o("v-card",{staticClass:"card",attrs:{tile:"",flat:"",color:"black"},on:{click:function(o){return e.nextVideo(t._id)}}},[o("v-row",{attrs:{"no-gutters":""}},[o("v-col",{staticClass:"mx-auto",attrs:{cols:"12",sm:"12",md:"5",lg:"5"}},[o("v-img",{staticClass:"align-center",attrs:{height:"110",src:t.thumbnailUrl}})],1),o("v-col",[o("div",{staticClass:"ml-2"},[o("v-card-title",{staticClass:"pl-2 pt-0 subtitle-1 font-weight-bold",staticStyle:{"line-height":"1"}},[e._v(" "+e._s(t.title)+" ")]),o("v-card-subtitle",{staticClass:"pl-2 pt-2 pb-0",staticStyle:{"line-height":"1"}},[e._v(" "+e._s(t.userId.channelName)),o("br"),e._v(" "+e._s(t.views)+" 관람하다. "),o("v-icon",[e._v("mdi-circle-small")]),e._v(" "+e._s(e.dateFormatter(t.CreatedAt))+" ")],1)],1)])],1)],1)],1)})),o("div",{attrs:{slot:"spinner"},slot:"spinner"},[o("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1),o("div",{attrs:{slot:"no-results"},slot:"no-results"}),o("span",{attrs:{slot:"no-more"},slot:"no-more"})],2)],1)],1)],1)],1),o("signin-modal",{attrs:{openModal:e.signinDialog,details:e.details},on:{closeModal:function(t){e.signinDialog=!1}}})],1)},i=[],a=o("c1f9"),r=o("b5e5"),s=o("a19a"),l=(o("e186"),o("a9b6"),o("c284"),o("57b6"),o("caaf")),d=o.n(l),c=o("7736"),u=o("7b4e"),p=o("e7f4"),m=o("444b"),f=o("931e"),y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fluid-component"},[o("video",{ref:"myVideoPlayer",attrs:{controls:"",crossorigin:""}},[o("source",{ref:"source",attrs:{src:e.videoUrl.url,"data-fluid-hd":"",type:"application/x-mpegURL"}})])])},g=[],v=o("f370"),h={name:"FluidPlayer",props:{option:{type:Object,default:function(){}}},data:function(){return{player:null,videoUrl:{url:this.option.url}}},mounted:function(){},methods:{getPlay:function(e){var t={layoutControls:{primaryColor:"#28B8ED",preload:!0,playbackRateEnabled:!0,persistentSettings:{volume:!1,quality:!1,speed:!1,theatre:!1},controlForwardBackward:{show:!0},posterImage:e.posterUrl||""},vastOptions:{allowVPAID:!0,adList:[{roll:"preRoll",vastTag:e.ads||"",fallbackVastTags:[""],adText:"Advertising supports us directly"}],vastTimeout:1e3,showProgressbarMarkers:!0,vastAdvanced:{vastLoadedCallback:function(){console.log("Here one event")},noVastVideoCallback:function(){console.log("Here another")},vastVideoSkippedCallback:function(){console.log("Here one more")},vastVideoEndedCallback:function(){console.log("Here's the last")}}}};console.log(t,"options******************"),this.player=Object(v["a"])(this.$refs.myVideoPlayer,t)}},computed:{},watch:{option:{handler:function(e){console.log(this,e),this.$set(this.videoUrl,"url",e.url),this.$refs.source.src=e.url,this.getPlay(e),console.log(this.videoUrl,"video url======="),console.log(this.$refs.source.src,"soruce is")},deep:!0}},unmounted:function(){this.player&&this.player.destroy()}},_=h,b=(o("9e5f"),o("cba8")),C=Object(b["a"])(_,y,g,!1,null,"5aebe396",null),k=C.exports,w={name:"watch",components:{SigninModal:f["a"],FluidPlayer:k},data:function(){return{options:{posterUrl:"",url:"",ads:""},posters:[],videoOptions:{autoplay:!1,controls:!0,muted:!1,sources:[]},loading:!1,loaded:!1,errored:!1,videoLoading:!1,subscribed:!1,subscribeLoading:!1,showSubBtn:!0,feeling:"",video:{},videos:[],page:1,signinDialog:!1,details:{}}},computed:Object(s["a"])({},Object(c["b"])(["currentUser","getUrl","isAuthenticated"])),methods:{nextVideo:function(e){this.$router.push("/watch/"+e),this.$router.go()},getPosters:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].getPosters({typee:3});case 2:o=t.sent,o.data.data.forEach((function(t){e.posters.push(t)}));case 4:case"end":return t.stop()}}),t)})))()},getVideo:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,i,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.errored=!1,t.videoLoading=!0,t.video={},o.prev=3,o.next=6,u["a"].getById(e);case 6:return n=o.sent,o.next=9,u["a"].getPosters({typee:4});case 9:if(i=o.sent,n){o.next=12;break}return o.abrupt("return",t.$router.push("/"));case 12:t.video=n.data.data[0],a=n.data.data[0].url,t.options.posterUrl=n.data.data[0].thumbnailUrl,t.options.url=a,t.options.ads=i.data.data[0].video_url,o.next=23;break;case 19:o.prev=19,o.t0=o["catch"](3),t.errored=!0,console.log(o.t0);case 23:case"end":return o.stop()}}),o,null,[[3,19]])})))()},getVideos:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,i,r,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.errored=!1,t.loaded||(t.loading=!0),n=[4,5,6,7,10],i=n[Math.floor(Math.random()*n.length)],o.next=6,u["a"].getAll("public",{page:20*t.page,classify:i}).catch((function(e){console.log(e),t.errored=!0})).finally((function(){return t.loading=!1}));case 6:if(r=o.sent,"undefined"!==typeof r){o.next=9;break}return o.abrupt("return");case 9:r.data.data.length?((s=t.videos).push.apply(s,Object(a["a"])(r.data.data)),e&&e.loaded(),t.loaded=!0):e&&e.complete();case 10:case"end":return o.stop()}}),o)})))()},checkSubscription:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.isAuthenticated){o.next=2;break}return o.abrupt("return");case 2:return t.loading=!0,o.next=5,p["a"].checkSubscription({channelId:e}).catch((function(e){console.log(e)})).finally((function(){t.loading=!1}));case 5:if(n=o.sent,n){o.next=8;break}return o.abrupt("return");case 8:n.data.data._id?t.subscribed=!0:t.subscribed=!1;case 9:case"end":return o.stop()}}),o)})))()},checkFeeling:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.isAuthenticated){o.next=2;break}return o.abrupt("return");case 2:return t.loading=!0,o.next=5,m["a"].checkFeeling({videoId:e}).catch((function(e){console.log(e)})).finally((function(){t.loading=!1}));case 5:if(n=o.sent,n){o.next=8;break}return o.abrupt("return");case 8:"like"===n.data.data.feeling?t.feeling="like":"dislike"===n.data.data.feeling&&(t.feeling="dislike");case 9:case"end":return o.stop()}}),o)})))()},createFeeling:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.isAuthenticated){o.next=4;break}return t.signinDialog=!0,t.details={title:"like"===e?"Like this video?":"Don't like this video?",text:"Sign in to make your opinion count."},o.abrupt("return");case 4:o.t0=!0,o.next=o.t0===("like"===e&&""===t.feeling)?7:o.t0===("like"===e&&t.feeling===e)?10:o.t0===("like"===e&&"dislike"===t.feeling)?13:o.t0===("dislike"===e&&""===t.feeling)?17:o.t0===("dislike"===e&&t.feeling===e)?20:o.t0===("dislike"===e&&"like"===t.feeling)?23:26;break;case 7:return t.feeling="like",t.video.likes++,o.abrupt("break",26);case 10:return t.feeling="",t.video.likes--,o.abrupt("break",26);case 13:return t.feeling="like",t.video.dislikes--,t.video.likes++,o.abrupt("break",26);case 17:return t.feeling="dislike",t.video.dislikes++,o.abrupt("break",26);case 20:return t.feeling="",t.video.dislikes--,o.abrupt("break",26);case 23:t.feeling="dislike",t.video.likes--,t.video.dislikes++;case 26:return o.next=28,m["a"].createFeeling({videoId:t.video._id,type:e}).catch((function(e){console.log(e)}));case 28:if(n=o.sent,n){o.next=31;break}return o.abrupt("return");case 31:case"end":return o.stop()}}),o)})))()},subscribe:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isAuthenticated){t.next=4;break}return e.signinDialog=!0,e.details={title:"Want to subscribe to this channel?",text:"Sign in to subscribe to this channel."},t.abrupt("return");case 4:return e.subscribeLoading=!0,t.next=7,p["a"].createSubscription({channelId:e.video.userId._id}).catch((function(e){return console.log(e)})).finally((function(){e.subscribeLoading=!1}));case 7:if(o=t.sent,o){t.next=10;break}return t.abrupt("return");case 10:o.data.data._id?(e.subscribed=!0,e.video.userId.subscribers++):(e.subscribed=!1,e.video.userId.subscribers--);case 11:case"end":return t.stop()}}),t)})))()},updateViews:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,u["a"].updateViews(e).catch((function(e){console.log(e)}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:t.video.views++;case 6:case"end":return o.stop()}}),o)})))()},play:function(e){console.log(e)},actions:function(){this.getVideo()},show:function(e){"SHOW MORE"===e.target.innerText?(this.truncate=!1,e.target.innerText="SHOW LESS"):(this.truncate=!0,e.target.innerText="SHOW MORE")},truncateText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.length<=t?e:e.slice(0,t)},dateFormatter:function(e){return d()(e).format("YYYY-MM-DD")}},mounted:function(){this.getVideo(this.$route.params.id),this.getVideos(this.$state),this.getPosters()}},P=w,E=(o("222f"),o("72e9")),A=o.n(E),I=o("ff9c"),T=o("3df0"),L=o("c0ce"),O=o("c615"),R=o("8742"),V=o("262a"),S=o("1e55"),B=o("d46d"),x=o("d924"),N=o("d38f"),M=o("a519"),D=o("6f1f"),F=Object(b["a"])(P,n,i,!1,null,null,null);t["default"]=F.exports;A()(F,{VAlert:I["a"],VBtn:T["a"],VCard:L["a"],VCardActions:O["a"],VCardSubtitle:O["b"],VCardTitle:O["d"],VCol:R["a"],VContainer:V["a"],VIcon:S["a"],VImg:B["a"],VProgressCircular:x["a"],VResponsive:N["a"],VRow:M["a"],VSkeletonLoader:D["a"]})},5515:function(e,t,o){},"5f63":function(e,t,o){"use strict";o("6c86");var n=o("3344"),i=o("bd98"),a=o("cf9e"),r=o("ace2"),s=o("dc31"),l=o("89ea"),d=o("bd15"),c=o("78c7");t["a"]=Object(l["a"])(n["a"],i["a"],r["a"],Object(s["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:e=>"string"===typeof e||!1===e},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:a["a"].options.computed.isDark.call(this)},styles(){if(this.absolute)return{};const{bar:e,bottom:t,footer:o,insetFooter:n,left:i,right:a,top:r}=this.$vuetify.application;return{paddingBottom:Object(d["h"])(t+o+n),paddingLeft:this.app?Object(d["h"])(i):void 0,paddingRight:this.app?Object(d["h"])(a):void 0,paddingTop:Object(d["h"])(e+r)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&Object(c["e"])("auto-height",this),0==this.timeout&&Object(c["d"])('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(d["s"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[Object(d["s"])(this)])},genWrapper(){const e=this.hasBackground?this.setBackgroundColor:this.setTextColor,t=e(this.color,{staticClass:"v-snack__wrapper",class:n["a"].options.computed.classes.call(this),style:n["a"].options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",t,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout(()=>{this.isActive=!1},e))}},render(e){return e("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},"6c86":function(e,t,o){},7314:function(e,t,o){"use strict";o("3fab");var n=o("e7ec"),i=o("a3e9"),a=o("ba60"),r=o("b68d"),s=o("d442"),l=o("d28a"),d=s("species"),c=RegExp.prototype;e.exports=function(e,t,o,u){var p=s(e),m=!r((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=m&&!r((function(){var t=!1,o=/a/;return"split"===e&&(o={},o.constructor={},o.constructor[d]=function(){return o},o.flags="",o[p]=/./[p]),o.exec=function(){return t=!0,null},o[p](""),!t}));if(!m||!f||o){var y=n(/./[p]),g=t(p,""[e],(function(e,t,o,i,r){var s=n(e),l=t.exec;return l===a||l===c.exec?m&&!r?{done:!0,value:y(t,o,i)}:{done:!0,value:s(o,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(c,p,g[1])}u&&l(c[p],"sham",!0)}},"750d":function(e,t,o){"use strict";var n=o("16be"),i=o.n(n);"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const o=Object(e);for(let n=1;n<arguments.length;n++){const e=arguments[n];if(null!=e)for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}return o},writable:!0,configurable:!0}),function(){if("function"===typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e){e.forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}))}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),i.a.polyfill()},"814e":function(e,t,o){"use strict";var n=o("7faf"),i=o("7314"),a=o("16bc"),r=o("41be"),s=o("1326"),l=o("78f8"),d=o("0e65"),c=o("c64f");i("search",(function(e,t,o){return[function(t){var o=r(this),i=void 0==t?void 0:d(t,e);return i?n(i,t,o):new RegExp(t)[e](l(o))},function(e){var n=a(this),i=l(e),r=o(t,n,i);if(r.done)return r.value;var d=n.lastIndex;s(d,0)||(n.lastIndex=0);var u=c(n,i);return s(n.lastIndex,d)||(n.lastIndex=d),null===u?-1:u.index}]}))},9772:function(e,t,o){"use strict";var n=function(e,t){const o={AdStarted:()=>e.onStartVpaidAd,AdStopped:()=>e.onStopVpaidAd,AdSkipped:()=>e.onSkipVpaidAd,AdLoaded:()=>e.onVpaidAdLoaded,AdLinearChange:()=>e.onVpaidAdLinearChange,AdSizeChange:()=>e.onVpaidAdSizeChange,AdExpandedChange:()=>e.onVpaidAdExpandedChange,AdSkippableStateChange:()=>e.onVpaidAdSkippableStateChange,AdDurationChange:()=>e.onVpaidAdDurationChange,AdRemainingTimeChange:()=>e.onVpaidAdRemainingTimeChange,AdVolumeChange:()=>e.onVpaidAdVolumeChange,AdImpression:()=>e.onVpaidAdImpression,AdClickThru:()=>e.onVpaidAdClickThru,AdInteraction:()=>e.onVpaidAdInteraction,AdVideoStart:()=>e.onVpaidAdVideoStart,AdVideoFirstQuartile:()=>e.onVpaidAdVideoFirstQuartile,AdVideoMidpoint:()=>e.onVpaidAdVideoMidpoint,AdVideoThirdQuartile:()=>e.onVpaidAdVideoThirdQuartile,AdVideoComplete:()=>e.onVpaidAdVideoComplete,AdUserAcceptInvitation:()=>e.onVpaidAdUserAcceptInvitation,AdUserMinimize:()=>e.onVpaidAdUserMinimize,AdUserClose:()=>e.onVpaidAdUserClose,AdPaused:()=>e.onVpaidAdPaused,AdPlaying:()=>e.onVpaidAdPlaying,AdError:()=>e.onVpaidAdError,AdLog:()=>e.onVpaidAdLog};e.checkVPAIDInterface=e=>{const t=e;return!!(t.handshakeVersion&&"function"==typeof t.handshakeVersion&&t.initAd&&"function"==typeof t.initAd&&t.startAd&&"function"==typeof t.startAd&&t.stopAd&&"function"==typeof t.stopAd&&t.skipAd&&"function"==typeof t.skipAd&&t.resizeAd&&"function"==typeof t.resizeAd&&t.pauseAd&&"function"==typeof t.pauseAd&&t.resumeAd&&"function"==typeof t.resumeAd&&t.expandAd&&"function"==typeof t.expandAd&&t.collapseAd&&"function"==typeof t.collapseAd&&t.subscribe&&"function"==typeof t.subscribe&&t.unsubscribe&&"function"==typeof t.unsubscribe)},e.onVpaidAdPaused=()=>{e.vpaidTimeoutTimerClear(),e.debugMessage("onAdPaused")},e.onVpaidAdPlaying=()=>{e.vpaidTimeoutTimerClear(),e.debugMessage("onAdPlaying")},e.onVpaidAdError=t=>{e.debugMessage("onAdError: "+t),e.vpaidTimeoutTimerClear(),e.onVpaidEnded()},e.onVpaidAdLog=t=>{e.debugMessage("onAdLog: "+t)},e.onVpaidAdUserAcceptInvitation=()=>{e.debugMessage("onAdUserAcceptInvitation")},e.onVpaidAdUserMinimize=()=>{e.debugMessage("onAdUserMinimize")},e.onVpaidAdUserClose=()=>{e.debugMessage("onAdUserClose")},e.onVpaidAdSkippableStateChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Skippable State Changed to: "+e.vpaidAdUnit.getAdSkippableState())},e.onVpaidAdExpandedChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Expanded Changed to: "+e.vpaidAdUnit.getAdExpanded())},e.getVpaidAdExpanded=()=>{if(e.debugMessage("getAdExpanded"),e.vpaidAdUnit)return e.vpaidAdUnit.getAdExpanded()},e.getVpaidAdSkippableState=()=>{if(e.debugMessage("getAdSkippableState"),e.vpaidAdUnit)return e.vpaidAdUnit.getAdSkippableState()},e.onVpaidAdSizeChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad size changed to: w="+e.vpaidAdUnit.getAdWidth()+" h="+e.vpaidAdUnit.getAdHeight())},e.onVpaidAdDurationChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Duration Changed to: "+e.vpaidAdUnit.getAdDuration())},e.onVpaidAdRemainingTimeChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Remaining Time Changed to: "+e.vpaidAdUnit.getAdRemainingTime())},e.getVpaidAdRemainingTime=()=>{if(e.debugMessage("getAdRemainingTime"),e.vpaidAdUnit)return e.vpaidAdUnit.getAdRemainingTime()},e.onVpaidAdImpression=()=>{e.debugMessage("Ad Impression"),e.trackSingleEvent("impression")},e.onVpaidAdClickThru=(t,o,n)=>{e.debugMessage("Clickthrough portion of the ad was clicked"),n&&window.open(e.vastOptions.clickthroughUrl),e.pauseVpaidAd(),e.callUris(e.vastOptions.clicktracking)},e.onVpaidAdInteraction=t=>{e.debugMessage("A non-clickthrough event has occured")},e.onVpaidAdVideoStart=()=>{e.debugMessage("Video 0% completed"),e.trackSingleEvent("start")},e.onVpaidAdVideoFirstQuartile=()=>{e.debugMessage("Video 25% completed"),e.trackSingleEvent("firstQuartile")},e.onVpaidAdVideoMidpoint=()=>{e.debugMessage("Video 50% completed"),e.trackSingleEvent("midpoint")},e.onVpaidAdVideoThirdQuartile=()=>{e.debugMessage("Video 75% completed"),e.trackSingleEvent("thirdQuartile")},e.onVpaidAdVideoComplete=()=>{e.debugMessage("Video 100% completed"),e.trackSingleEvent("complete")},e.onVpaidAdLinearChange=()=>{const t=document.getElementsByClassName("fluid_vpaidNonLinear_ad")[0],o=document.getElementById("close_button_"+e.videoPlayerId),n=t.getAttribute("adlistid");if(e.debugMessage("Ad linear has changed: "+e.vpaidAdUnit.getAdLinear()),!e.vpaidAdUnit.getAdLinear())return;e.backupMainVideoContentTime(n),e.isCurrentlyPlayingAd=!0,o&&o.remove(),t.className="fluid_vpaid_slot",t.id=e.videoPlayerId+"_fluid_vpaid_slot",e.domRef.player.loop=!1,e.domRef.player.removeAttribute("controls");const i=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let a=0;a<i.length;a++)i[a].style.backgroundColor=e.displayOptions.layoutControls.adProgressColor;e.toggleLoader(!1)},e.getVpaidAdLinear=()=>(e.debugMessage("getAdLinear"),e.vpaidAdUnit.getAdLinear()),e.startVpaidAd=()=>{e.debugMessage("startAd"),e.vpaidTimeoutTimerStart(),e.vpaidAdUnit.startAd()},e.onVpaidAdLoaded=()=>{e.debugMessage("ad has been loaded"),e.vpaidTimeoutTimerClear(),e.startVpaidAd()},e.onStartVpaidAd=()=>{e.debugMessage("Ad has started"),e.vpaidTimeoutTimerClear()},e.stopVpaidAd=()=>{e.vpaidTimeoutTimerStart(),e.vpaidAdUnit.stopAd()},e.hardStopVpaidAd=t=>{e.vpaidAdUnit&&(e.vpaidAdUnit.stopAd(),e.vpaidAdUnit=null);const o=document.getElementsByClassName("fluid_vpaid_iframe"),n=document.getElementsByClassName("fluid_vpaid_slot"),i=document.getElementsByClassName("fluid_vpaidNonLinear_ad");for(let e=0;e<o.length;e++)o[e].getAttribute("adListId")!==t&&o[e].remove();for(let e=0;e<n.length;e++)n[e].getAttribute("adListId")!==t&&n[e].remove();for(let e=0;e<i.length;e++)i[e].getAttribute("adListId")!==t&&i[e].remove()},e.onStopVpaidAd=()=>{e.debugMessage("Ad has stopped"),e.vpaidTimeoutTimerClear(),e.onVpaidEnded()},e.onSkipVpaidAd=()=>{e.debugMessage("Ad was skipped"),e.vpaidTimeoutTimerClear(),e.onVpaidEnded()},e.skipVpaidAd=()=>{e.vpaidTimeoutTimerStart(),e.vpaidAdUnit&&(e.vpaidAdUnit.skipAd(),e.vpaidTimeoutTimerClear(),e.onVpaidEnded())},e.setVpaidAdVolume=t=>{e.vpaidAdUnit&&e.vpaidAdUnit.setAdVolume(t)},e.getVpaidAdVolume=()=>{if(e.vpaidAdUnit)return e.vpaidAdUnit.getAdVolume()},e.onVpaidAdVolumeChange=()=>{e.vpaidAdUnit&&e.debugMessage("Ad Volume has changed to - "+e.vpaidAdUnit.getAdVolume())},e.resizeVpaidAuto=()=>{if(null!==e.vastOptions&&e.vastOptions.vpaid&&e.vastOptions.linear){const t=e.domRef.player.offsetWidth,o=e.domRef.player.offsetHeight,n=e.fullscreenMode?"fullscreen":"normal";e.resizeVpaidAd(t,o,n)}},e.resizeVpaidAd=(t,o,n)=>{e.vpaidAdUnit&&e.vpaidAdUnit.resizeAd(t,o,n)},e.pauseVpaidAd=()=>{e.vpaidTimeoutTimerStart(),e.vpaidAdUnit&&e.vpaidAdUnit.pauseAd()},e.resumeVpaidAd=()=>{e.vpaidTimeoutTimerStart(),e.vpaidAdUnit&&e.vpaidAdUnit.resumeAd()},e.expandVpaidAd=()=>{e.vpaidAdUnit&&e.vpaidAdUnit.expandAd()},e.collapseVpaidAd=()=>{e.vpaidAdUnit&&e.vpaidAdUnit.collapseAd()},e.vpaidTimeoutTimerClear=()=>{e.vpaidTimer&&clearTimeout(e.vpaidTimer)},e.vpaidTimeoutTimerStart=()=>{e.vpaidTimeoutTimerClear(),e.vpaidTimer=setTimeout((function(){e.announceLocalError("901"),e.onVpaidEnded()}),e.displayOptions.vastOptions.vpaidTimeout)},e.vpaidCallbackListenersAttach=()=>{for(let t in o)e.vpaidAdUnit.subscribe(o[t](),t,e)},e.vpaidCallbackListenersDetach=()=>{if(e.vpaidAdUnit)for(let t in o)e.vpaidAdUnit.unsubscribe(o[t](),t,e)},e.loadVpaid=(t,o)=>{const n=document.createElement("iframe");n.id=e.videoPlayerId+"_"+t+"_fluid_vpaid_iframe",n.className="fluid_vpaid_iframe",n.setAttribute("adListId",t),n.setAttribute("frameborder","0"),e.domRef.player.parentNode.insertBefore(n,e.domRef.player.nextSibling),n.contentWindow.document.write('<script src="'+o+'"><\/script>'),e.tempVpaidCounter=0,e.getVPAIDAdInterval=setInterval((function(){const o=n.contentWindow["getVPAIDAd"];if(o&&"function"==typeof o)e.vpaidAdUnit&&e.hardStopVpaidAd(t),e.vpaidAdUnit=o(),clearInterval(e.getVPAIDAdInterval),e.checkVPAIDInterface(e.vpaidAdUnit)&&(e.getVpaidAdLinear()?(e.isCurrentlyPlayingAd=!0,e.switchPlayerToVpaidMode(t)):(e.debugMessage("non linear vpaid ad is loaded"),e.loadVpaidNonlinearAssets(t)));else{if(e.tempVpaidCounter++,e.tempVpaidCounter>=20)return clearInterval(e.getVPAIDAdInterval),e.adList[t].error=!0,e.playMainVideoWhenVpaidFails(403),!1;e.debugMessage(e.tempVpaidCounter)}}),100)},e.onVpaidEnded=t=>{t&&t.stopImmediatePropagation();const o=document.getElementById(e.videoPlayerId+"_fluid_vpaid_slot");e.vpaidCallbackListenersDetach(),e.vpaidAdUnit=null,clearInterval(e.getVPAIDAdInterval),o&&o.remove(),e.checkForNextAd()},e.playMainVideoWhenVpaidFails=t=>{const o=document.getElementById(e.videoPlayerId+"_fluid_vpaid_slot");o&&o.remove(),clearInterval(e.getVPAIDAdInterval),e.playMainVideoWhenVastFails(t)},e.switchPlayerToVpaidMode=()=>{}},i=function(e,t){e.getClickThroughUrlFromLinear=t=>{const o=t.getElementsByTagName("VideoClicks");if(o.length){const t=o[0].getElementsByTagName("ClickThrough");if(t.length)return e.extractNodeData(t[0])}return!1},e.getVastAdTagUriFromWrapper=t=>{const o=t.getElementsByTagName("Wrapper");if("undefined"!==typeof o&&o.length){const t=o[0].getElementsByTagName("VASTAdTagURI");if(t.length)return e.extractNodeData(t[0])}return!1},e.hasInLine=e=>{const t=e.getElementsByTagName("InLine");return"undefined"!==typeof t&&t.length},e.hasVastAdTagUri=e=>{const t=e.getElementsByTagName("VASTAdTagURI");return"undefined"!==typeof t&&t.length},e.getClickThroughUrlFromNonLinear=t=>{let o="";const n=t.getElementsByTagName("NonLinear");if(n.length){const n=t.getElementsByTagName("NonLinearClickThrough");n.length&&(o=e.extractNodeData(n[0]))}return o},e.getTrackingFromLinear=e=>{const t=e.getElementsByTagName("TrackingEvents");return t.length?t[0].getElementsByTagName("Tracking"):[]},e.getDurationFromLinear=t=>{const o=t.getElementsByTagName("Duration");if(o.length&&"undefined"!==typeof o[0].childNodes[0]){const t=e.extractNodeData(o[0]);return e.convertTimeStringToSeconds(t)}return!1},e.getDurationFromNonLinear=t=>{let o=0;const n=t.getElementsByTagName("NonLinear");return n.length&&"undefined"!==typeof n[0].getAttribute("minSuggestedDuration")&&(o=e.convertTimeStringToSeconds(n[0].getAttribute("minSuggestedDuration"))),o},e.getDimensionFromNonLinear=e=>{const t={width:null,height:null},o=e.getElementsByTagName("NonLinear");return o.length&&("undefined"!==typeof o[0].getAttribute("width")&&(t.width=o[0].getAttribute("width")),"undefined"!==typeof o[0].getAttribute("height")&&(t.height=o[0].getAttribute("height"))),t},e.getCreativeTypeFromStaticResources=e=>{let t="";const o=e.getElementsByTagName("NonLinear");return o.length&&"undefined"!==typeof o[0].childNodes[0]&&(t=o[0].getElementsByTagName("StaticResource")[0].getAttribute("creativeType")),t.toLowerCase()},e.getMediaFilesFromLinear=e=>{const t=e.getElementsByTagName("MediaFiles");return t.length?t[0].getElementsByTagName("MediaFile"):[]},e.getStaticResourcesFromNonLinear=e=>{let t=[];const o=e.getElementsByTagName("NonLinear");return o.length&&(t=o[0].getElementsByTagName("StaticResource")),t},e.extractNodeData=e=>{let t="";for(let o=0;o<e.childNodes.length;o++){const n=e.childNodes[o];8===n.nodeType||3===n.nodeType&&/^\s*$/.test(n.nodeValue)||(t+=n.nodeValue)}return t.replace(/(^\s+|\s+$)/g,"")},e.getAdParametersFromLinear=t=>{const o=t.getElementsByTagName("AdParameters");let n=null;return o.length&&(n=e.extractNodeData(o[0])),n},e.getMediaFileListFromLinear=t=>{const o=[],n=e.getMediaFilesFromLinear(t);if(!n.length)return o;for(let i=0;i<n.length;i++){let t=n[i].getAttribute("mediaType");t||(t="2D"),o.push({src:e.extractNodeData(n[i]),type:n[i].getAttribute("type"),apiFramework:n[i].getAttribute("apiFramework"),codec:n[i].getAttribute("codec"),id:n[i].getAttribute("codec"),fileSize:n[i].getAttribute("fileSize"),delivery:n[i].getAttribute("delivery"),width:n[i].getAttribute("width"),height:n[i].getAttribute("height"),mediaType:t.toLowerCase()})}return o},e.getIconClickThroughFromLinear=t=>{const o=t.getElementsByTagName("IconClickThrough");return o.length?e.extractNodeData(o[0]):""},e.getStaticResourceFromNonLinear=t=>{let o;const n=e.getStaticResourcesFromNonLinear(t);for(let i=0;i<n.length;i++)if(n[i].getAttribute("type")||(o=e.extractNodeData(n[i])),n[i].getAttribute("type")===e.displayOptions.staticResource)return e.extractNodeData(n[i]);return o},e.registerTrackingEvents=(t,o)=>{const n=e.getTrackingFromLinear(t);let i="",a=0;for(let r=0;r<n.length;r++)switch(i=n[r].getAttribute("event"),i){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":"undefined"===typeof o.tracking[i]&&(o.tracking[i]=[]),"undefined"===typeof o.stopTracking[i]&&(o.stopTracking[i]=[]),o.tracking[i].push(n[r].childNodes[0].nodeValue),o.stopTracking[i]=!1;break;case"progress":"undefined"===typeof o.tracking[i]&&(o.tracking[i]=[]),a=e.convertTimeStringToSeconds(n[r].getAttribute("offset")),"undefined"===typeof o.tracking[i][a]&&(o.tracking[i][a]={elements:[],stopTracking:!1}),o.tracking[i][a].elements.push(n[r].childNodes[0].nodeValue);break;default:break}},e.registerClickTracking=(e,t)=>{if(e&&e.length)for(let o=0;o<e.length;o++)""!==e[o]&&t.clicktracking.push(e[o])},e.registerImpressionEvents=(t,o)=>{if(t.length)for(let n=0;n<t.length;n++){const i=e.extractNodeData(t[n]);o.impression.push(i)}},e.registerErrorEvents=(e,t)=>{"undefined"!==typeof e&&null!==e&&1===e.length&&1===e[0].childNodes.length&&(t.errorUrl=e[0].childNodes[0].nodeValue)},e.announceError=t=>{if("undefined"===typeof e.vastOptions.errorUrl||!e.vastOptions.errorUrl)return;const o="undefined"!==typeof t?parseInt(t):900,n=e.vastOptions.errorUrl.replace("[ERRORCODE]",o);e.callUris([n])},e.getClickTrackingEvents=t=>{const o=[],n=t.getElementsByTagName("VideoClicks");if(!n.length)return;const i=n[0].getElementsByTagName("ClickTracking");if(i.length){for(let t=0;t<i.length;t++){const n=e.extractNodeData(i[t]);o.push(n)}return o}},e.getNonLinearClickTrackingEvents=t=>{const o=[],n=t.getElementsByTagName("NonLinear");if(!n.length)return;const i=t.getElementsByTagName("NonLinearClickTracking");if(i.length){for(let t=0;t<i.length;t++){const n=e.extractNodeData(i[t]);o.push(n)}return o}},e.callUris=e=>{for(let t=0;t<e.length;t++)(new Image).src=e[t]},e.recalculateAdDimensions=()=>{const t=document.getElementById(e.videoPlayerId),o=document.getElementById("vast_clickthrough_layer_"+e.videoPlayerId);o&&(o.style.width=t.offsetWidth+"px",o.style.height=t.offsetHeight+"px");const n=e.checkFullscreenSupport("fluid_video_wrapper_"+e.videoPlayerId),i=document.getElementById(e.videoPlayerId+"_fluid_control_fullscreen"),a=document.getElementById(e.videoPlayerId+"context_option_fullscreen");if(n)null===document[n.isFullscreen]?e.fullscreenOff(i,a):e.fullscreenOn(i,a);else{const t=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId);-1!==t.className.search(/\bpseudo_fullscreen\b/g)?(t.className+=" pseudo_fullscreen",e.fullscreenOn(i,a)):(t.className=t.className.replace(/\bpseudo_fullscreen\b/g,""),e.fullscreenOff(i,a))}},e.prepareVast=t=>{let o=e.findRoll(t);for(let n=0;n<o.length;n++){const i=o[n];!0!==e.adList[i].vastLoaded&&!0!==e.adList[i].error&&(e.processVastWithRetries(e.adList[i]),e.domRef.player.addEventListener("adId_"+i,e[t]))}},e.playMainVideoWhenVastFails=t=>{e.debugMessage("playMainVideoWhenVastFails called"),e.domRef.player.removeEventListener("loadedmetadata",e.switchPlayerToVastMode),e.domRef.player.pause(),e.toggleLoader(!1),e.displayOptions.vastOptions.vastAdvanced.noVastVideoCallback(),e.vastOptions&&"undefined"!==typeof e.vastOptions.errorUrl?e.announceError(t):e.announceLocalError(t),e.switchToMainVideo()},e.switchPlayerToVastMode=()=>{},e.processVastXml=(t,o,n)=>{let i;if(!t)return void n(!1);const a=t.getElementsByTagName("Impression");null!==a&&e.registerImpressionEvents(a,o);const r=t.getElementsByTagName("Error");null!==r&&e.registerErrorEvents(r,o);const s=t.getElementsByTagName("Creative");if("undefined"!==typeof s&&s.length){const a=s[0].getElementsByTagName("Linear");if("undefined"!==typeof a&&null!==a&&a.length){const n=a[0];e.registerTrackingEvents(n,o),i=e.getClickTrackingEvents(n),e.registerClickTracking(i,o),!e.hasVastAdTagUri(t)&&e.hasInLine(t)&&(o.adFinished=!1,o.adType="linear",o.vpaid=!1,o.skipoffset=e.convertTimeStringToSeconds(n.getAttribute("skipoffset")),o.clickthroughUrl=e.getClickThroughUrlFromLinear(n),o.duration=e.getDurationFromLinear(n),o.mediaFileList=e.getMediaFileListFromLinear(n),o.adParameters=e.getAdParametersFromLinear(n),o.iconClick=e.getIconClickThroughFromLinear(n),o.adParameters&&(o.vpaid=!0))}const r=s[0].getElementsByTagName("NonLinearAds");if("undefined"!==typeof r&&null!==r&&r.length){const n=r[0];e.registerTrackingEvents(n,o),i=e.getNonLinearClickTrackingEvents(n),e.registerClickTracking(i,o),!e.hasVastAdTagUri(t)&&e.hasInLine(t)&&(o.adType="nonLinear",o.vpaid=!1,o.clickthroughUrl=e.getClickThroughUrlFromNonLinear(n),o.duration=e.getDurationFromNonLinear(n),o.dimension=e.getDimensionFromNonLinear(n),o.staticResource=e.getStaticResourceFromNonLinear(n),o.creativeType=e.getCreativeTypeFromStaticResources(n),o.adParameters=e.getAdParametersFromLinear(n),o.adParameters&&(o.vpaid=!0))}!e.hasVastAdTagUri(t)&&e.hasInLine(t)&&("undefined"!==typeof o.mediaFileList||"undefined"!==typeof o.staticResource?n(!0,o):n(!1))}else n(!1)},e.processVastWithRetries=t=>{let o=t.vastTag;const n=t.id,i=function(a,r){if(a&&"undefined"!==typeof r&&r.vpaid&&!e.displayOptions.vastOptions.allowVPAID&&(a=!1,e.announceLocalError("103","VPAID not allowed, so skipping this VAST tag.")),a){if("linear"===r.adType){"undefined"!==typeof r.iconClick&&null!==r.iconClick&&r.iconClick.length&&(e.adList[n].landingPage=r.iconClick);const t=e.getSupportedMediaFileObject(r.mediaFileList);t&&(e.adList[n].mediaType=t.mediaType)}e.adList[n].adType=r.adType?r.adType:"unknown",e.adList[n].vastLoaded=!0,e.adPool[n]=Object.assign({},r);const t=document.createEvent("Event");if(t.initEvent("adId_"+n,!1,!0),e.domRef.player.dispatchEvent(t),e.displayOptions.vastOptions.vastAdvanced.vastLoadedCallback(),e.hasTitle()){const t=document.getElementById(e.videoPlayerId+"_title");t.style.display="none"}}else e.announceLocalError("101"),t.hasOwnProperty("fallbackVastTags")&&t.fallbackVastTags.length>0?(o=t.fallbackVastTags.shift(),e.processUrl(o,i)):("preRoll"===t.roll&&e.preRollFail(t),e.adList[n].error=!0)};e.processUrl(o,i)},e.processUrl=(t,o)=>{const n=0,i={tracking:[],stopTracking:[],impression:[],clicktracking:[],vastLoaded:!1};e.resolveVastTag(t,n,i,o)},e.resolveVastTag=(t,o,n,i)=>{if(!t||""===t)return void i(!1);const a=function(){const t=this;let a=!1;if(4!==t.readyState||404!==t.status)if(4!==t.readyState||0!==t.status){if(4===t.readyState&&200===t.status)if(4!==t.readyState||200===t.status){try{a=t.responseXML}catch(r){return void i(!1)}if(a){if(e.inLineFound=e.hasInLine(a),!e.inLineFound&&e.hasVastAdTagUri(a)){const t=e.getVastAdTagUriFromWrapper(a);if(!t)return void i(!1);e.resolveVastTag(t,o,n,i)}o>e.displayOptions.vastOptions.maxAllowedVastTagRedirects&&!e.inLineFound?i(!1):e.processVastXml(a,n,i)}else i(!1)}else i(!1)}else i(!1);else i(!1)};o<=e.displayOptions.vastOptions.maxAllowedVastTagRedirects&&e.sendRequest(t,!0,e.displayOptions.vastOptions.vastTimeout,a),o++},e.setVastList=()=>{const t={},o={preRoll:[],postRoll:[],midRoll:[],onPauseRoll:[]},n={id:null,roll:null,played:!1,vastLoaded:!1,error:!1,adText:null,adTextPosition:null};let i=0;const a=function(e){let t=!1;return"midRoll"===e.roll&&"undefined"===typeof e.timer&&(t=!0),t},r=function(t){let o=!1;return t.vastTag||(e.announceLocalError(102,'"vastTag" property is missing from adList.'),o=!0),t.roll||(e.announceLocalError(102,'"roll" is missing from adList.'),o=!0),-1===e.availableRolls.indexOf(t.roll)&&(e.announceLocalError(102,"Only "+e.availableRolls.join(",")+" rolls are supported."),o=!0),t.size&&-1===e.supportedNonLinearAd.indexOf(t.size)&&(e.announceLocalError(102,"Only "+e.supportedNonLinearAd.join(",")+" size are supported."),o=!0),o};if(e.displayOptions.vastOptions.hasOwnProperty("adList"))for(let s in e.displayOptions.vastOptions.adList){let o=e.displayOptions.vastOptions.adList[s];if(r(o)){e.announceLocalError(102,"Wrong adList parameters.");continue}const l="ID"+i;t[l]=Object.assign({},n),t[l]=Object.assign(t[l],e.displayOptions.vastOptions.adList[s]),"midRoll"==o.roll&&(t[l].error=a("midRoll",o)),t[l].id=l,i++}Object.keys(t).map((function(e){t[e].roll.toLowerCase()==="preRoll".toLowerCase()?o.preRoll.push(t[e]):t[e].roll.toLowerCase()==="midRoll".toLowerCase()?o.midRoll.push(t[e]):t[e].roll.toLowerCase()==="postRoll".toLowerCase()?o.postRoll.push(t[e]):t[e].roll.toLowerCase()==="onPauseRoll".toLowerCase()&&o.onPauseRoll.push(t[e])})),e.adGroupedByRolls=o,e.adList=t},e.onVastAdEnded=t=>{t&&t.stopImmediatePropagation(),e.deleteVastAdElements(),e.checkForNextAd()},e.vastLogoBehaviour=t=>{if(!e.displayOptions.layoutControls.logo.showOverAds){const o=document.getElementById(e.videoPlayerId+"_logo"),n=document.getElementById(e.videoPlayerId+"_logo_image");if(!o||!n)return;o.style.display=t?"none":"inline"}},e.deleteVastAdElements=()=>{e.removeClickthrough(),e.removeSkipButton(),e.removeAdCountdown(),e.removeAdPlayingText(),e.removeCTAButton(),e.vastLogoBehaviour(!1)}},a=function(e,t){e.createCardboardJoystickButton=t=>{const o=document.getElementById(e.videoPlayerId+"_fluid_vr_joystick_panel"),n=document.createElement("div");return n.id=e.videoPlayerId+"_fluid_vr_joystick_"+t,n.className="fluid_vr_button fluid_vr_joystick_"+t,o.appendChild(n),n},e.cardboardRotateLeftRight=t=>{const o=e.vrROTATION_POSITION,n=-e.vrROTATION_POSITION,i=t<1?o:n,a={val:i};new TWEEN.Tween(a).to({val:0},e.vrROTATION_SPEED).easing(TWEEN.Easing.Quadratic.InOut).onUpdate((function(){e.vrViewer.OrbitControls.rotateLeft(a.val)})).start()},e.cardboardRotateUpDown=t=>{const o=e.vrROTATION_POSITION,n=-e.vrROTATION_POSITION,i=t<1?o:n,a={val:i};new TWEEN.Tween(a).to({val:0},e.vrROTATION_SPEED).easing(TWEEN.Easing.Quadratic.InOut).onUpdate((function(){e.vrViewer.OrbitControls.rotateUp(a.val)})).start()},e.createCardboardJoystick=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_vr_container"),o=document.createElement("div");o.id=e.videoPlayerId+"_fluid_vr_joystick_panel",o.className="fluid_vr_joystick_panel",t.appendChild(o);const n=e.createCardboardJoystickButton("up"),i=e.createCardboardJoystickButton("left"),a=e.createCardboardJoystickButton("right"),r=e.createCardboardJoystickButton("down"),s=e.createCardboardJoystickButton("zoomdefault"),l=e.createCardboardJoystickButton("zoomin"),d=e.createCardboardJoystickButton("zoomout");n.addEventListener("click",(function(){e.cardboardRotateUpDown(1)})),r.addEventListener("click",(function(){e.cardboardRotateUpDown(0)})),a.addEventListener("click",(function(){e.cardboardRotateLeftRight(0)})),i.addEventListener("click",(function(){e.cardboardRotateLeftRight(1)})),s.addEventListener("click",(function(){e.vrViewer.camera.fov=60,e.vrViewer.camera.updateProjectionMatrix()})),d.addEventListener("click",(function(){e.vrViewer.camera.fov*=1.1,e.vrViewer.camera.updateProjectionMatrix()})),l.addEventListener("click",(function(){e.vrViewer.camera.fov*=.9,e.vrViewer.camera.updateProjectionMatrix()}))},e.cardBoardResize=()=>{e.domRef.player.addEventListener("theatreModeOn",(function(){e.vrViewer.onWindowResize()})),e.domRef.player.addEventListener("theatreModeOff",(function(){e.vrViewer.onWindowResize()}))},e.cardBoardSwitchToNormal=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_vr_joystick_panel"),o=document.getElementById(e.videoPlayerId+"_fluid_controls_container"),n=e.domRef.player;e.vrViewer.enableEffect(PANOLENS.MODES.NORMAL),e.vrViewer.onWindowResize(),e.vrMode=!1;const i=n.parentNode.getElementsByClassName("fluid_vr2_controls_container")[0];n.parentNode.removeChild(i),e.displayOptions.layoutControls.showCardBoardJoystick&&t&&(t.style.display="block"),o.classList.remove("fluid_vr_controls_container");const a=document.getElementById(e.videoPlayerId+"_fluid_control_volume_container");a.style.display="block";const r=document.getElementById("ad_countdown"+e.videoPlayerId),s=document.getElementById(e.videoPlayerId+"_fluid_cta"),l=document.getElementById(e.videoPlayerId+"_fluid_ad_playing"),d=document.getElementById("skip_button_"+e.videoPlayerId);r&&(r.style.display="block"),s&&(s.style.display="block"),l&&(l.style.display="block"),d&&(d.style.display="block")},e.cardBoardHideDefaultControls=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_vr_joystick_panel"),o=document.getElementById(e.videoPlayerId+"_fluid_initial_play"),n=document.getElementById(e.videoPlayerId+"_fluid_control_volume_container");e.displayOptions.layoutControls.showCardBoardJoystick&&t&&(t.style.display="none"),o&&(document.getElementById(e.videoPlayerId+"_fluid_initial_play").style.display="none",document.getElementById(e.videoPlayerId+"_fluid_initial_play_button").style.opacity="1"),n.style.display="none"},e.cardBoardCreateVRControls=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_controls_container"),o=t.cloneNode(!0);o.removeAttribute("id"),o.querySelectorAll("*").forEach((function(e){e.removeAttribute("id")})),o.classList.add("fluid_vr2_controls_container"),e.domRef.player.parentNode.insertBefore(o,e.domRef.player.nextSibling),e.copyEvents(o)},e.cardBoardSwitchToVR=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_controls_container");e.vrViewer.enableEffect(PANOLENS.MODES.CARDBOARD),e.vrViewer.onWindowResize(),e.vrViewer.disableReticleControl(),e.vrMode=!0,t.classList.add("fluid_vr_controls_container"),e.cardBoardHideDefaultControls(),e.cardBoardCreateVRControls();const o=document.getElementById("ad_countdown"+e.videoPlayerId),n=document.getElementById(e.videoPlayerId+"_fluid_cta"),i=document.getElementById(e.videoPlayerId+"_fluid_ad_playing"),a=document.getElementById("skip_button_"+e.videoPlayerId);o&&(o.style.display="none"),n&&(n.style.display="none"),i&&(i.style.display="none"),a&&(a.style.display="none")},e.cardBoardMoveTimeInfo=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_control_duration"),o=document.getElementById(e.videoPlayerId+"_fluid_controls_container");t.classList.add("cardboard_time"),o.appendChild(t),e.controlDurationUpdate=function(){const t=e.formatTime(e.domRef.player.currentTime),o=e.formatTime(e.currentVideoDuration),n=e.domRef.player.parentNode.getElementsByClassName("fluid_control_duration");let i="";if(e.isCurrentlyPlayingAd){i="<span class='ad_timer_prefix'>AD : </span>"+t+" / "+o;for(let e=0;e<n.length;e++)n[e].classList.add("ad_timer_prefix")}else{i=t+" / "+o;for(let e=0;e<n.length;e++)n[e].classList.remove("ad_timer_prefix")}for(let e=0;e<n.length;e++)n[e].innerHTML=i}},e.cardBoardAlterDefaultControls=()=>{e.cardBoardMoveTimeInfo()},e.createCardboardView=()=>{const t=document.createElement("div");t.id=e.videoPlayerId+"_fluid_vr_container",t.className="fluid_vr_container",e.domRef.player.parentNode.insertBefore(t,e.domRef.player.nextSibling),PANOLENS.VideoPanorama.prototype.pauseVideo=function(){},PANOLENS.VideoPanorama.prototype.playVideo=function(){},e.vrPanorama=new PANOLENS.VideoPanorama("",{videoElement:e.domRef.player,autoplay:e.displayOptions.layoutControls.autoPlay,loop:!!e.displayOptions.layoutControls.loop}),e.vrViewer=new PANOLENS.Viewer({container:t,controlBar:!0,controlButtons:[],enableReticle:!1}),e.vrViewer.add(e.vrPanorama),e.vrViewer.enableEffect(PANOLENS.MODES.NORMAL),e.vrViewer.onWindowResize(),"Android"!==e.getMobileOs().userOs&&"iOS"!==e.getMobileOs().userOs||e.vrViewer.enableControl(1),e.cardBoardAlterDefaultControls(),e.cardBoardResize(),e.vrViewer.initialCameraPosition=JSON.parse(JSON.stringify(e.vrViewer.camera.position)),e.displayOptions.layoutControls.showCardBoardJoystick&&("Android"!==e.getMobileOs().userOs&&"iOS"!==e.getMobileOs().userOs&&e.createCardboardJoystick(),e.vrViewer.OrbitControls.noZoom=!0),e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_cardboard",(function(){e.vrMode?e.cardBoardSwitchToNormal():e.cardBoardSwitchToVR()}))},e.createCardboard=()=>{e.displayOptions.layoutControls.showCardBoardView&&(document.getElementById(e.videoPlayerId+"_fluid_control_cardboard").style.display="inline-block",window.PANOLENS?e.createCardboardView():o.e("panolens").then(o.bind(null,"61f6")).then(t=>{window.PANOLENS=t,e.createCardboardView()}))}},r=function(e,t){e.subtitleFetchParse=t=>{e.sendRequest(t.url,!0,e.displayOptions.vastOptions.vastTimeout,(function(){const t=this;if(4===t.readyState&&200!==t.status)return;if(4!==t.readyState||200!==t.status)return;const o=t.responseText,n=new WebVTT.Parser(window,WebVTT.StringDecoder()),i=[],a=[];n.oncue=function(e){i.push(e)},n.onregion=function(e){a.push(e)},n.parse(o),n.flush(),e.subtitlesData=i}))},e.createSubtitlesSwitch=()=>{const t="OFF";if(e.subtitlesData=[],!e.displayOptions.layoutControls.subtitlesEnabled)return void(document.getElementById(e.videoPlayerId+"_fluid_control_subtitles").style.display="none");const o=[];o.push({label:t,url:"na",lang:t});const n=e.domRef.player.querySelectorAll("track");[].forEach.call(n,(function(e){"metadata"===e.kind&&e.src&&o.push({label:e.label,url:e.src,lang:e.srclang})})),e.subtitlesTracks=o;const i=document.getElementById(e.videoPlayerId+"_fluid_control_subtitles");i.style.display="inline-block";let a=!1;const r=document.createElement("div");r.id=e.videoPlayerId+"_fluid_control_subtitles_list",r.className="fluid_subtitles_list",r.style.display="none";let s=!0;e.subtitlesTracks.forEach((function(o){const n=s?"subtitle_selected":"";s=!1;const i=document.createElement("div");i.id="subtitle_"+e.videoPlayerId+"_"+o.label,i.className="fluid_subtitle_list_item",i.innerHTML='<span class="subtitle_button_icon '+n+'"></span>'+o.label,i.addEventListener("click",(function(o){o.stopPropagation();const n=this,i=document.getElementsByClassName("subtitle_button_icon");for(let e=0;e<i.length;e++)i[e].className=i[e].className.replace("subtitle_selected","");n.firstChild.className+=" subtitle_selected",e.subtitlesTracks.forEach((function(o){o.label===n.innerText.replace(/(\r\n\t|\n|\r\t)/gm,"")&&(o.label===t?e.subtitlesData=[]:e.subtitleFetchParse(o))})),e.openCloseSubtitlesSwitch()})),r.appendChild(i),a=!0})),a?(i.appendChild(r),i.addEventListener("click",(function(){e.openCloseSubtitlesSwitch()}))):document.getElementById(e.videoPlayerId+"_fluid_control_subtitles").style.display="none";const l=function(){e.renderSubtitles()};e.domRef.player.addEventListener("timeupdate",l)},e.renderSubtitles=()=>{const t=e.domRef.player;let o=Math.floor(t.currentTime),n=!1,i=document.getElementById(e.videoPlayerId+"_fluid_subtitles_container");if(e.isCurrentlyPlayingAd)i.innerHTML="";else{for(let t=0;t<e.subtitlesData.length;t++)o>=e.subtitlesData[t].startTime&&o<=e.subtitlesData[t].endTime&&(i.innerHTML="",i.appendChild(WebVTT.convertCueToDOMTree(window,e.subtitlesData[t].text)),n=!0);n||(i.innerHTML="")}},e.openCloseSubtitlesSwitch=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_control_subtitles_list");if(e.isCurrentlyPlayingAd)t.style.display="none";else if("none"===t.style.display){t.style.display="block";const e=function(o){t.removeEventListener("mouseleave",e),t.style.display="none"};t.addEventListener("mouseleave",e)}else t.style.display="none"},e.createSubtitles=()=>{const t=document.createElement("div");t.id=e.videoPlayerId+"_fluid_subtitles_container",t.className="fluid_subtitles_container",e.domRef.player.parentNode.insertBefore(t,e.domRef.player.nextSibling),e.displayOptions.layoutControls.subtitlesEnabled&&o.e("vttjs").then(o.t.bind(null,"51a6",7)).then(t=>{window.WebVTT=t.WebVTT,e.createSubtitlesSwitch()})}},s=function(e,t){e.setupThumbnailPreviewVtt=()=>{e.sendRequest(e.displayOptions.layoutControls.timelinePreview.file,!0,e.displayOptions.vastOptions.vastTimeout,(function(){const t=function(t){if("undefined"===typeof t.cues||!t.cues.length)return[];const o=[];let n=null,i=null;for(let a=0;a<t.cues.length;a++){n=t.cues[a].text.split("#");let r,s=0,l=0,d=122.5,c=69;2===n.length&&0===n[1].indexOf("xywh=")&&(i=n[1].substring(5),i=i.split(","),4===i.length&&(e.displayOptions.layoutControls.timelinePreview.spriteImage=!0,s=parseInt(i[0]),l=parseInt(i[1]),d=parseInt(i[2]),c=parseInt(i[3]))),!e.displayOptions.layoutControls.timelinePreview.spriteRelativePath||-1===e.displayOptions.layoutControls.timelinePreview.file.indexOf("/")||"undefined"!==typeof e.displayOptions.layoutControls.timelinePreview.sprite&&""!==e.displayOptions.layoutControls.timelinePreview.sprite?r=e.displayOptions.layoutControls.timelinePreview.sprite?e.displayOptions.layoutControls.timelinePreview.sprite:n[0]:(r=e.displayOptions.layoutControls.timelinePreview.file.substring(0,e.displayOptions.layoutControls.timelinePreview.file.lastIndexOf("/")),r+="/"+n[0]),o.push({startTime:t.cues[a].startTime,endTime:t.cues[a].endTime,image:r,x:s,y:l,w:d,h:c})}return o},o=this;if(4===o.readyState&&200!==o.status)return;if(4!==o.readyState||200!==o.status)return;const n=o.responseText,i=new window.WebVTTParser,a=i.parse(n);e.timelinePreviewData=t(a)}))},e.generateTimelinePreviewTags=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container"),o=document.createElement("div");o.id=e.videoPlayerId+"_fluid_timeline_preview_container",o.className="fluid_timeline_preview_container",o.style.display="none",o.style.position="absolute",t.appendChild(o);const n=document.createElement("div");n.id=e.videoPlayerId+"_fluid_timeline_preview_container_shadow",n.className="fluid_timeline_preview_container_shadow",n.style.position="absolute",n.style.display="none",n.style.opacity=1,t.appendChild(n)},e.getThumbnailCoordinates=t=>{if(e.timelinePreviewData.length)for(let o=0;o<e.timelinePreviewData.length;o++)if(t>=e.timelinePreviewData[o].startTime&&t<=e.timelinePreviewData[o].endTime)return e.timelinePreviewData[o];return!1},e.drawTimelinePreview=t=>{const o=document.getElementById(e.videoPlayerId+"_fluid_timeline_preview_container"),n=document.getElementById(e.videoPlayerId+"_fluid_timeline_preview_container_shadow"),i=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container"),a=i.clientWidth;if(e.isCurrentlyPlayingAd)return void("none"!==o.style.display&&(o.style.display="none"));const r=e.getEventOffsetX(t,i);let s=null;if(a){s=e.currentVideoDuration*r/a;const t=e.getThumbnailCoordinates(s);n.style.width=a+"px",n.style.display="block",!1!==t?(o.style.width=t.w+"px",o.style.height=t.h+"px",n.style.height=t.h+"px",o.style.background="url("+t.image+") no-repeat scroll -"+t.x+"px -"+t.y+"px",o.style.left=r-t.w/2+"px",o.style.display="block",e.displayOptions.layoutControls.timelinePreview.spriteImage||(o.style.backgroundSize="contain")):o.style.display="none"}},e.setupThumbnailPreview=()=>{let t=e.displayOptions.layoutControls.timelinePreview;if(!t||!t.type)return;let n="mousemove",i="mouseleave";if(e.mobileInfo.userOs&&(n="touchmove",i="touchend"),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener(n,e.drawTimelinePreview.bind(e),!1),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener(i,(function(t){const o=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container");"undefined"!==typeof t.clientX&&o.contains(document.elementFromPoint(t.clientX,t.clientY))||(document.getElementById(e.videoPlayerId+"_fluid_timeline_preview_container").style.display="none",document.getElementById(e.videoPlayerId+"_fluid_timeline_preview_container_shadow").style.display="none")}),!1),e.generateTimelinePreviewTags(),"VTT"===t.type&&"string"===typeof t.file)o.e("webvtt").then(o.bind(null,"b606")).then(t=>{window.WebVTTParser=t.default,e.setupThumbnailPreviewVtt()});else{if("static"!==t.type||"object"!==typeof t.frames)throw"Invalid thumbnail-preview - type must be VTT or static";t.spriteImage=!0,e.timelinePreviewData=t.frames}e.showTimeOnHover=!1}},l=function(e,t){const o="2.0";e.renderLinearAd=(t,n)=>{e.toggleLoader(!0),e.vastOptions=e.adPool[t],n&&e.backupMainVideoContentTime(t);const i=t=>{e.switchPlayerToVpaidMode=t=>{e.debugMessage("starting function switchPlayerToVpaidMode");const n=e.videoPlayerId+"_"+t+"_fluid_vpaid_iframe",i={};i.AdParameters=e.adPool[t].adParameters;const a=document.createElement("div");a.id=e.videoPlayerId+"_fluid_vpaid_slot",a.className="fluid_vpaid_slot",a.setAttribute("adListId",t),e.domRef.player.parentNode.insertBefore(a,n.nextSibling);const r={slot:a,videoSlot:e.domRef.player,videoSlotCanAutoPlay:!0},s=e.vpaidAdUnit.handshakeVersion(o),l=e.compareVersion(o,s);if(1===l)return e.adList[t].error=!0,e.playMainVideoWhenVpaidFails(403),!1;!1!==e.vastOptions.skipoffset&&e.addSkipButton(),e.domRef.player.loop=!1,e.domRef.player.removeAttribute("controls"),e.vpaidCallbackListenersAttach();const d=e.fullscreenMode?"fullscreen":"normal",c=e.domRef.player.offsetWidth,u=e.domRef.player.offsetHeight;e.vpaidAdUnit.initAd(c,u,d,3e3,i,r);const p=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let o=0;o<p.length;o++)p[o].style.backgroundColor=e.displayOptions.layoutControls.adProgressColor;e.toggleLoader(!1),e.adList[t].played=!0,e.adFinished=!1},e.switchPlayerToVastMode=()=>{if(e.vastOptions.duration||(e.vastOptions.duration=e.domRef.player.duration),e.displayOptions.layoutControls.showCardBoardView)e.adList[t].landingPage?e.addCTAButton(e.adList[t].landingPage):e.addCTAButton(e.adPool[t].clickthroughUrl);else{const o="undefined"!=typeof e.adList[t].adClickable?e.adList[t].adClickable:e.displayOptions.vastOptions.adClickable;o&&e.addClickthroughLayer(e.videoPlayerId),e.addCTAButton(e.adList[t].landingPage)}!1!==e.vastOptions.skipoffset&&e.addSkipButton(),e.domRef.player.loop=!1,e.addAdCountdown(),e.domRef.player.removeAttribute("controls"),e.vastLogoBehaviour(!0);const o=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let t=0;t<o.length;t++)o[t].style.backgroundColor=e.displayOptions.layoutControls.adProgressColor;if(e.displayOptions.vastOptions.adText||e.adList[t].adText){const o=null!==e.adList[t].adText?e.adList[t].adText:e.displayOptions.vastOptions.adText;e.addAdPlayingText(o)}if(e.positionTextElements(e.adList[t]),e.toggleLoader(!1),e.adList[t].played=!0,e.adFinished=!1,e.domRef.player.play(),e.trackSingleEvent("impression"),e.domRef.player.removeEventListener("loadedmetadata",e.switchPlayerToVastMode),e.vrMode){const t=document.getElementById("ad_countdown"+e.videoPlayerId),o=document.getElementById(e.videoPlayerId+"_fluid_cta"),n=document.getElementById(e.videoPlayerId+"_fluid_ad_playing"),i=document.getElementById("skip_button_"+e.videoPlayerId);t&&(t.style.display="none"),o&&(o.style.display="none"),n&&(n.style.display="none"),i&&(i.style.display="none")}},e.domRef.player.pause(),e.detachStreamers();const n=e.getSupportedMediaFileObject(e.vastOptions.mediaFileList);if(e.displayOptions.layoutControls.showCardBoardView&&"360"!==e.adList[t].mediaType)return e.adList[t].error=!0,e.playMainVideoWhenVastFails(403),!1;const i=e.vastOptions.vpaid;if(i)e.loadVpaid(t,n.src),e.displayOptions.vastOptions.showProgressbarMarkers&&e.hideAdMarkers();else{if(!1===n.src)return e.adList[t].error=!0,e.playMainVideoWhenVastFails(403),!1;e.domRef.player.addEventListener("loadedmetadata",e.switchPlayerToVastMode),e.domRef.player.src=n.src,e.isCurrentlyPlayingAd=!0,e.displayOptions.vastOptions.showProgressbarMarkers&&e.hideAdMarkers(),e.domRef.player.load(),e.domRef.player.addEventListener("ended",e.onVastAdEnded)}},a=()=>{if(e.adFinished)return void e.domRef.player.removeEventListener("timeupdate",a);const t=Math.floor(e.domRef.player.currentTime);0!==e.vastOptions.duration&&e.scheduleTrackingEvent(t,e.vastOptions.duration),t>=e.vastOptions.duration-1&&0!==e.vastOptions.duration&&(e.domRef.player.removeEventListener("timeupdate",a),e.adFinished=!0)};i(t),e.domRef.player.addEventListener("timeupdate",a)},e.playRoll=t=>{for(let n=0;n<t.length;n++){if(!e.adPool.hasOwnProperty(t[n]))return void e.announceLocalError(101);e.temporaryAdPods.push(e.adList[t[n]])}if(null!==e.vastOptions&&"linear"===e.vastOptions.adType.toLowerCase())return;const o=e.getNextAdPod();null!==o&&e.renderLinearAd(o,!0)},e.backupMainVideoContentTime=t=>{const o=e.adList[t].roll;switch(o){case"midRoll":e.domRef.player.mainVideoCurrentTime=e.domRef.player.currentTime-1;break;case"postRoll":e.domRef.player.mainVideoCurrentTime=e.mainVideoDuration,e.autoplayAfterAd=!1,e.domRef.player.currentTime=e.mainVideoDuration;break;case"preRoll":e.domRef.player.currentTime>0&&(e.domRef.player.mainVideoCurrentTime=e.domRef.player.currentTime-1);break}},e.getSupportedMediaFileObject=t=>{let o=null,n=!1;if(t.length)for(let i=0;i<t.length;i++){if("VPAID"===t[i].apiFramework){o=t[i],n=!0;break}{const a=e.getMediaFileTypeSupportLevel(t[i]["type"]);if("maybe"!==a&&"probably"!==a||(o=t[i],n=!0),"probably"===a)break}}return!1!==n&&o},e.getMediaFileTypeSupportLevel=e=>{if(null===e)return null;const t=document.createElement("video");let o=t.canPlayType(e);return o||"no"},e.scheduleTrackingEvent=(t,o)=>{0===t&&e.trackSingleEvent("start"),"undefined"!==typeof e.vastOptions.tracking["progress"]&&e.vastOptions.tracking["progress"].length&&"undefined"!==typeof e.vastOptions.tracking["progress"][t]&&e.trackSingleEvent("progress",t),t===Math.floor(o/4)&&e.trackSingleEvent("firstQuartile"),t===Math.floor(o/2)&&e.trackSingleEvent("midpoint"),t===Math.floor(3*o/4)&&e.trackSingleEvent("thirdQuartile"),t>=o-1&&e.trackSingleEvent("complete")},e.trackSingleEvent=(t,o)=>{if("undefined"===typeof e.vastOptions||null===e.vastOptions)return;let n=[];switch(n.length=0,t){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":!1===e.vastOptions.stopTracking[t]&&(null!==e.vastOptions.tracking[t]&&(n=e.vastOptions.tracking[t]),e.vastOptions.stopTracking[t]=!0);break;case"progress":e.vastOptions.tracking["progress"][o].elements.forEach((function(t,i){!1===e.vastOptions.tracking["progress"][o].stopTracking&&e.vastOptions.tracking["progress"][o].elements.length&&(n=e.vastOptions.tracking["progress"][o].elements),e.vastOptions.tracking["progress"][o].stopTracking=!0}));break;case"impression":"undefined"!==typeof e.vastOptions.impression&&null!==e.vastOptions.impression&&"undefined"!==typeof e.vastOptions.impression.length&&(n=e.vastOptions.impression);break;default:break}e.callUris(n)},e.completeNonLinearStatic=t=>{e.closeNonLinear(t),!1===e.adFinished&&(e.adFinished=!0,e.trackSingleEvent("complete")),clearInterval(e.nonLinearTracking)},e.createNonLinearStatic=t=>{if(!e.adPool.hasOwnProperty(t)||!0===e.adPool[t].error)return void e.announceLocalError(101);if(e.vastOptions=e.adPool[t],e.createBoard(t),!0===e.adList[t].error)return;let o;e.adFinished=!1,e.vastOptions.vpaid||(e.trackSingleEvent("start"),o=e.adList[t].nonLinearDuration?e.adList[t].nonLinearDuration:e.vastOptions.duration,e.nonLinearTracking=setInterval((function(){if(!0===e.adFinished)return;const t=Math.floor(e.domRef.player.currentTime);e.scheduleTrackingEvent(t,o),t>=o-1&&(e.adFinished=!0)}),400));const n=parseInt(e.getCurrentTime())+parseInt(o);e.scheduleTask({time:n,closeStaticAd:t})},e.createVpaidNonLinearBoard=t=>{const n=e.adPool[t];e.loadVpaidNonlinearAssets=function(t){e.debugMessage("starting function switchPlayerToVpaidMode");const i=e.adList[t].vAlign?e.adList[t].vAlign:e.nonLinearVerticalAlign,a=e.adList[t].vpaidNonLinearCloseButton?e.adList[t].vpaidNonLinearCloseButton:e.vpaidNonLinearCloseButton,r=e.videoPlayerId+"_"+t+"_fluid_vpaid_iframe",s={};s.AdParameters=e.adPool[t].adParameters;const l=document.createElement("div");l.id="fluid_vpaidNonLinear_"+t,l.className="fluid_vpaidNonLinear_"+i,l.className+=" fluid_vpaidNonLinear_ad",l.setAttribute("adListId",t);let d,c=Math.min(468,e.domRef.player.offsetWidth),u=Math.min(60,Math.floor(e.domRef.player.offsetHeight/4));if("undefined"!==typeof e.adList[t].size){const o=e.adList[t].size.split("x");c=o[0],u=o[1]}else n.dimension.width&&n.dimension.height&&(c=n.dimension.width,u=n.dimension.height);if(l.style.width="100%",l.style.height=u+"px",a){const o=document.createElement("div");o.className="fluid_vpaidNonLinear_frame",o.style.width=c+"px",o.style.height=u+"px",l.appendChild(o);const n=document.createElement("div");n.id="close_button_"+e.videoPlayerId,n.className="close_button",n.innerHTML="",n.title=e.displayOptions.layoutControls.closeButtonCaption;const i=t;n.onclick=function(t){if(e.hardStopVpaidAd(""),"undefined"!==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation(),e.adFinished=!0,"onPauseRoll"===e.adList[i].roll&&e.onPauseRollAdPods[0]){const t=e.onPauseRollAdPods[0];e.createBoard(t),e.currentOnPauseRollAd=e.onPauseRollAdPods[0],delete e.onPauseRollAdPods[0]}return!1},o.appendChild(n)}const p=document.createElement("iframe");p.id=e.videoPlayerId+"non_linear_vapid_slot_iframe",p.className="fluid_vpaid_nonlinear_slot_iframe",p.setAttribute("width",c+"px"),p.setAttribute("height",u+"px"),p.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"),p.setAttribute("frameborder","0"),p.setAttribute("scrolling","no"),p.setAttribute("marginwidth","0"),p.setAttribute("marginheight","0"),l.appendChild(p),e.domRef.player.parentNode.insertBefore(l,r.nextSibling);const m=p.contentWindow.document.createElement("div");p.contentWindow.document.body.appendChild(m),e.vastOptions.slotIframe=p,e.vastOptions.slotFrame=d;const f={slot:m,videoSlot:e.domRef.player,videoSlotCanAutoPlay:!0};e.debugMessage(e.adList[t]);const y=e.vpaidAdUnit.handshakeVersion(o),g=e.compareVersion(o,y);if(1===g)return e.adList[t].error=!0,e.playMainVideoWhenVpaidFails(403),!1;e.domRef.player.loop=!1,e.domRef.player.removeAttribute("controls"),e.vpaidCallbackListenersAttach();const v=e.fullscreenMode?"fullscreen":"normal";e.vpaidAdUnit.initAd(c,u,v,3e3,s,f),e.toggleLoader(!1),e.adList[t].played=!0,e.adFinished=!1},e.loadVpaid(t,n.staticResource),e.debugMessage("create non linear vpaid")},e.createNonLinearBoard=t=>{const o=e.adPool[t];e.adList[t].played=!0;const n=e.domRef.player.clientWidth,i=(e.domRef.player.clientHeight,document.createElement("div")),a=e.adList[t].vAlign?e.adList[t].vAlign:e.nonLinearVerticalAlign,r=new Image;r.src=o.staticResource,r.id="fluid_nonLinear_imgCreative_"+t+"_"+e.videoPlayerId,r.onerror=function(){e.adList[t].error=!0,e.announceError(500)},r.onload=function(){let i,a,s,l;"undefined"!==typeof e.adList[t].size?(i=e.adList[t].size.split("x")[0],a=e.adList[t].size.split("x")[1]):o.dimension.width&&o.dimension.height?(i=o.dimension.width,a=o.dimension.height):(i=r.width,a=r.height),i>n?(s=n-5,l=a*s/i):(s=i,l=a),"onPauseRoll"!==e.adList[t].roll&&(document.getElementById("fluid_nonLinear_"+t).style.display="");const d=document.getElementById(r.id);d.width=s,d.height=l,e.trackSingleEvent("impression")},i.id="fluid_nonLinear_"+t,i.className="fluid_nonLinear_"+a,i.className+=" fluid_nonLinear_ad",i.innerHTML=r.outerHTML,i.style.display="none",i.onclick=function(){"undefined"!==typeof o.clickthroughUrl&&window.open(o.clickthroughUrl),"undefined"!==typeof o.clicktracking&&e.callUris([o.clicktracking])},"undefined"!==typeof o.clickthroughUrl&&(i.style.cursor="pointer");const s=document.createElement("div");s.id="close_button_"+e.videoPlayerId,s.className="close_button",s.innerHTML="",s.title=e.displayOptions.layoutControls.closeButtonCaption;const l=t;s.onclick=function(t){if(this.parentElement.remove(),"undefined"!==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation(),e.adFinished=!0,clearInterval(e.nonLinearTracking),"onPauseRoll"===e.adList[l].roll&&e.onPauseRollAdPods[0]){const t=e.onPauseRollAdPods[0];e.createBoard(t),e.currentOnPauseRollAd=e.onPauseRollAdPods[0],delete e.onPauseRollAdPods[0]}return!1},i.appendChild(s),e.domRef.player.parentNode.insertBefore(i,e.domRef.player.nextSibling)},e.createBoard=t=>{const o=e.adPool[t];if(o.vpaid)e.hardStopVpaidAd(""),e.createVpaidNonLinearBoard(t);else{if("undefined"===typeof o.staticResource||-1===e.supportedStaticTypes.indexOf(o.creativeType))return e.adList[t].error=!0,void(e.vastOptions&&"undefined"!==typeof e.vastOptions.errorUrl?e.announceError(503):e.announceLocalError(503));e.createNonLinearBoard(t)}},e.closeNonLinear=e=>{const t=document.getElementById("fluid_nonLinear_"+e);t&&t.remove()},e.rollGroupContainsLinear=t=>{let o=!1;for(let n=0;n<t.length;n++)if(e.adList[t[n].id].adType&&"linear"===e.adList[t[n].id].adType){o=!0;break}return o},e.rollGroupContainsNonlinear=t=>{let o=!1;for(let n=0;n<t.length;n++)if("nonlinear"===e.adList[t[n].id].adType.toLowerCase()){o=!0;break}return o},e.preRollFail=()=>{const t=e.preRollAdPodsLength;e.preRollVastResolved++,e.preRollVastResolved===t&&e.preRollAdsPlay()},e.preRollSuccess=()=>{const t=e.preRollAdPodsLength;e.preRollVastResolved++,e.preRollVastResolved===t&&e.preRollAdsPlay()},e.preRollAdsPlay=()=>{const t=0,o=e.preRollAdPods,n={linear:[],nonLinear:[]};e.firstPlayLaunched=!0;for(let i=0;i<o.length;i++){if(!0===e.adList[o[i]].played)return;"linear"===e.adList[o[i]].adType&&n.linear.push(o[i]),"nonLinear"===e.adList[o[i]].adType&&(n.nonLinear.push(o[i]),e.scheduleTask({time:t,playRoll:"midRoll",adListId:n.nonLinear.shift()}))}n.linear.length>0?(e.toggleLoader(!0),e.playRoll(n.linear)):e.playMainVideoWhenVastFails(900)},e.preRoll=t=>{const o=t.vastObj;e.domRef.player.removeEventListener(t.type,e.preRoll);const n=[];n[0]=t.type.replace("adId_","");!0!==e.adList[n[0]].played&&(e.preRollAdPods.push(n[0]),e.preRollSuccess(o))},e.createAdMarker=(t,o)=>{const n=document.getElementById(e.videoPlayerId+"_ad_markers_holder"),i=document.createElement("div");i.id="ad_marker_"+e.videoPlayerId+"_"+t,i.className="fluid_controls_ad_marker",i.style.left=o/e.mainVideoDuration*100+"%",e.isCurrentlyPlayingAd&&(i.style.display="none"),n.appendChild(i)},e.hideAdMarker=t=>{const o=document.getElementById("ad_marker_"+e.videoPlayerId+"_"+t);o&&(o.style.display="none")},e.showAdMarkers=()=>{const t=document.getElementById(e.videoPlayerId+"_ad_markers_holder"),o=t.getElementsByClassName("fluid_controls_ad_marker"),n="ad_marker_"+e.videoPlayerId+"_";for(let i=0;i<o.length;++i){const t=o[i],a=t.id.replace(n,"");!1===e.adList[a].played&&(t.style.display="")}},e.hideAdMarkers=()=>{const t=document.getElementById(e.videoPlayerId+"_ad_markers_holder"),o=t.getElementsByClassName("fluid_controls_ad_marker");for(let e=0;e<o.length;++e){const t=o[e];t.style.display="none"}},e.midRoll=t=>{e.domRef.player.removeEventListener(t.type,e.midRoll);const o=t.type.replace("adId_","");if(!0===e.adList[o].played)return;let n=e.adList[o].timer;"string"==typeof n&&-1!==n.indexOf("%")&&(n=n.replace("%",""),n=Math.floor(e.mainVideoDuration/100*n)),e.displayOptions.vastOptions.showProgressbarMarkers&&"nonLinear"===e.adList[o].adType&&e.createAdMarker(o,n),e.scheduleTask({time:n,playRoll:"midRoll",adListId:o})},e.postRoll=t=>{e.domRef.player.removeEventListener(t.type,e.postRoll);const o=t.type.replace("adId_","");e.scheduleTask({time:Math.floor(e.mainVideoDuration),playRoll:"postRoll",adListId:o})},e.onPauseRoll=t=>{e.domRef.player.removeEventListener(t.type,e.onPauseRoll);const o=t.type.replace("adId_","");if("nonLinear"===e.adList[o].adType){if(!e.adPool.hasOwnProperty(o)||!0===e.adPool[o].error)return void e.announceLocalError(101);const t=document.getElementsByClassName("fluid_nonLinear_ad")[0];if(t)e.onPauseRollAdPods.push(o);else{e.createBoard(o),e.currentOnPauseRollAd=o;let t=document.getElementById("fluid_nonLinear_"+o);t&&(t.style.display="none")}}},e.hasValidOnPauseAd=()=>{const t=e.findRoll("onPauseRoll");return 0!==t.length&&e.adList[t[0]]&&!1===e.adList[t[0]].error},e.toggleOnPauseAd=()=>{if(e.hasValidOnPauseAd()&&!e.isCurrentlyPlayingAd){const t=e.findRoll("onPauseRoll");let o;o=""!==e.currentOnPauseRollAd?e.currentOnPauseRollAd:t[0],e.vastOptions=e.adPool[o];const n=document.getElementById("fluid_nonLinear_"+o);n&&e.domRef.player.paused?setTimeout((function(){n.style.display="flex",e.adList[o].played=!1,e.trackingOnPauseNonLinearAd(o,"start")}),500):n&&!e.domRef.player.paused&&(n.style.display="none",e.adFinished=!0,e.trackingOnPauseNonLinearAd(o,"complete"))}},e.trackingOnPauseNonLinearAd=(t,o)=>{e.adPool.hasOwnProperty(t)&&!0!==e.adPool[t].error?(e.vastOptions=e.adPool[t],e.trackSingleEvent(o)):e.announceLocalError(101)},e.getLinearAdsFromKeyTime=t=>{const o=[];for(let n=0;n<t.length;n++)!1===e.adList[t[n].adListId].played&&o.push(t[n].adListId);return o},e.adKeytimePlay=t=>{if(!e.timerPool[t]||e.isCurrentlyPlayingAd)return;const o=e.timerPool[t]["closeStaticAd"].length,n=e.timerPool[t]["linear"].length,i=e.timerPool[t]["nonLinear"].length;if(0!==o||0!==n||0!==i){if(o>0){for(let n=0;n<o;n++){const o=e.timerPool[t]["closeStaticAd"][n].closeStaticAd;!0===e.adList[o].played&&e.completeNonLinearStatic(o)}e.timerPool[t]["closeStaticAd"]=[]}if(n>0){const o=e.getLinearAdsFromKeyTime(e.timerPool[t]["linear"]);if(o.length>0)return e.playRoll(o),void(e.timerPool[t]["linear"]=[])}if(i>0)for(let o=0;o<i;o++){const n=e.timerPool[t]["nonLinear"][o].adListId;e.adPool[n];if(!1===e.adList[n].played&&!e.displayOptions.layoutControls.showCardBoardView)return e.createNonLinearStatic(n),e.displayOptions.vastOptions.showProgressbarMarkers&&e.hideAdMarker(n),void e.timerPool[t]["nonLinear"].splice(o,1)}}else delete e.timerPool[t]},e.adTimer=()=>{e.isTimer||(e.isTimer=!e.isTimer,e.timer=setInterval((function(){const t=Math.floor(e.getCurrentTime());e.adKeytimePlay(t)}),800))},e.scheduleTask=t=>{e.timerPool.hasOwnProperty(t.time)||(e.timerPool[t.time]={linear:[],nonLinear:[],closeStaticAd:[]}),t.hasOwnProperty("playRoll")&&"linear"===e.adList[t.adListId].adType?e.timerPool[t.time]["linear"].push(t):t.hasOwnProperty("playRoll")&&"nonLinear"===e.adList[t.adListId].adType?e.timerPool[t.time]["nonLinear"].push(t):t.hasOwnProperty("closeStaticAd")&&e.timerPool[t.time]["closeStaticAd"].push(t)},e.switchToMainVideo=()=>{e.debugMessage("starting main video"),e.domRef.player.src=e.originalSrc,e.initialiseStreamers();const t="undefined"!==typeof e.domRef.player.mainVideoCurrentTime?e.domRef.player.mainVideoCurrentTime:0;e.domRef.player.hasOwnProperty("currentTime")&&(e.domRef.player.currentTime=t),e.displayOptions.layoutControls.loop&&(e.domRef.player.loop=!0),e.setCurrentTimeAndPlay(t,e.autoplayAfterAd),e.isCurrentlyPlayingAd=!1,e.deleteVastAdElements(),e.adFinished=!0,e.displayOptions.vastOptions.vastAdvanced.vastVideoEndedCallback(),e.vastOptions=null,e.setBuffering();const o=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container");if(null!==o){const t=e.displayOptions.layoutControls.primaryColor?e.displayOptions.layoutControls.primaryColor:"white",o=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let e=0;e<o.length;e++)o[e].style.backgroundColor=t}if(e.domRef.player.removeEventListener("ended",e.onVastAdEnded),e.displayOptions.vastOptions.showProgressbarMarkers&&e.showAdMarkers(),e.hasTitle()){const t=document.getElementById(e.videoPlayerId+"_title");t.style.display="inline"}},e.getNextAdPod=()=>{let t=null;if(e.temporaryAdPods.length>0){const o=e.temporaryAdPods.shift();t=o.id}return t},e.checkForNextAd=()=>{const t=e.getNextAdPod();null===t?(e.switchToMainVideo(),e.vastOptions=null,e.adFinished=!0):(e.domRef.player.removeEventListener("ended",e.onVastAdEnded),e.isCurrentlyPlayingAd=!1,e.vastOptions=null,e.adFinished=!0,e.renderLinearAd(t,!1))},e.addSkipButton=()=>{const t=document.createElement("div");t.id="skip_button_"+e.videoPlayerId,t.className="skip_button skip_button_disabled",t.innerHTML=e.displayOptions.vastOptions.skipButtonCaption.replace("[seconds]",e.vastOptions.skipoffset),document.getElementById("fluid_video_wrapper_"+e.videoPlayerId).appendChild(t),e.domRef.player.addEventListener("timeupdate",e.decreaseSkipOffset,!1)},e.addAdCountdown=()=>{const t=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId),o=document.createElement("div"),n=e.pad(parseInt(e.currentVideoDuration/60))+":"+e.pad(parseInt(e.currentVideoDuration%60)),i=parseInt(n);o.id="ad_countdown"+e.videoPlayerId,o.className="ad_countdown",o.innerHTML="<span class='ad_timer_prefix'>Ad - </span>"+i,t.appendChild(o),e.domRef.player.addEventListener("timeupdate",e.decreaseAdCountdown,!1),t.addEventListener("mouseover",(function(){o.style.display="none"}),!1)},e.decreaseAdCountdown=function(){const t=parseInt(e.currentVideoDuration)-parseInt(e.domRef.player.currentTime),o=document.getElementById("ad_countdown"+e.videoPlayerId);o?o.innerHTML="<span class='ad_timer_prefix'>Ad - </span> "+e.pad(parseInt(t/60))+":"+e.pad(parseInt(t%60)):e.domRef.player.removeEventListener("timeupdate",e.decreaseAdCountdown)},e.removeAdCountdown=()=>{const t=document.getElementById("ad_countdown"+e.videoPlayerId);t&&t.parentElement.removeChild(t)},e.toggleAdCountdown=t=>{const o=document.getElementById("ad_countdown"+e.videoPlayerId);o&&(o.style.display=t?"inline-block":"none")},e.addAdPlayingText=t=>{const o=document.createElement("div");o.id=e.videoPlayerId+"_fluid_ad_playing",e.displayOptions.layoutControls.primaryColor&&(o.style.backgroundColor=e.displayOptions.layoutControls.primaryColor,o.style.opacity=1),o.className="fluid_ad_playing",o.innerText=t,document.getElementById("fluid_video_wrapper_"+e.videoPlayerId).appendChild(o)},e.positionTextElements=t=>{const o=["top left","top right","bottom left","bottom right"],n=document.getElementById("skip_button_"+e.videoPlayerId),i=document.getElementById(e.videoPlayerId+"_fluid_ad_playing"),a=document.getElementById(e.videoPlayerId+"_fluid_cta");let r=0,s=0;const l=8;let d=!1,c=0,u=[];const p={top:{left:{h:34,v:34},right:{h:0,v:34}},bottom:{left:{h:34,v:50},right:{h:0,v:50}}};if(null!==n){c=n.offsetHeight+l;const t=e.domRef.wrapper;t.classList.contains("mobile")&&(p.bottom.left.v=75,p.bottom.right.v=75)}let m,f,y;null!==a&&(m=e.displayOptions.vastOptions.adCTATextPosition.toLowerCase(),-1===o.indexOf(m)&&(console.log('[FP Error] Invalid position for CTAText. Reverting to "bottom right"'),m="bottom right"),u=m.split(" "),d="bottom"===u[0],a.style[u[0]]=p[u[0]][u[1]].v+"px",a.style[u[1]]=p[u[0]][u[1]].h+"px",d&&"right"===u[1]&&(a.style[u[0]]=p[u[0]][u[1]].v+c+"px"),r=a.offsetHeight+l+"px"),null!==i&&(f=null!==t.adTextPosition?t.adTextPosition.toLowerCase():e.displayOptions.vastOptions.adTextPosition.toLowerCase(),-1===o.indexOf(f)&&(console.log('[FP Error] Invalid position for adText. Reverting to "top left"'),f="top left"),y=f.split(" "),i.style[y[0]]=p[y[0]][y[1]].v+"px",i.style[y[1]]=p[y[0]][y[1]].h+"px",s=i.offsetHeight+l+"px"),r>0&&s>0&&m===f&&(d?"right"===u[1]?i.style.bottom=p[y[0]][y[1]].v+c+r+"px":i.style.bottom=p[y[0]][y[1]].v+r+"px":a.style.top=p[u[0]][u[1]].v+s+"px")},e.removeAdPlayingText=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_ad_playing");t&&t.parentElement.removeChild(t)},e.addCTAButton=t=>{if(!t)return;const o=document.createElement("div");o.id=e.videoPlayerId+"_fluid_cta",o.className="fluid_ad_cta";const n=document.createElement("span");n.innerHTML=e.displayOptions.vastOptions.adCTAText+'<br/><span class="add_icon_clickthrough">'+t+"</span>",o.addEventListener("click",()=>{e.domRef.player.paused||e.domRef.player.pause();const t=window.open(e.vastOptions.clickthroughUrl,"_blank");return t.focus(),!0},!1),o.appendChild(n),document.getElementById("fluid_video_wrapper_"+e.videoPlayerId).appendChild(o)},e.removeCTAButton=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_cta");t&&t.parentElement.removeChild(t)},e.decreaseSkipOffset=()=>{let t=e.vastOptions.skipoffset-Math.floor(e.domRef.player.currentTime);const o=document.getElementById("skip_button_"+e.videoPlayerId);if(!o)return void e.domRef.player.removeEventListener("timeupdate",e.decreaseSkipOffset);if(t>=1)return void(o.innerHTML=e.displayOptions.vastOptions.skipButtonCaption.replace("[seconds]",t));const n=document.createElement("a");n.href="#",n.id="skipHref_"+e.videoPlayerId,n.innerHTML=e.displayOptions.vastOptions.skipButtonClickCaption,n.onclick=t=>{t.preventDefault(),t.stopPropagation(),e.pressSkipButton()},o.innerHTML="",o.appendChild(n),o.className=o.className.replace(/\bskip_button_disabled\b/,""),e.domRef.player.removeEventListener("timeupdate",e.decreaseSkipOffset)},e.pressSkipButton=()=>{if(e.removeSkipButton(),e.removeAdPlayingText(),e.removeCTAButton(),e.vastOptions.vpaid)return void e.skipVpaidAd();e.displayOptions.vastOptions.vastAdvanced.vastVideoSkippedCallback();const t=document.createEvent("Event");t.initEvent("ended",!1,!0),e.domRef.player.dispatchEvent(t)},e.removeSkipButton=()=>{const t=document.getElementById("skip_button_"+e.videoPlayerId);t&&t.parentElement.removeChild(t)},e.addClickthroughLayer=()=>{const t=e.domRef.wrapper,o=document.createElement("div");o.className="vast_clickthrough_layer",o.id="vast_clickthrough_layer_"+e.videoPlayerId,o.setAttribute("style","position: absolute; cursor: pointer; top: 0; left: 0; width: "+e.domRef.player.offsetWidth+"px; height: "+e.domRef.player.offsetHeight+"px;"),t.appendChild(o);const n=function(){window.open(e.vastOptions.clickthroughUrl),"undefined"!==typeof e.vastOptions.clicktracking&&e.callUris(e.vastOptions.clicktracking)},i=document.getElementById("vast_clickthrough_layer_"+e.videoPlayerId),a="iPhone"===e.mobileInfo.device&&!1!==e.mobileInfo.userOsMajor&&e.mobileInfo.userOsMajor<=9;i.onclick=()=>{e.domRef.player.paused?a&&!e.suppressClickthrough?(n(),e.suppressClickthrough=!0):e.domRef.player.play():(n(),e.domRef.player.pause())}},e.removeClickthrough=()=>{const t=document.getElementById("vast_clickthrough_layer_"+e.videoPlayerId);t&&t.parentNode.removeChild(t)}};"undefined"===typeof window||window.dashjs||(window.dashjs={skipAutoCreate:!0,isDefaultSubject:!0});var d=function(e,t){e.initialiseStreamers=()=>{switch(e.detachStreamers(),e.displayOptions.layoutControls.mediaType){case"application/dash+xml":e.dashScriptLoaded||window.dashjs&&!window.dashjs.isDefaultSubject?e.initialiseDash():(e.dashScriptLoaded=!0,o.e("dashjs").then(o.t.bind(null,"507c",7)).then(t=>{window.dashjs=t.default,e.initialiseDash()}));break;case"application/x-mpegurl":e.hlsScriptLoaded||window.Hls?e.initialiseHls():(e.hlsScriptLoaded=!0,o.e("hlsjs").then(o.t.bind(null,"0aa2",7)).then(t=>{window.Hls=t.default,e.initialiseHls()}));break}},e.initialiseDash=()=>{if("function"===typeof(window.MediaSource||window.WebKitMediaSource)){const t=e.autoplayAfterAd?e.displayOptions.layoutControls.autoPlay:e.autoplayAfterAd,o={debug:{logLevel:"undefined"!==typeof FP_DEBUG&&!0===FP_DEBUG?dashjs.Debug.LOG_LEVEL_DEBUG:dashjs.Debug.LOG_LEVEL_FATAL}},n=dashjs.MediaPlayer().create(),i=e.displayOptions.modules.configureDash(o);n.updateSettings(i),e.displayOptions.modules.onBeforeInitDash(n),n.initialize(e.domRef.player,e.originalSrc,t),n.on("streamInitializing",()=>{e.toggleLoader(!0)}),n.on("canPlay",()=>{e.toggleLoader(!1)}),n.on("playbackPlaying",()=>{e.toggleLoader(!1)}),e.displayOptions.modules.onAfterInitDash(n),e.dashPlayer=n}else e.nextSource(),console.log("[FP_WARNING] Media type not supported by this browser using DASH.js. (application/dash+xml)")},e.initialiseHls=()=>{if(Hls.isSupported()){const t={debug:"undefined"!==typeof FP_DEBUG&&!0===FP_DEBUG,p2pConfig:{logLevel:!1},enableWebVTT:!1,enableCEA708Captions:!1},o=e.displayOptions.modules.configureHls(t),n=new Hls(o);e.displayOptions.modules.onBeforeInitHls(n),n.attachMedia(e.domRef.player),n.loadSource(e.originalSrc),e.displayOptions.modules.onAfterInitHls(n),e.hlsPlayer=n,!e.firstPlayLaunched&&e.displayOptions.layoutControls.autoPlay&&e.domRef.player.play()}else e.nextSource(),console.log("[FP_WARNING] Media type not supported by this browser using HLS.js. (application/x-mpegURL)")},e.detachStreamers=()=>{e.dashPlayer?(e.dashPlayer.reset(),e.dashPlayer=!1):e.hlsPlayer&&(e.hlsPlayer.detachMedia(),e.hlsPlayer=!1)}},c=function(e,t){e.isTouchDevice=()=>!(!("ontouchstart"in window)&&!navigator.maxTouchPoints),e.getMobileOs=()=>{const e=navigator.userAgent||"",t={device:!1,userOs:!1,userOsVer:!1,userOsMajor:!1};let o;if(e.match(/Android/i)?(t.userOs="Android",o=e.indexOf("Android ")):e.match(/iPhone/i)?(t.device="iPhone",t.userOs="iOS",o=e.indexOf("OS ")):e.match(/iPad/i)?(t.device="iPad",t.userOs="iOS",o=e.indexOf("OS ")):t.userOs=!1,"iOS"===t.userOs&&o>-1){const n=e.substr(o+3),i=n.indexOf(" ");-1!==i&&(t.userOsVer=n.substring(0,n.indexOf(" ")).replace(/_/g,"."),t.userOsMajor=parseInt(t.userOsVer))}else"Android"===t.userOs&&o>-1?t.userOsVer=e.substr(o+8,3):t.userOsVer=!1;return t},e.getBrowserVersion=()=>{const e=navigator.userAgent||"",t={browserName:!1,fullVersion:!1,majorVersion:!1,userOsMajor:!1};let o,n;try{t.browserName=navigator.appName,-1!==(o=e.indexOf("OPR/"))?(t.browserName="Opera",t.fullVersion=e.substring(o+4)):-1!==(o=e.indexOf("Opera"))?(t.browserName="Opera",t.fullVersion=e.substring(o+6),-1!==(o=e.indexOf("Version"))&&(t.fullVersion=e.substring(o+8))):-1!==(o=e.indexOf("MSIE"))?(t.browserName="Microsoft Internet Explorer",t.fullVersion=e.substring(o+5)):-1!==(o=e.indexOf("Chrome"))?(t.browserName="Google Chrome",t.fullVersion=e.substring(o+7)):-1!==(o=e.indexOf("Safari"))?(t.browserName="Safari",t.fullVersion=e.substring(o+7),-1!==(o=e.indexOf("Version"))&&(t.fullVersion=e.substring(o+8))):-1!==(o=e.indexOf("Firefox"))?(t.browserName="Mozilla Firefox",t.fullVersion=e.substring(o+8)):(n=e.lastIndexOf(" ")+1)<(o=e.lastIndexOf("/"))&&(t.browserName=e.substring(n,o),t.fullVersion=e.substring(o+1),t.browserName.toLowerCase()===t.browserName.toUpperCase()&&(t.browserName=navigator.appName)),-1!==(n=t.fullVersion.indexOf(";"))&&(t.fullVersion=t.fullVersion.substring(0,n)),-1!==(n=t.fullVersion.indexOf(" "))&&(t.fullVersion=t.fullVersion.substring(0,n)),t.majorVersion=parseInt(""+t.fullVersion,10),isNaN(t.majorVersion)&&(t.fullVersion=""+parseFloat(navigator.appVersion),t.majorVersion=parseInt(navigator.appVersion,10))}catch(i){}return t},e.compareVersion=(e,t)=>{if("string"!==typeof e)return!1;if("string"!==typeof t)return!1;e=e.split("."),t=t.split(".");const o=Math.min(e.length,t.length);for(let n=0;n<o;++n){if(e[n]=parseInt(e[n],10),t[n]=parseInt(t[n],10),e[n]>t[n])return 1;if(e[n]<t[n])return-1}return e.length===t.length?0:e.length<t.length?-1:1},e.convertTimeStringToSeconds=e=>{if(!e||!e.match(/^(\d){2}(:[0-5][0-9]){2}(.(\d){1,3})?$/))return!1;const t=e.split(":");return 3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseInt(t[2],10)},e.formatTime=t=>{const o=new Date(1e3*t),n=e.pad(o.getUTCHours()),i=e.pad(o.getUTCMinutes()),a=e.pad(o.getSeconds());return n>=1?n+":"+i+":"+a:i+":"+a},e.pad=e=>e<10?"0"+e:e};const u=[n,i,a,r,s,l,d,c],p="undefined"!==typeof FP_ENV&&"development"===FP_ENV,m="undefined"!==typeof FP_DEBUG&&!0===FP_DEBUG;let f=0;const y=function(){const e=this;e.domRef={player:null},e.version="undefined"!==typeof FP_BUILD_VERSION?FP_BUILD_VERSION:"",e.homepage="undefined"!==typeof FP_HOMEPAGE?FP_HOMEPAGE+"/?utm_source=player&utm_medium=context_menu&utm_campaign=organic":"",e.destructors=[],e.init=(t,o)=>{const n={development:p,debug:m};for(const c of u)c(e,n);let i;if(t instanceof HTMLVideoElement)i=t,t.id||(t.id="fluid_player_instance_"+(f++).toString());else{if(!("string"===typeof t||t instanceof String))throw"Invalid initializer - player target must be HTMLVideoElement or ID";i=document.getElementById(t)}if(!i)throw"Could not find a HTML node to attach to for target "+t+'"';i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),e.domRef.player=i,e.vrROTATION_POSITION=.1,e.vrROTATION_SPEED=80,e.vrMode=!1,e.vrPanorama=null,e.vrViewer=null,e.vpaidTimer=null,e.vpaidAdUnit=null,e.vastOptions=null,e.videoPlayerId=i.id,e.originalSrc=e.getCurrentSrc(),e.isCurrentlyPlayingAd=!1,e.recentWaiting=!1,e.latestVolume=1,e.currentVideoDuration=0,e.firstPlayLaunched=!1,e.suppressClickthrough=!1,e.timelinePreviewData=[],e.mainVideoCurrentTime=0,e.mainVideoDuration=0,e.isTimer=!1,e.timer=null,e.timerPool={},e.adList={},e.adPool={},e.adGroupedByRolls={},e.onPauseRollAdPods=[],e.currentOnPauseRollAd="",e.preRollAdsResolved=!1,e.preRollAdPods=[],e.preRollAdPodsLength=0,e.preRollVastResolved=0,e.temporaryAdPods=[],e.availableRolls=["preRoll","midRoll","postRoll","onPauseRoll"],e.supportedNonLinearAd=["300x250","468x60","728x90"],e.autoplayAfterAd=!0,e.nonLinearDuration=15,e.supportedStaticTypes=["image/gif","image/jpeg","image/png"],e.inactivityTimeout=null,e.isUserActive=null,e.nonLinearVerticalAlign="bottom",e.vpaidNonLinearCloseButton=!0,e.showTimeOnHover=!0,e.initialAnimationSet=!0,e.theatreMode=!1,e.theatreModeAdvanced=!1,e.fullscreenMode=!1,e.originalWidth=i.offsetWidth,e.originalHeight=i.offsetHeight,e.dashPlayer=!1,e.hlsPlayer=!1,e.dashScriptLoaded=!1,e.hlsScriptLoaded=!1,e.isPlayingMedia=!1,e.isSwitchingSource=!1,e.isLoading=!1,e.isInIframe=e.inIframe(),e.mainVideoReadyState=!1,e.xmlCollection=[],e.inLineFound=null,e.fluidStorage={},e.fluidPseudoPause=!1,e.mobileInfo=e.getMobileOs(),e.events={},e.displayOptions={layoutControls:{mediaType:e.getCurrentSrcType(),primaryColor:!1,posterImage:!1,posterImageSize:"contain",adProgressColor:"#f9d300",playButtonShowing:!0,playPauseAnimation:!0,closeButtonCaption:"Close",fillToContainer:!1,autoPlay:!1,preload:"auto",mute:!1,loop:null,keyboardControl:!0,allowDownload:!1,playbackRateEnabled:!1,subtitlesEnabled:!1,showCardBoardView:!1,showCardBoardJoystick:!1,allowTheatre:!0,doubleclickFullscreen:!0,theatreSettings:{width:"100%",height:"60%",marginTop:0,horizontalAlign:"center",keepPosition:!1},theatreAdvanced:!1,title:null,logo:{imageUrl:null,position:"top left",clickUrl:null,opacity:1,mouseOverImageUrl:null,imageMargin:"2px",hideWithControls:!1,showOverAds:!1},controlBar:{autoHide:!1,autoHideTimeout:3,animated:!0},timelinePreview:{spriteImage:!1,spriteRelativePath:!1},htmlOnPauseBlock:{html:null,height:null,width:null},layout:"default",playerInitCallback:function(){},persistentSettings:{volume:!0,quality:!0,speed:!0,theatre:!0},controlForwardBackward:{show:!1},contextMenu:{controls:!0,links:[]}},vastOptions:{adList:{},skipButtonCaption:"Skip ad in [seconds]",skipButtonClickCaption:'Skip Ad <span class="skip_button_icon"></span>',adText:null,adTextPosition:"top left",adCTAText:"Visit now!",adCTATextPosition:"bottom right",adClickable:!0,vastTimeout:5e3,showProgressbarMarkers:!1,allowVPAID:!1,showPlayButton:!1,maxAllowedVastTagRedirects:3,vpaidTimeout:3e3,vastAdvanced:{vastLoadedCallback:function(){},noVastVideoCallback:function(){},vastVideoSkippedCallback:function(){},vastVideoEndedCallback:function(){}}},captions:{play:"Play",pause:"Pause",mute:"Mute",unmute:"Unmute",fullscreen:"Fullscreen",subtitles:"Subtitles",exitFullscreen:"Exit Fullscreen"},debug:m,modules:{configureHls:e=>e,onBeforeInitHls:e=>{},onAfterInitHls:e=>{},configureDash:e=>e,onBeforeInitDash:e=>{},onAfterInitDash:e=>{}},onBeforeXMLHttpRequestOpen:e=>{},onBeforeXMLHttpRequest:e=>{(m||p)&&console.debug("[FP_DEBUG] Request made",e)}},o.hlsjsConfig&&console.error("[FP_ERROR] player option hlsjsConfig is removed and has no effect. Use module callbacks instead!");for(let c in o)if(o.hasOwnProperty(c))if("object"==typeof o[c])for(let t in o[c])o[c].hasOwnProperty(t)&&(e.displayOptions[c][t]=o[c][t]);else e.displayOptions[c]=o[c];e.domRef.wrapper=e.setupPlayerWrapper(),i.addEventListener("webkitfullscreenchange",e.recalculateAdDimensions),i.addEventListener("fullscreenchange",e.recalculateAdDimensions),i.addEventListener("waiting",e.onRecentWaiting),i.addEventListener("pause",e.onFluidPlayerPause),i.addEventListener("loadedmetadata",e.mainVideoReady),i.addEventListener("error",e.onErrorDetection),i.addEventListener("ended",e.onMainVideoEnded),i.addEventListener("durationchange",()=>{e.currentVideoDuration=e.getCurrentVideoDuration()}),e.displayOptions.layoutControls.showCardBoardView&&i.setAttribute("crossOrigin","anonymous"),e.currentVideoDuration=e.getCurrentVideoDuration(),!isNaN(e.currentVideoDuration)&&isFinite(e.currentVideoDuration)||(e.currentVideoDuration=0),e.setLayout(),e.latestVolume=i.volume,e.initialAnimationSet=e.displayOptions.layoutControls.playPauseAnimation,e.handleFullscreen(),e.initLogo(),e.initTitle(),e.initMute(),e.initLoop(),e.displayOptions.layoutControls.playerInitCallback(),e.createVideoSourceSwitch(),e.createSubtitles(),e.createCardboard(),e.userActivityChecker(),e.setVastList(),e.setPersistentSettings();const a=e.findRoll("preRoll");a&&0!==a.length||e.initialiseStreamers();const r=i.play;i.play=function(){let t=null;e.displayOptions.layoutControls.showCardBoardView&&"undefined"!==typeof DeviceOrientationEvent&&"function"===typeof DeviceOrientationEvent.requestPermission&&DeviceOrientationEvent.requestPermission().then((function(t){"granted"===t&&e.debugMessage("DeviceOrientationEvent permission granted!")})).catch(console.error);try{return t=r.apply(this,arguments),void 0!==t&&null!==t&&(t.then(()=>{e.isPlayingMedia=!0,clearTimeout(e.promiseTimeout)}).catch(t=>{console.error("[FP_ERROR] Playback error",t);const o="undefined"!==typeof t.name&&"AbortError"===t.name;o||e.announceLocalError(202,"Failed to play video."),clearTimeout(e.promiseTimeout)}),e.promiseTimeout=setTimeout((function(){!1===e.isPlayingMedia&&e.announceLocalError(204,"[FP_ERROR] Timeout error. Failed to play video?")}),5e3)),t}catch(o){console.error("[FP_ERROR] Playback error",o),e.announceLocalError(201,"Failed to play video.")}};const s=i.pause;if(i.pause=function(){if(!0===e.isPlayingMedia)return e.isPlayingMedia=!1,s.apply(this,arguments);if(e.isCurrentlyPlayingVideo(e.domRef.player))try{return e.isPlayingMedia=!1,s.apply(this,arguments)}catch(t){e.announceLocalError(203,"Failed to play video.")}},e.displayOptions.layoutControls.autoPlay&&!e.dashScriptLoaded&&!e.hlsScriptLoaded){const t=e.getBrowserVersion();if("Safari"===t.browserName)return;i.play()}const l=document.getElementById("fluid_video_wrapper_"+i.id);e.mobileInfo.userOs?(e.hideControlBar(),l.addEventListener("touchstart",e.showControlBar,!1)):(l.addEventListener("mouseleave",e.handleMouseleave,!1),l.addEventListener("mouseenter",e.showControlBar,!1),l.addEventListener("mouseenter",e.showTitle,!1)),e.displayOptions.layoutControls.keyboardControl&&e.keyboardControl(),e.displayOptions.layoutControls.controlBar.autoHide&&e.linkControlBarUserActivity();try{if(e.domRef.player.textTracks)for(const t of e.domRef.player.textTracks)t.mode="hidden"}catch(d){}},e.getCurrentVideoDuration=()=>e.domRef.player?e.domRef.player.duration:0,e.toggleLoader=t=>{e.isLoading=!!t;const o=document.getElementById("vast_video_loading_"+e.videoPlayerId);o.style.display=t?"table":"none"},e.sendRequest=(t,o,n,i)=>{const a=new XMLHttpRequest;a.onreadystatechange=i,e.displayOptions.onBeforeXMLHttpRequestOpen(a),a.open("GET",t,!0),a.withCredentials=o,a.timeout=n,e.displayOptions.onBeforeXMLHttpRequest(a),a.send()},e.announceLocalError=(e,t)=>{const o="undefined"!==typeof e?parseInt(e):900;let n="[Error] ("+o+"): ";n+=t||"Failed to load Vast",console.warn(n)},e.debugMessage=t=>{e.displayOptions.debug&&console.log(t)},e.onMainVideoEnded=t=>{e.debugMessage("onMainVideoEnded is called"),e.isCurrentlyPlayingAd&&e.autoplayAfterAd||(Math.floor(e.getCurrentTime())>=Math.floor(e.mainVideoDuration)&&(e.adKeytimePlay(Math.floor(e.mainVideoDuration)),clearInterval(e.timer)),e.displayOptions.layoutControls.loop&&(e.switchToMainVideo(),e.playPauseToggle()))},e.getCurrentTime=()=>e.isCurrentlyPlayingAd?e.mainVideoCurrentTime:e.domRef.player.currentTime,e.getCurrentSrc=()=>{const t=e.domRef.player.getElementsByTagName("source");return t.length?t[0].getAttribute("src"):null},e.getCurrentSrcType=()=>{const t=e.domRef.player.getElementsByTagName("source");if(!t.length)return null;for(let o=0;o<t.length;o++)if(t[o].getAttribute("src")===e.originalSrc)return t[o].getAttribute("type").toLowerCase();return null},e.onRecentWaiting=()=>{e.recentWaiting=!0,setTimeout((function(){e.recentWaiting=!1}),1e3)},e.onFluidPlayerPause=()=>{setTimeout((function(){if(e.recentWaiting)return;const t=document.createEvent("CustomEvent");t.initEvent("fluidplayerpause",!1,!0),e.domRef.player.dispatchEvent(t)}),100)},e.checkShouldDisplayVolumeBar=()=>"iOS"!==e.getMobileOs().userOs,e.generateCustomControlTags=t=>{const o={};return o.loader=document.createElement("div"),o.loader.className="vast_video_loading",o.loader.id="vast_video_loading_"+e.videoPlayerId,o.loader.style.display="none",o.root=document.createElement("div"),o.root.className="fluid_controls_container",o.root.id=e.videoPlayerId+"_fluid_controls_container",t.displayVolumeBar||(o.root.className=o.root.className+" no_volume_bar"),t.controlForwardBackward&&(o.root.className=o.root.className+" skip_controls"),o.leftContainer=document.createElement("div"),o.leftContainer.className="fluid_controls_left",o.root.appendChild(o.leftContainer),o.playPause=document.createElement("div"),o.playPause.className="fluid_button fluid_button_play fluid_control_playpause",o.playPause.id=e.videoPlayerId+"_fluid_control_playpause",o.leftContainer.appendChild(o.playPause),t.controlForwardBackward&&(o.skipBack=document.createElement("div"),o.skipBack.className="fluid_button fluid_button_skip_back",o.skipBack.id=e.videoPlayerId+"_fluid_control_skip_back",o.leftContainer.appendChild(o.skipBack),o.skipForward=document.createElement("div"),o.skipForward.className="fluid_button fluid_button_skip_forward",o.skipForward.id=e.videoPlayerId+"_fluid_control_skip_forward",o.leftContainer.appendChild(o.skipForward)),o.progressContainer=document.createElement("div"),o.progressContainer.className="fluid_controls_progress_container fluid_slider",o.progressContainer.id=e.videoPlayerId+"_fluid_controls_progress_container",o.root.appendChild(o.progressContainer),o.progressWrapper=document.createElement("div"),o.progressWrapper.className="fluid_controls_progress",o.progressContainer.appendChild(o.progressWrapper),o.progressCurrent=document.createElement("div"),o.progressCurrent.className="fluid_controls_currentprogress",o.progressCurrent.id=e.videoPlayerId+"_vast_control_currentprogress",o.progressCurrent.style.backgroundColor=t.primaryColor,o.progressWrapper.appendChild(o.progressCurrent),o.progress_current_marker=document.createElement("div"),o.progress_current_marker.className="fluid_controls_currentpos",o.progress_current_marker.id=e.videoPlayerId+"_vast_control_currentpos",o.progressCurrent.appendChild(o.progress_current_marker),o.bufferedIndicator=document.createElement("div"),o.bufferedIndicator.className="fluid_controls_buffered",o.bufferedIndicator.id=e.videoPlayerId+"_buffered_amount",o.progressContainer.appendChild(o.bufferedIndicator),o.adMarkers=document.createElement("div"),o.adMarkers.className="fluid_controls_ad_markers_holder",o.adMarkers.id=e.videoPlayerId+"_ad_markers_holder",o.progressContainer.appendChild(o.adMarkers),o.rightContainer=document.createElement("div"),o.rightContainer.className="fluid_controls_right",o.root.appendChild(o.rightContainer),o.fullscreen=document.createElement("div"),o.fullscreen.id=e.videoPlayerId+"_fluid_control_fullscreen",o.fullscreen.className="fluid_button fluid_control_fullscreen fluid_button_fullscreen",o.rightContainer.appendChild(o.fullscreen),o.theatre=document.createElement("div"),o.theatre.id=e.videoPlayerId+"_fluid_control_theatre",o.theatre.className="fluid_button fluid_control_theatre fluid_button_theatre",o.rightContainer.appendChild(o.theatre),o.cardboard=document.createElement("div"),o.cardboard.id=e.videoPlayerId+"_fluid_control_cardboard",o.cardboard.className="fluid_button fluid_control_cardboard fluid_button_cardboard",o.rightContainer.appendChild(o.cardboard),o.subtitles=document.createElement("div"),o.subtitles.id=e.videoPlayerId+"_fluid_control_subtitles",o.subtitles.className="fluid_button fluid_button_subtitles",o.rightContainer.appendChild(o.subtitles),o.videoSource=document.createElement("div"),o.videoSource.id=e.videoPlayerId+"_fluid_control_video_source",o.videoSource.className="fluid_button fluid_button_video_source",o.rightContainer.appendChild(o.videoSource),o.playbackRate=document.createElement("div"),o.playbackRate.id=e.videoPlayerId+"_fluid_control_playback_rate",o.playbackRate.className="fluid_button fluid_button_playback_rate",o.rightContainer.appendChild(o.playbackRate),o.download=document.createElement("div"),o.download.id=e.videoPlayerId+"_fluid_control_download",o.download.className="fluid_button fluid_button_download",o.rightContainer.appendChild(o.download),o.volumeContainer=document.createElement("div"),o.volumeContainer.id=e.videoPlayerId+"_fluid_control_volume_container",o.volumeContainer.className="fluid_control_volume_container fluid_slider",o.rightContainer.appendChild(o.volumeContainer),o.volume=document.createElement("div"),o.volume.id=e.videoPlayerId+"_fluid_control_volume",o.volume.className="fluid_control_volume",o.volumeContainer.appendChild(o.volume),o.volumeCurrent=document.createElement("div"),o.volumeCurrent.id=e.videoPlayerId+"_fluid_control_currentvolume",o.volumeCurrent.className="fluid_control_currentvolume",o.volume.appendChild(o.volumeCurrent),o.volumeCurrentPos=document.createElement("div"),o.volumeCurrentPos.id=e.videoPlayerId+"_fluid_control_volume_currentpos",o.volumeCurrentPos.className="fluid_control_volume_currentpos",o.volumeCurrent.appendChild(o.volumeCurrentPos),o.mute=document.createElement("div"),o.mute.id=e.videoPlayerId+"_fluid_control_mute",o.mute.className="fluid_button fluid_button_volume fluid_control_mute",o.rightContainer.appendChild(o.mute),o.duration=document.createElement("div"),o.duration.id=e.videoPlayerId+"_fluid_control_duration",o.duration.className="fluid_control_duration fluid_fluid_control_duration",o.duration.innerText="00:00 / 00:00",o.rightContainer.appendChild(o.duration),o},e.controlPlayPauseToggle=()=>{const t=e.domRef.player.parentNode.getElementsByClassName("fluid_control_playpause"),o=document.getElementById(e.videoPlayerId+"context_option_play"),n=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_container"),i=document.getElementById(e.videoPlayerId+"_logo"),a=document.getElementById(e.videoPlayerId+"_fluid_initial_play");if(a&&(document.getElementById(e.videoPlayerId+"_fluid_initial_play").style.display="none",document.getElementById(e.videoPlayerId+"_fluid_initial_play_button").style.opacity="1"),!e.domRef.player.paused){for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/\bfluid_button_play\b/g,"fluid_button_pause");for(let e=0;e<n.length;e++)n[e].classList.remove("initial_controls_show");return i&&i.classList.remove("initial_controls_show"),void(null!==o&&(o.innerHTML=e.displayOptions.captions.pause))}for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/\bfluid_button_pause\b/g,"fluid_button_play");for(let e=0;e<n.length;e++)n[e].classList.add("initial_controls_show");e.isCurrentlyPlayingAd&&e.displayOptions.vastOptions.showPlayButton&&(document.getElementById(e.videoPlayerId+"_fluid_initial_play").style.display="block",document.getElementById(e.videoPlayerId+"_fluid_initial_play_button").style.opacity="1"),i&&i.classList.add("initial_controls_show"),null!==o&&(o.innerHTML=e.displayOptions.captions.play)},e.playPauseAnimationToggle=t=>{e.isCurrentlyPlayingAd||!e.displayOptions.layoutControls.playPauseAnimation||e.isSwitchingSource||(t?(document.getElementById(e.videoPlayerId+"_fluid_state_button").classList.remove("fluid_initial_pause_button"),document.getElementById(e.videoPlayerId+"_fluid_state_button").classList.add("fluid_initial_play_button")):(document.getElementById(e.videoPlayerId+"_fluid_state_button").classList.remove("fluid_initial_play_button"),document.getElementById(e.videoPlayerId+"_fluid_state_button").classList.add("fluid_initial_pause_button")),document.getElementById(e.videoPlayerId+"_fluid_initial_play").classList.add("transform-active"),setTimeout((function(){document.getElementById(e.videoPlayerId+"_fluid_initial_play").classList.remove("transform-active")}),800))},e.contolProgressbarUpdate=()=>{const t=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_currentprogress");for(let o=0;o<t.length;o++)t[o].style.width=e.domRef.player.currentTime/e.currentVideoDuration*100+"%"},e.controlDurationUpdate=()=>{const t=e.formatTime(e.domRef.player.currentTime);let o,n=!1;if(e.hlsPlayer&&(n=e.hlsPlayer.levels&&e.hlsPlayer.levels[e.hlsPlayer.currentLevel]&&e.hlsPlayer.levels[e.hlsPlayer.currentLevel].details.live),isNaN(e.currentVideoDuration)||!isFinite(e.currentVideoDuration)||n)o=t;else{const n=e.formatTime(e.currentVideoDuration);o=t+" / "+n}const i=e.domRef.player.parentNode.getElementsByClassName("fluid_control_duration");for(let e=0;e<i.length;e++)i[e].innerHTML=o},e.contolVolumebarUpdate=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_control_currentvolume"),o=document.getElementById(e.videoPlayerId+"_fluid_control_volume_currentpos"),n=document.getElementById(e.videoPlayerId+"_fluid_control_volume").clientWidth,i=o.clientWidth,a=e.domRef.player.parentNode.getElementsByClassName("fluid_control_mute"),r=document.getElementById(e.videoPlayerId+"context_option_mute");if(0!==e.domRef.player.volume?(e.latestVolume=e.domRef.player.volume,e.fluidStorage.fluidMute=!1):e.fluidStorage.fluidMute=!0,e.domRef.player.volume&&!e.domRef.player.muted){for(let e=0;e<a.length;e++)a[e].className=a[e].className.replace(/\bfluid_button_mute\b/g,"fluid_button_volume");null!==r&&(r.innerHTML=e.displayOptions.captions.mute)}else{for(let e=0;e<a.length;e++)a[e].className=a[e].className.replace(/\bfluid_button_volume\b/g,"fluid_button_mute");null!==r&&(r.innerHTML=e.displayOptions.captions.unmute)}t.style.width=e.domRef.player.volume*n+"px",o.style.left=e.domRef.player.volume*n-i/2+"px"},e.muteToggle=()=>{0===e.domRef.player.volume||e.domRef.player.muted?(e.domRef.player.volume=e.latestVolume,e.domRef.player.muted=!1):(e.domRef.player.volume=0,e.domRef.player.muted=!0),e.fluidStorage.fluidVolume=e.latestVolume,e.fluidStorage.fluidMute=e.domRef.player.muted},e.checkFullscreenSupport=t=>{const o=document.getElementById(t);return o.mozRequestFullScreen?{goFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",isFullscreen:"mozFullScreenElement"}:o.webkitRequestFullscreen?{goFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitFullscreenElement"}:o.msRequestFullscreen?{goFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",isFullscreen:"msFullscreenElement"}:o.requestFullscreen?{goFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",isFullscreen:"fullscreenElement"}:!!e.domRef.player.webkitSupportsFullscreen&&{goFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitDisplayingFullscreen"}},e.fullscreenOff=(t,o)=>{for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/\bfluid_button_fullscreen_exit\b/g,"fluid_button_fullscreen");null!==o&&(o.innerHTML="Fullscreen"),e.fullscreenMode=!1},e.fullscreenOn=(t,o)=>{for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/\bfluid_button_fullscreen\b/g,"fluid_button_fullscreen_exit");null!==o&&(o.innerHTML=e.displayOptions.captions.exitFullscreen),e.fullscreenMode=!0},e.fullscreenToggle=()=>{const t=e.domRef.player,o=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId),n=e.checkFullscreenSupport("fluid_video_wrapper_"+e.videoPlayerId),i=t.parentNode.getElementsByClassName("fluid_control_fullscreen"),a=document.getElementById(e.videoPlayerId+"context_option_fullscreen");let r;e.theatreMode&&e.theatreToggle(),n?"webkitEnterFullscreen"===n.goFullscreen?t[n.isFullscreen]||(r="videoPlayerTag."+n.goFullscreen+"();",e.fullscreenOn(i,a),new Function("videoPlayerTag",r)(t)):(null===document[n.isFullscreen]?(r="videoPlayerTag."+n.goFullscreen+"();",e.fullscreenOn(i,a)):(r="document."+n.exitFullscreen+"();",e.fullscreenOff(i,a)),new Function("videoPlayerTag",r)(o)):-1!==o.className.search(/\bpseudo_fullscreen\b/g)?(o.className=o.className.replace(/\bpseudo_fullscreen\b/g,""),e.fullscreenOff(i,a)):(o.className+=" pseudo_fullscreen",e.fullscreenOn(i,a)),e.resizeVpaidAuto()},e.findClosestParent=(e,t)=>{let o,n=null;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(n=e,!0)})),e[n](t))return e;while(e){if(o=e.parentElement,o&&o[n](t))return o;e=o}return null},e.getTranslateX=e=>{let t=null;try{const o=e.style.transform.match(/translate3d\((-?\d+px,\s?){2}-?\d+px\)/);o&&o.length&&(t=o[0].replace("translate3d(","").replace(")","").replace(/\s/g,"").replace(/px/g,"").split(","))}catch(o){t=null}return t&&3===t.length?parseInt(t[0]):0},e.getEventOffsetX=(t,o)=>{let n,i=0,a=0;while(o&&!isNaN(o.offsetLeft))a=e.getTranslateX(o),"BODY"===o.tagName?i+=o.offsetLeft+o.clientLeft+a-(o.scrollLeft||document.documentElement.scrollLeft):i+=o.offsetLeft+o.clientLeft+a-o.scrollLeft,o=o.offsetParent;return n="undefined"!==typeof t.touches&&"undefined"!==typeof t.touches[0]?t.touches[0].clientX:t.clientX,n-i},e.getEventOffsetY=(t,o)=>{let n=1;const i=e.findClosestParent(o,'div[id^="fluid_video_wrapper_"]');if(i){const t=i.id.replace("fluid_video_wrapper_",""),o=e.checkFullscreenSupport("fluid_video_wrapper_"+t);o&&document[o.isFullscreen]&&(n=0)}let a=0;while(o&&!isNaN(o.offsetTop))"BODY"===o.tagName?a+=o.offsetTop-(o.scrollTop||document.documentElement.scrollTop)*n:a+=o.offsetTop-o.scrollTop*n,o=o.offsetParent;return t.clientY-a},e.onProgressbarMouseDown=t=>{let o;if(e.displayOptions.layoutControls.playPauseAnimation=!1,o=e.displayOptions.layoutControls.showCardBoardView?e.getEventOffsetX(t,t.target.parentNode):e.getEventOffsetX(t,document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container")),e.isCurrentlyPlayingAd)return;e.fluidPseudoPause=!0;const n=e.domRef.player.paused;n||e.domRef.player.pause();const i=t=>{const o=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").clientWidth;o&&(e.domRef.player.currentTime=e.currentVideoDuration*t/o)},a=t=>{const n=e.getEventOffsetX(t,t.target.parentNode);o=NaN,i(n),e.contolProgressbarUpdate(e.videoPlayerId),e.controlDurationUpdate(e.videoPlayerId)},r=t=>{document.removeEventListener("mousemove",a),document.removeEventListener("touchmove",a),document.removeEventListener("mouseup",r),document.removeEventListener("touchend",r);let s=e.getEventOffsetX(t,t.target.parentNode);isNaN(s)&&!isNaN(o)&&(s=o),isNaN(s)||i(s),n||e.play(),e.initialAnimationSet&&setTimeout(()=>{e.displayOptions.layoutControls.playPauseAnimation=e.initialAnimationSet},200),e.fluidPseudoPause=!1};document.addEventListener("mouseup",r),document.addEventListener("touchend",r),document.addEventListener("mousemove",a),document.addEventListener("touchmove",a)},e.onVolumeBarMouseDown=()=>{const t=t=>{const o=e.domRef.controls.volumeContainer.clientWidth;if(o){let n=t/o;n<.05?(n=0,e.domRef.player.muted=!0):n>.95&&(n=1),e.domRef.player.muted&&n>0&&(e.domRef.player.muted=!1),e.setVolume(n)}},o=o=>{const n=e.getEventOffsetX(o,e.domRef.controls.volumeContainer);t(n)},n=i=>{document.removeEventListener("mousemove",o),document.removeEventListener("touchmove",o),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",n);const a=e.getEventOffsetX(i,e.domRef.controls.volumeContainer);isNaN(a)||t(a)};document.addEventListener("mouseup",n),document.addEventListener("touchend",n),document.addEventListener("mousemove",o),document.addEventListener("touchmove",o)},e.findRoll=t=>{const o=[];if(o.length=0,t&&e.hasOwnProperty("adList")){for(let n in e.adList)e.adList.hasOwnProperty(n)&&e.adList[n].roll===t&&o.push(n);return o}},e.onKeyboardVolumeChange=t=>{let o=e.domRef.player.volume;"asc"===t?o+=.05:"desc"===t&&(o-=.05),o<.05?o=0:o>.95&&(o=1),e.setVolume(o)},e.onKeyboardSeekPosition=t=>{e.isCurrentlyPlayingAd||(e.domRef.player.currentTime=e.getNewCurrentTimeValueByKeyCode(t,e.domRef.player.currentTime,e.domRef.player.duration))},e.getNewCurrentTimeValueByKeyCode=(e,t,o)=>{let n=t;switch(e){case 37:n-=5,n=n<5?0:n;break;case 39:n+=5,n=n>o-5?o:n;break;case 35:n=o;break;case 36:n=0;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(e<58&&e>47){const t=10*(e-48);n=o*t/100}break}return n},e.handleMouseleave=t=>{"undefined"!==typeof t.clientX&&e.domRef.wrapper.contains(document.elementFromPoint(t.clientX,t.clientY))||(e.hideControlBar(),e.hideTitle())},e.handleMouseenterForKeyboard=()=>{e.captureKey||(e.captureKey=t=>{t.stopPropagation();const o=t.keyCode;switch(o){case 70:e.fullscreenToggle(),t.preventDefault();break;case 13:case 32:e.playPauseToggle(),t.preventDefault();break;case 77:e.muteToggle(),t.preventDefault();break;case 38:e.onKeyboardVolumeChange("asc"),t.preventDefault();break;case 40:e.onKeyboardVolumeChange("desc"),t.preventDefault();break;case 37:case 39:case 35:case 36:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:e.onKeyboardSeekPosition(o),t.preventDefault();break}return!1},document.addEventListener("keydown",e.captureKey,!0))},e.keyboardControl=()=>{e.domRef.wrapper.addEventListener("click",e.handleMouseenterForKeyboard,!1);const t=e.handleWindowClick.bind(e);e.destructors.push(()=>{window.removeEventListener("click",t)}),window.addEventListener("click",t)},e.handleWindowClick=t=>{if(!e.domRef.wrapper)return void console.warn("Dangling click event listener should be collected for unknown wrapper "+e.videoPlayerId+". Did you forget to call destroy on player instance?");const o=e.domRef.wrapper.contains(t.target)||t.target.id==="skipHref_"+e.videoPlayerId;o||(document.removeEventListener("keydown",e.captureKey,!0),delete e["captureKey"],e.theatreMode&&!e.theatreModeAdvanced&&e.theatreToggle())},e.initialPlay=()=>{if(e.domRef.player.addEventListener("playing",()=>{e.toggleLoader(!1)}),e.domRef.player.addEventListener("timeupdate",()=>{e.toggleLoader(!1)}),e.domRef.player.addEventListener("waiting",()=>{e.toggleLoader(!0)}),!e.displayOptions.layoutControls.playButtonShowing){const t=document.getElementById(e.videoPlayerId+"_fluid_controls_container");t.classList.remove("initial_controls_show");const o=document.getElementById(e.videoPlayerId+"_logo");o&&o.classList.remove("initial_controls_show")}e.firstPlayLaunched||(e.playPauseToggle(),e.domRef.player.removeEventListener("play",e.initialPlay))},e.playPauseToggle=()=>{const t=!e.firstPlayLaunched,o=e.findRoll("preRoll");if(t&&0!==o.length){e.isCurrentlyPlayingAd=!0;const t=e.getBrowserVersion(),n=!1!==e.mobileInfo.userOs&&"Android"===e.mobileInfo.userOs&&"Google Chrome"===t.browserName;("Safari"===t.browserName||n)&&(e.domRef.player.src="https://cdn.fluidplayer.com/static/blank.mp4",e.domRef.player.play(),e.playPauseAnimationToggle(!0)),e.firstPlayLaunched=!0,e.prepareVast("preRoll"),e.preRollAdPodsLength=o.length}else t&&0===o.length&&(e.firstPlayLaunched=!0,e.displayOptions.vastOptions.vastAdvanced.noVastVideoCallback()),e.domRef.player.paused?(e.isCurrentlyPlayingAd&&null!==e.vastOptions&&e.vastOptions.vpaid?e.resumeVpaidAd():e.dashPlayer?e.dashPlayer.play():e.domRef.player.play(),e.playPauseAnimationToggle(!0)):t||(e.isCurrentlyPlayingAd&&null!==e.vastOptions&&e.vastOptions.vpaid?e.pauseVpaidAd():e.domRef.player.pause(),e.playPauseAnimationToggle(!1)),e.toggleOnPauseAd();const n=()=>{e.prepareVast("onPauseRoll"),e.prepareVast("postRoll"),e.prepareVast("midRoll")};if(t){const t=document.getElementById(e.videoPlayerId+"_fluid_pseudo_poster");t&&t.parentNode.removeChild(t),e.mainVideoDuration>0?n():e.domRef.player.addEventListener("mainVideoDurationSet",n)}e.adTimer();const i=document.getElementById(e.videoPlayerId+"_fluid_html_on_pause");i&&!e.isCurrentlyPlayingAd&&(e.domRef.player.paused?i.style.display="flex":i.style.display="none")},e.setCustomControls=()=>{e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_playpause",()=>{e.firstPlayLaunched||e.domRef.player.removeEventListener("play",e.initialPlay),e.playPauseToggle()},!1),e.domRef.player.addEventListener("play",()=>{e.controlPlayPauseToggle(),e.contolVolumebarUpdate()},!1),e.domRef.player.addEventListener("fluidplayerpause",()=>{e.controlPlayPauseToggle()},!1),e.domRef.player.addEventListener("timeupdate",()=>{e.contolProgressbarUpdate(),e.controlDurationUpdate()});const t=e.getMobileOs(),o=t.userOs?"touchstart":"mousedown";e.displayOptions.layoutControls.showCardBoardView?e.trackEvent(e.domRef.player.parentNode,o,".fluid_controls_progress_container",t=>e.onProgressbarMouseDown(t),!1):document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener(o,t=>e.onProgressbarMouseDown(t),!1),document.getElementById(e.videoPlayerId+"_fluid_control_volume_container").addEventListener(o,t=>e.onVolumeBarMouseDown(),!1),e.domRef.player.addEventListener("volumechange",()=>e.contolVolumebarUpdate()),e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_mute",()=>e.muteToggle()),e.setBuffering(),e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_fullscreen",()=>e.fullscreenToggle()),e.displayOptions.layoutControls.allowTheatre&&!e.isInIframe?(document.getElementById(e.videoPlayerId+"_fluid_control_theatre").style.display="inline-block",e.trackEvent(e.domRef.player.parentNode,"click",".fluid_control_theatre",()=>e.theatreToggle())):document.getElementById(e.videoPlayerId+"_fluid_control_theatre").style.display="none",e.domRef.player.addEventListener("ratechange",()=>{e.isCurrentlyPlayingAd&&(e.playbackRate=1)})},e.createTimePositionPreview=()=>{if(!e.showTimeOnHover)return;const t=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container"),o=document.createElement("div");o.id=e.videoPlayerId+"_fluid_timeline_preview",o.className="fluid_timeline_preview",o.style.display="none",o.style.position="absolute",t.appendChild(o),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener("mousemove",t=>{const o=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container"),n=o.clientWidth,i=document.getElementById(e.videoPlayerId+"_fluid_timeline_preview"),a=e.getEventOffsetX(t,o),r=e.currentVideoDuration*a/n;i.innerText=e.formatTime(r),i.style.display="block",i.style.left=r/e.domRef.player.duration*100+"%"},!1),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener("mouseout",()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_timeline_preview");t.style.display="none"},!1)},e.setCustomContextMenu=()=>{const t=e.domRef.wrapper,o=e.displayOptions.layoutControls.contextMenu.controls,n=e.displayOptions.layoutControls.contextMenu.links,i=document.createElement("div");i.id=e.videoPlayerId+"_fluid_context_menu",i.className="fluid_context_menu",i.style.display="none",i.style.position="absolute";const a=document.createElement("ul");if(i.appendChild(a),n)for(const s of n){const t=document.createElement("li");t.id=e.videoPlayerId+"context_option_play",t.innerHTML=s.label,t.addEventListener("click",()=>window.open(s.href,"_blank"),!1),a.appendChild(t)}if(o){const t=document.createElement("li");t.id=e.videoPlayerId+"context_option_play",t.innerHTML=e.displayOptions.captions.play,t.addEventListener("click",()=>e.playPauseToggle(),!1),a.appendChild(t);const o=document.createElement("li");o.id=e.videoPlayerId+"context_option_mute",o.innerHTML=e.displayOptions.captions.mute,o.addEventListener("click",()=>e.muteToggle(),!1),a.appendChild(o);const n=document.createElement("li");n.id=e.videoPlayerId+"context_option_fullscreen",n.innerHTML=e.displayOptions.captions.fullscreen,n.addEventListener("click",()=>e.fullscreenToggle(),!1),a.appendChild(n)}const r=document.createElement("li");r.id=e.videoPlayerId+"context_option_homepage",r.innerHTML="Fluid Player "+e.version,r.addEventListener("click",()=>window.open(e.homepage,"_blank"),!1),a.appendChild(r),e.domRef.player.parentNode.insertBefore(i,e.domRef.player.nextSibling),t.addEventListener("contextmenu",t=>{t.preventDefault(),i.style.left=e.getEventOffsetX(t,e.domRef.player)+"px",i.style.top=e.getEventOffsetY(t,e.domRef.player)+"px",i.style.display="block"},!1),document.addEventListener("click",t=>{t.target===e.domRef.player&&2===t.button||(i.style.display="none")},!1)},e.setDefaultLayout=()=>{e.domRef.wrapper.className+=" fluid_player_layout_"+e.displayOptions.layoutControls.layout,e.setCustomContextMenu();const t=e.generateCustomControlTags({displayVolumeBar:e.checkShouldDisplayVolumeBar(),primaryColor:e.displayOptions.layoutControls.primaryColor?e.displayOptions.layoutControls.primaryColor:"red",controlForwardBackward:!!e.displayOptions.layoutControls.controlForwardBackward.show});e.domRef.player.removeAttribute("controls"),e.domRef.player.parentNode.insertBefore(t.root,e.domRef.player.nextSibling),e.domRef.player.parentNode.insertBefore(t.loader,e.domRef.player.nextSibling),e.domRef.controls=t;let o=100;const n=function(){o?e.checkIfVolumebarIsRendered()?(clearInterval(i),e.contolVolumebarUpdate(e.videoPlayerId)):o--:clearInterval(i)};let i=setInterval(n,100);e.displayOptions.layoutControls.doubleclickFullscreen&&e.domRef.player.addEventListener("dblclick",e.fullscreenToggle),e.initHtmlOnPauseBlock(),e.setCustomControls(),e.setupThumbnailPreview(),e.createTimePositionPreview(),e.posterImage(),e.initPlayButton(),e.setVideoPreload(),e.createPlaybackList(),e.createDownload(),e.displayOptions.layoutControls.controlForwardBackward.show&&e.initSkipControls()},e.initSkipControls=()=>{const t=t=>{if(e.isCurrentlyPlayingAd)return;let o=e.domRef.player.currentTime+t;o<0&&(o=0),e.domRef.player.currentTime=o};e.domRef.controls.skipBack.addEventListener("click",t.bind(this,-10)),e.domRef.controls.skipForward.addEventListener("click",t.bind(this,10))},e.checkIfVolumebarIsRendered=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_control_volume_currentpos"),o=document.getElementById(e.videoPlayerId+"_fluid_control_volume").clientWidth,n=t.clientWidth;return n!==o},e.setLayout=()=>{const t=e.isTouchDevice()?"touchend":"click";e.domRef.player.addEventListener(t,()=>e.playPauseToggle(),!1),e.domRef.player.addEventListener("play",e.initialPlay,!1),e.setDefaultLayout()},e.handleFullscreen=()=>{"undefined"===typeof document.vastFullsreenChangeEventListenersAdded&&(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(t=>{"object"===typeof document["on"+t]&&document.addEventListener(t,(function(t){e.recalculateAdDimensions()}),!1)}),document.vastFullsreenChangeEventListenersAdded=!0)},e.setupPlayerWrapper=()=>{const t=document.createElement("div");return t.id="fluid_video_wrapper_"+e.videoPlayerId,t.className=e.isTouchDevice()?"fluid_video_wrapper mobile":"fluid_video_wrapper",e.displayOptions.layoutControls.fillToContainer?(t.style.width="100%",t.style.height="100%"):(t.style.height=e.domRef.player.clientHeight+"px",t.style.width=e.domRef.player.clientWidth+"px"),e.domRef.player.style.height="100%",e.domRef.player.style.width="100%",e.domRef.player.parentNode.insertBefore(t,e.domRef.player),t.appendChild(e.domRef.player),t},e.onErrorDetection=()=>{e.domRef.player.networkState===e.domRef.player.NETWORK_NO_SOURCE&&e.isCurrentlyPlayingAd&&e.playMainVideoWhenVastFails(401)},e.createVideoSourceSwitch=()=>{const t=[],o=e.domRef.player.querySelectorAll("source");if([].forEach.call(o,e=>{e.title&&e.src&&t.push({title:e.title,url:e.src,isHD:null!=e.getAttribute("data-fluid-hd")})}),e.videoSources=t,e.videoSources.length<=1)return;const n=document.getElementById(e.videoPlayerId+"_fluid_control_video_source");n.style.display="inline-block";let i=!1;const a=document.createElement("div");a.id=e.videoPlayerId+"_fluid_control_video_source_list",a.className="fluid_video_sources_list",a.style.display="none";let r=!0;for(const s of e.videoSources){const t=s.url.split(".").pop();if("iOS"===e.mobileInfo.userOs&&"mkv"===t)continue;const o=r?"source_selected":"",n=s.isHD?'<sup style="color:'+e.displayOptions.layoutControls.primaryColor+'" class="fp_hd_source"></sup>':"";r=!1;const l=document.createElement("div");l.id="source_"+e.videoPlayerId+"_"+s.title,l.className="fluid_video_source_list_item",l.innerHTML='<span class="source_button_icon '+o+'"></span>'+s.title+n,l.addEventListener("click",(function(t){t.stopPropagation(),e.domRef.player.style.width=e.domRef.player.clientWidth+"px",e.domRef.player.style.height=e.domRef.player.clientHeight+"px";const o=this,n=document.getElementsByClassName("source_button_icon");for(let e=0;e<n.length;e++)n[e].className=n[e].className.replace("source_selected","");o.firstChild.className+=" source_selected",e.videoSources.forEach(t=>{t.title===o.innerText.replace(/(\r\n\t|\n|\r\t)/gm,"")&&(e.setBuffering(),e.setVideoSource(t.url),e.fluidStorage.fluidQuality=t.title)}),e.openCloseVideoSourceSwitch()})),a.appendChild(l),i=!0}i?(n.appendChild(a),n.addEventListener("click",()=>{e.openCloseVideoSourceSwitch()})):document.getElementById(e.videoPlayerId+"_fluid_control_video_source").style.display="none"},e.openCloseVideoSourceSwitch=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_control_video_source_list");if(e.isCurrentlyPlayingAd)return void(t.style.display="none");if("none"!==t.style.display)return void(t.style.display="none");t.style.display="block";const o=()=>{t.removeEventListener("mouseleave",o),t.style.display="none"};t.addEventListener("mouseleave",o)},e.setVideoSource=t=>{if("iOS"===e.mobileInfo.userOs&&t.indexOf(".mkv")>0)return console.log("[FP_ERROR] .mkv files not supported by iOS devices."),!1;if(e.isCurrentlyPlayingAd)return void(e.originalSrc=t);e.isSwitchingSource=!0;let o=!1;e.domRef.player.paused||(e.domRef.player.pause(),o=!0);const n=e.domRef.player.currentTime;e.setCurrentTimeAndPlay(n,o),e.domRef.player.src=t,e.originalSrc=t,e.displayOptions.layoutControls.mediaType=e.getCurrentSrcType(),e.initialiseStreamers()},e.setCurrentTimeAndPlay=(t,o)=>{const n=()=>{e.domRef.player.currentTime=t,e.domRef.player.removeEventListener("loadedmetadata",n),"iOS"!==e.mobileInfo.userOs&&"safari"!==e.getBrowserVersion().browserName.toLowerCase()||e.domRef.player.addEventListener("playing",i),o?e.domRef.player.play():(e.domRef.player.pause(),e.controlPlayPauseToggle(e.videoPlayerId)),e.isSwitchingSource=!1,e.domRef.player.style.width="100%",e.domRef.player.style.height="100%"};let i=()=>{e.currentTime=t,e.domRef.player.removeEventListener("playing",i)};e.domRef.player.addEventListener("loadedmetadata",n,!1),e.domRef.player.load()},e.initTitle=()=>{if(!e.displayOptions.layoutControls.title)return;const t=document.createElement("div");t.id=e.videoPlayerId+"_title",e.domRef.player.parentNode.insertBefore(t,null),t.innerHTML+=e.displayOptions.layoutControls.title,t.classList.add("fp_title")},e.hasTitle=()=>{const t=document.getElementById(e.videoPlayerId+"_title"),o=e.displayOptions.layoutControls.title;return t&&null!=o},e.hideTitle=()=>{const t=document.getElementById(e.videoPlayerId+"_title");e.hasTitle()&&t.classList.add("fade_out")},e.showTitle=()=>{const t=document.getElementById(e.videoPlayerId+"_title");e.hasTitle()&&t.classList.remove("fade_out")},e.initLogo=()=>{if(!e.displayOptions.layoutControls.logo.imageUrl)return;const t=document.createElement("div");t.id=e.videoPlayerId+"_logo";let o="logo_maintain_display";e.displayOptions.layoutControls.logo.hideWithControls&&(o="initial_controls_show"),t.classList.add(o,"fp_logo");const n=document.createElement("img");n.id=e.videoPlayerId+"_logo_image",e.displayOptions.layoutControls.logo.imageUrl&&(n.src=e.displayOptions.layoutControls.logo.imageUrl),n.style.position="absolute",n.style.margin=e.displayOptions.layoutControls.logo.imageMargin;const i=e.displayOptions.layoutControls.logo.position.toLowerCase();-1!==i.indexOf("bottom")?n.style.bottom=0:n.style.top=0,-1!==i.indexOf("right")?n.style.right=0:n.style.left=0,e.displayOptions.layoutControls.logo.opacity&&(n.style.opacity=e.displayOptions.layoutControls.logo.opacity),null!==e.displayOptions.layoutControls.logo.clickUrl&&(n.style.cursor="pointer",n.addEventListener("click",(function(){const t=window.open(e.displayOptions.layoutControls.logo.clickUrl,"_blank");t.focus()}))),e.displayOptions.layoutControls.logo.mouseOverImageUrl&&(n.addEventListener("mouseover",(function(){n.src=e.displayOptions.layoutControls.logo.mouseOverImageUrl}),!1),n.addEventListener("mouseout",(function(){n.src=e.displayOptions.layoutControls.logo.imageUrl}),!1)),e.domRef.player.parentNode.insertBefore(t,null),t.appendChild(n,null)},e.initHtmlOnPauseBlock=()=>{if(e.hasValidOnPauseAd())return;if(!e.displayOptions.layoutControls.htmlOnPauseBlock.html)return;const t=document.createElement("div");t.id=e.videoPlayerId+"_fluid_html_on_pause",t.className="fluid_html_on_pause",t.style.display="none",t.innerHTML=e.displayOptions.layoutControls.htmlOnPauseBlock.html,t.onclick=function(t){e.playPauseToggle()},e.displayOptions.layoutControls.htmlOnPauseBlock.width&&(t.style.width=e.displayOptions.layoutControls.htmlOnPauseBlock.width+"px"),e.displayOptions.layoutControls.htmlOnPauseBlock.height&&(t.style.height=e.displayOptions.layoutControls.htmlOnPauseBlock.height+"px"),e.domRef.player.parentNode.insertBefore(t,null)},e.initPlayButton=()=>{const t=document.createElement("div");t.id=e.videoPlayerId+"_fluid_initial_play_button",t.className="fluid_html_on_pause";const o=e.displayOptions.layoutControls.primaryColor?e.displayOptions.layoutControls.primaryColor:"#333333";t.innerHTML='<div id="'+e.videoPlayerId+'_fluid_initial_play" class="fluid_initial_play" style="background-color:'+o+'"><div id="'+e.videoPlayerId+'_fluid_state_button" class="fluid_initial_play_button"></div></div>';const n=function(){e.playPauseToggle(),t.removeEventListener("click",n)};if(t.addEventListener("click",n),!e.displayOptions.layoutControls.playButtonShowing){const o=document.getElementById(e.videoPlayerId+"_fluid_controls_container");o.classList.add("initial_controls_show"),t.style.opacity="0"}e.domRef.player.parentNode.insertBefore(t,null)},e.mainVideoReady=()=>{if(0!==e.mainVideoDuration||e.isCurrentlyPlayingAd||!1!==e.mainVideoReadyState)return;const t=new CustomEvent("mainVideoDurationSet");e.mainVideoDuration=e.domRef.player.duration,e.mainVideoReadyState=!0,e.domRef.player.dispatchEvent(t),e.domRef.player.removeEventListener("loadedmetadata",e.mainVideoReady)},e.userActivityChecker=()=>{const t=e.domRef.wrapper;e.newActivity=null;let o=!1;const n=t=>{"touchstart"!==t.type&&"mousedown"!==t.type||(o=!0),"touchend"!==t.type&&"mouseup"!==t.type||(o=!1),e.newActivity=!0};setInterval(()=>{if(!0===e.newActivity){if(o||e.isLoading||(e.newActivity=!1),!1===e.isUserActive||!e.isControlBarVisible()){let t=new CustomEvent("userActive");e.domRef.player.dispatchEvent(t),e.isUserActive=!0}clearTimeout(e.inactivityTimeout),e.inactivityTimeout=setTimeout(()=>{if(!0===e.newActivity)return void clearTimeout(e.inactivityTimeout);e.isUserActive=!1;let t=new CustomEvent("userInactive");e.domRef.player.dispatchEvent(t)},1e3*e.displayOptions.layoutControls.controlBar.autoHideTimeout)}},300);const i=e.isTouchDevice()?["touchstart","touchmove","touchend"]:["mousemove","mousedown","mouseup"];for(let e=0;e<i.length;e++)t.addEventListener(i[e],n)},e.hasControlBar=()=>!!document.getElementById(e.videoPlayerId+"_fluid_controls_container"),e.isControlBarVisible=()=>{if(!1===e.hasControlBar())return!1;const t=document.getElementById(e.videoPlayerId+"_fluid_controls_container"),o=window.getComputedStyle(t,null);return!(0===o.opacity||"hidden"===o.visibility)},e.setVideoPreload=()=>{e.domRef.player.setAttribute("preload",e.displayOptions.layoutControls.preload)},e.hideControlBar=()=>{if(e.isCurrentlyPlayingAd&&!e.domRef.player.paused&&e.toggleAdCountdown(!0),e.domRef.player.style.cursor="none",!e.hasControlBar())return;const t=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_container"),o=e.domRef.player.parentNode.getElementsByClassName("fp_logo");for(let n=0;n<t.length;n++)e.displayOptions.layoutControls.controlBar.animated?(t[n].classList.remove("fade_in"),t[n].classList.add("fade_out")):t[n].style.display="none";for(let n=0;n<o.length;n++)e.displayOptions.layoutControls.controlBar.animated?o[n]&&(o[n].classList.remove("fade_in"),o[n].classList.add("fade_out")):o[n]&&(o[n].style.display="none")},e.showControlBar=()=>{if(e.isCurrentlyPlayingAd&&!e.domRef.player.paused&&e.toggleAdCountdown(!1),e.isTouchDevice()||(e.domRef.player.style.cursor="default"),!e.hasControlBar())return;const t=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_container"),o=e.domRef.player.parentNode.getElementsByClassName("fp_logo");for(let n=0;n<t.length;n++)e.displayOptions.layoutControls.controlBar.animated?(t[n].classList.remove("fade_out"),t[n].classList.add("fade_in")):t[n].style.display="block";for(let n=0;n<o.length;n++)e.displayOptions.layoutControls.controlBar.animated?o[n]&&(o[n].classList.remove("fade_out"),o[n].classList.add("fade_in")):o[n]&&(o[n].style.display="block")},e.linkControlBarUserActivity=()=>{e.domRef.player.addEventListener("userInactive",e.hideControlBar),e.domRef.player.addEventListener("userInactive",e.hideTitle),e.domRef.player.addEventListener("userActive",e.showControlBar),e.domRef.player.addEventListener("userActive",e.showTitle)},e.initMute=()=>{!0===e.displayOptions.layoutControls.mute&&(e.domRef.player.volume=0)},e.initLoop=()=>{e.domRef.player.loop=!!e.displayOptions.layoutControls.loop},e.setBuffering=()=>{let t;const o=e.domRef.player.parentNode.getElementsByClassName("fluid_controls_buffered");for(let e=0;e<o.length;e++)o[e].style.width=0;const n=()=>{const n=e.domRef.player.duration;if(!(n<=0))for(let i=0;i<e.domRef.player.buffered.length;i++){if(e.domRef.player.buffered.start(e.domRef.player.buffered.length-1-i)>=e.domRef.player.currentTime)continue;const a=e.domRef.player.buffered.end(e.domRef.player.buffered.length-1-i)/n*100+"%";for(let e=0;e<o.length;e++)o[e].style.width=a;t&&1===e.domRef.player.buffered.end(e.domRef.player.buffered.length-1-i)/n&&clearInterval(t);break}};t=setInterval(n,500)},e.createPlaybackList=()=>{const t=["x2","x1.5","x1","x0.5"];if(!e.displayOptions.layoutControls.playbackRateEnabled)return;document.getElementById(e.videoPlayerId+"_fluid_control_playback_rate").style.display="inline-block";const o=document.getElementById(e.videoPlayerId+"_fluid_control_playback_rate"),n=document.createElement("div");n.id=e.videoPlayerId+"_fluid_control_video_playback_rate",n.className="fluid_video_playback_rates",n.style.display="none",t.forEach((function(t){const o=document.createElement("div");o.className="fluid_video_playback_rates_item",o.innerText=t,o.addEventListener("click",(function(t){t.stopPropagation();let o=this.innerText.replace("x","");e.setPlaybackSpeed(o),e.openCloseVideoPlaybackRate()})),n.appendChild(o)})),o.appendChild(n),o.addEventListener("click",(function(){e.openCloseVideoPlaybackRate()}))},e.openCloseVideoPlaybackRate=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_control_video_playback_rate");if(e.isCurrentlyPlayingAd||"none"!==t.style.display)return void(t.style.display="none");t.style.display="block";const o=function(){t.removeEventListener("mouseleave",o),t.style.display="none"};t.addEventListener("mouseleave",o)},e.createDownload=()=>{const t=document.getElementById(e.videoPlayerId+"_fluid_control_download");if(!e.displayOptions.layoutControls.allowDownload)return;t.style.display="inline-block";let o=document.createElement("a");o.id=e.videoPlayerId+"_download",o.onclick=function(e){const t=this;"undefined"!==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation(),setInterval((function(){t.download="",t.href=""}),100)},t.appendChild(o),t.addEventListener("click",(function(){const t=document.getElementById(e.videoPlayerId+"_download");t.download=e.originalSrc,t.href=e.originalSrc,o.click()}))},e.theatreToggle=()=>{if(e.isInIframe)return;if(e.fullscreenMode&&e.fullscreenToggle(),e.displayOptions.layoutControls.theatreAdvanced){const t=document.getElementById(e.displayOptions.layoutControls.theatreAdvanced.theatreElement),o=e.displayOptions.layoutControls.theatreAdvanced.classToApply;null!=t&&null!=o?(e.theatreMode?t.classList.remove(o):t.classList.add(o),e.theatreModeAdvanced=!e.theatreModeAdvanced):(console.log("[FP_ERROR] Theatre mode elements could not be found, defaulting behaviour."),e.defaultTheatre())}else e.defaultTheatre();e.theatreMode=!e.theatreMode,e.fluidStorage.fluidTheatre=e.theatreMode;const t=e.theatreMode?"theatreModeOn":"theatreModeOff",o=document.createEvent("CustomEvent");o.initEvent(t,!1,!0),e.domRef.player.dispatchEvent(o),e.resizeVpaidAuto()},e.defaultTheatre=()=>{const t=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId);if(e.theatreMode)return t.classList.remove("fluid_theatre_mode"),t.style.maxHeight="",t.style.marginTop="",t.style.left="",t.style.right="",t.style.position="",void(e.displayOptions.layoutControls.fillToContainer?(t.style.width="100%",t.style.height="100%"):(t.style.width=e.originalWidth+"px",t.style.height=e.originalHeight+"px"));t.classList.add("fluid_theatre_mode");const o=e.displayOptions.layoutControls.theatreSettings.width;let n="10px";switch(t.style.width=o,t.style.height=e.displayOptions.layoutControls.theatreSettings.height,t.style.maxHeight=screen.height+"px",t.style.marginTop=e.displayOptions.layoutControls.theatreSettings.marginTop+"px",e.displayOptions.layoutControls.theatreSettings.horizontalAlign){case"center":"string"==typeof o&&"%"===o.substr(o.length-1)?n=(100-parseInt(o.substring(0,o.length-1)))/2+"%":"string"==typeof o&&"px"===o.substr(o.length-2)?n=(screen.width-parseInt(o.substring(0,o.length-2)))/screen.width*100/2+"%":console.log("[FP_ERROR] Theatre width specified invalid."),t.style.left=n;break;case"right":t.style.right=n;break;case"left":default:t.style.left=n;break}},e.posterImage=()=>{if(!e.displayOptions.layoutControls.posterImage)return;const t=document.createElement("div");t.id=e.videoPlayerId+"_fluid_pseudo_poster",t.className="fluid_pseudo_poster",-1!==["auto","contain","cover"].indexOf(e.displayOptions.layoutControls.posterImageSize)?(t.style.background="url('"+e.displayOptions.layoutControls.posterImage+"') center center / "+e.displayOptions.layoutControls.posterImageSize+" no-repeat black",e.domRef.player.parentNode.insertBefore(t,null)):console.log("[FP_ERROR] Not allowed value in posterImageSize")},e.nextSource=()=>{const t=e.domRef.player.getElementsByTagName("source");if(!t.length)return null;for(let o=0;o<t.length-1;o++)if(t[o].getAttribute("src")===e.originalSrc&&t[o+1].getAttribute("src"))return void e.setVideoSource(t[o+1].getAttribute("src"))},e.inIframe=()=>{try{return window.self!==window.top}catch(e){return!0}},e.setPersistentSettings=()=>{if("undefined"===typeof Storage||"undefined"===typeof localStorage)return;const t="_fp_storage_enabled",o=localStorage;try{o.setItem(t,"1"),o.removeItem(t)}catch(n){return!1}if(e.fluidStorage=localStorage,"undefined"!==typeof e.fluidStorage.fluidVolume&&e.displayOptions.layoutControls.persistentSettings.volume&&(e.setVolume(e.fluidStorage.fluidVolume),"undefined"!==typeof e.fluidStorage.fluidMute&&"true"===e.fluidStorage.fluidMute&&e.muteToggle()),"undefined"!==typeof e.fluidStorage.fluidQuality&&e.displayOptions.layoutControls.persistentSettings.quality){const t=document.getElementById("source_"+e.videoPlayerId+"_"+e.fluidStorage.fluidQuality),o=document.getElementById(e.videoPlayerId+"_fluid_control_video_source");t&&(t.click(),o.click())}"undefined"!==typeof e.fluidStorage.fluidSpeed&&e.displayOptions.layoutControls.persistentSettings.speed&&e.setPlaybackSpeed(e.fluidStorage.fluidSpeed),"undefined"!==typeof e.fluidStorage.fluidTheatre&&"true"===e.fluidStorage.fluidTheatre&&e.displayOptions.layoutControls.persistentSettings.theatre&&e.theatreToggle()},e.play=()=>{if(e.domRef.player.paused)return e.playPauseToggle(),!0},e.pause=()=>(e.domRef.player.paused||e.playPauseToggle(),!0),e.skipTo=t=>{e.domRef.player.currentTime=t},e.setPlaybackSpeed=t=>{e.isCurrentlyPlayingAd||(e.domRef.player.playbackRate=t,e.fluidStorage.fluidSpeed=t)},e.setVolume=t=>{e.domRef.player.volume=t;const o=0===t?1:t;e.latestVolume=o,e.fluidStorage.fluidVolume=o},e.isCurrentlyPlayingVideo=e=>e&&e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2,e.setHtmlOnPauseBlock=t=>{if("object"!=typeof t||"undefined"==typeof t.html)return!1;const o=document.getElementById(e.videoPlayerId+"_fluid_html_on_pause");if(!o){const o=document.createElement("div");return o.id=e.videoPlayerId+"_fluid_html_on_pause",o.className="fluid_html_on_pause",o.style.display="none",o.innerHTML=t.html,o.onclick=function(){e.playPauseToggle()},t.width&&(o.style.width=t.width+"px"),t.height&&(o.style.height=t.height+"px"),void e.domRef.player.parentNode.insertBefore(o,null)}o.innerHTML=t.html,t.width&&(o.style.width=t.width+"px"),t.height&&(o.style.height=t.height+"px")},e.toggleControlBar=t=>{const o=document.getElementById(e.videoPlayerId+"fluid_controls_container");t?o.className+=" initial_controls_show":o.className=o.className.replace(" initial_controls_show","")},e.on=(t,o)=>{switch(t){case"play":e.domRef.player.onplay=o;break;case"seeked":e.domRef.player.onseeked=o;break;case"ended":e.domRef.player.onended=o;break;case"pause":e.domRef.player.addEventListener("pause",()=>{e.fluidPseudoPause||o()});break;case"playing":e.domRef.player.addEventListener("playing",o);break;case"theatreModeOn":e.domRef.player.addEventListener("theatreModeOn",o);break;case"theatreModeOff":e.domRef.player.addEventListener("theatreModeOff",o);break;case"timeupdate":e.domRef.player.addEventListener("timeupdate",()=>{o(e.getCurrentTime())});break;default:console.log("[FP_ERROR] Event not recognised");break}},e.toggleLogo=t=>{if("object"!=typeof t||!t.imageUrl)return!1;const o=document.getElementById(e.videoPlayerId+"_logo");e.displayOptions.layoutControls.logo.imageUrl=t.imageUrl?t.imageUrl:null,e.displayOptions.layoutControls.logo.position=t.position?t.position:"top left",e.displayOptions.layoutControls.logo.clickUrl=t.clickUrl?t.clickUrl:null,e.displayOptions.layoutControls.logo.opacity=t.opacity?t.opacity:1,e.displayOptions.layoutControls.logo.mouseOverImageUrl=t.mouseOverImageUrl?t.mouseOverImageUrl:null,e.displayOptions.layoutControls.logo.imageMargin=t.imageMargin?t.imageMargin:"2px",e.displayOptions.layoutControls.logo.hideWithControls=!!t.hideWithControls&&t.hideWithControls,e.displayOptions.layoutControls.logo.showOverAds=!!t.showOverAds&&t.showOverAds,o&&o.remove(),e.initLogo()},e.trackEvent=(t,o,n,i)=>{"undefined"===typeof e.events[n]&&(e.events[n]={}),"undefined"===typeof e.events[n][o]&&(e.events[n][o]=[]),e.events[n][o].push(i),e.registerListener(t,o,n,i)},e.registerListener=(e,t,o,n)=>{const i=e.querySelectorAll(o);for(let a=0;a<i.length;a++)i[a].addEventListener(t,n)},e.copyEvents=t=>{for(let o in e.events)if(e.events.hasOwnProperty(o))for(let n in e.events[o])if(e.events[o].hasOwnProperty(n))for(let i=0;i<e.events[o][n].length;i++)e.registerListener(t,n,o,e.events[o][n][i])},e.destroy=()=>{const t=e.destructors.length;if(0===t)return;for(let n=0;n<t;++n)e.destructors[n].bind(this)();const o=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId);o?"function"!==typeof o.remove?o.parentNode?o.parentNode.removeChild(o):console.error("Unable to remove wrapper element for Fluid Player instance - no parent"+e.videoPlayerId):o.remove():console.warn("Unable to remove wrapper element for Fluid Player instance - element not found "+e.videoPlayerId)}},g=function(e){this.play=()=>e.play(),this.pause=()=>e.pause(),this.skipTo=t=>e.skipTo(t),this.setPlaybackSpeed=t=>e.setPlaybackSpeed(t),this.setVolume=t=>e.setVolume(t),this.setHtmlOnPauseBlock=t=>e.setHtmlOnPauseBlock(t),this.toggleControlBar=t=>e.toggleControlBar(t),this.toggleFullScreen=t=>e.fullscreenToggle(t),this.destroy=()=>e.destroy(),this.dashInstance=()=>e.dashPlayer?e.dashPlayer:null,this.hlsInstance=()=>e.hlsPlayer?e.hlsPlayer:null,this.on=(t,o)=>e.on(t,o)},v=function(e,t){const o=new y;t||(t={}),o.init(e,t);const n=new g(o);if(window&&p){const i={id:e,options:t,instance:n,internals:o};"undefined"===typeof window.fluidPlayerDebug&&(window.fluidPlayerDebug=[]),window.fluidPlayerDebug.push(i),console.log("Created instance of Fluid Player. Debug API available at window.fluidPlayerDebug["+(window.fluidPlayerDebug.length-1)+"].",i)}return n};p&&console.log("Fluid Player - Development Build"+(m?" (in debug mode)":""));t["a"]=v},"9e5f":function(e,t,o){"use strict";o("5515")},a991:function(e,t,o){},b3fd:function(e,t,o){},b5a7:function(e,t,o){},b663:function(e,t,o){},c64f:function(e,t,o){var n=o("c6da"),i=o("7faf"),a=o("16bc"),r=o("a9fd"),s=o("2b5b"),l=o("ba60"),d=n.TypeError;e.exports=function(e,t){var o=e.exec;if(r(o)){var n=i(o,e,t);return null!==n&&a(n),n}if("RegExp"===s(e))return i(l,e,t);throw d("RegExp#exec called on incompatible receiver")}},e4bb:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fill-height",attrs:{id:"history"}},[o("v-container",{staticClass:"pt-0 pb-0 fill-height",attrs:{fluid:""}},[o("v-row",{staticClass:"fill-height"},[o("v-col",{staticClass:"pt-8 pl-8",attrs:{cols:"12",sm:"12",order:"2","order-sm":"2","order-md":"1","order-lg":"1",md:"7",lg:"7"}},[o("h1",{staticClass:"title font-weight-medium pb-5"},[e._v(e._s(e.historyType))]),"Watch History"==e.historyType?[e.histories.length<=0&&!e.loading?[o("p",{staticClass:"text-center body-1"},[e._v("No watch history yet.")])]:e._e(),o("section",[e._l(e.loading?12:e.histories,(function(t,n){return o("div",{key:n,staticClass:"mb-5"},[o("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-avatar-three-line",loading:e.loading,tile:"",large:""}},[o("v-card",{staticClass:"card",attrs:{tile:"",flat:""}},[t.videoId?o("v-row",{attrs:{"no-gutters":""}},[o("v-col",{staticClass:"mx-auto",attrs:{cols:"3",sm:"3",md:"5",lg:"5"}},[o("v-img",{staticClass:"align-center",attrs:{src:e.getUrl+"/uploads/thumbnails/"+t.videoId.thumbnailUrl}})],1),o("v-col",[o("div",{staticClass:"ml-2"},[o("v-card-title",{staticClass:"pl-2 pt-0 subtitle-1 font-weight-bold d-flex justify-space-between",staticStyle:{"line-height":"1"}},[e._v(" "+e._s(t.videoId.title)+" "),o("v-btn",{attrs:{text:""},on:{click:function(o){return e.deleteHistory(t._id)}}},[o("v-icon",[e._v("mdi-close")])],1)],1),o("v-card-subtitle",{staticClass:"pl-2 pt-2 pb-0",staticStyle:{"line-height":"1"}},[e._v(" "+e._s(t.userId.channelName)),o("v-icon",[e._v("mdi-circle-small")]),e._v(e._s(t.videoId.views)+" views ")],1),o("v-card-subtitle",{staticClass:"pl-2 pt-2 pb-0"},[e._v(" "+e._s(t.videoId.description)+" ")])],1)])],1):e._e()],1)],1)],1)})),o("infinite-loading",{attrs:{identifier:e.infiniteId},on:{infinite:e.getHistories},scopedSlots:e._u([{key:"error",fn:function(t){var n=t.trigger;return o("div",{},[o("v-alert",{attrs:{prominent:"",type:"error"}},[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"grow"},[o("div",{staticClass:"title"},[e._v("Error!")]),o("div",[e._v(" Something went wrong, but don’t fret — let’s give it another shot. ")])]),o("v-col",{staticClass:"shrink"},[o("v-btn",{on:{click:n}},[e._v("Take action")])],1)],1)],1)],1)}}],null,!1,2497732993)},[o("div",{attrs:{slot:"spinner"},slot:"spinner"},[o("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1),o("div",{attrs:{slot:"no-results"},slot:"no-results"}),o("span",{attrs:{slot:"no-more"},slot:"no-more"})])],2)]:[e.histories.length<=0&&!e.loading?[o("p",{staticClass:"text-center body-1"},[e._v("No search history yet.")])]:e._e(),o("div",[e._l(e.loading?12:e.histories,(function(t,n){return o("div",{key:n},[o("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-two-line",loading:e.loading,tile:"",large:""}},[o("v-card",{staticClass:"card d-flex pl-0",attrs:{flat:""}},[o("v-card-text",{staticClass:"pl-0 py-0"},[o("v-card-title",{staticClass:"pl-0 black--text text--lighten-5 subtitle-1 font-weight-medium"},[e._v(e._s(t.searchText))]),o("v-card-subtitle",{staticClass:"pl-0 pb-0"},[e._v(e._s(e.dateFormatter(t.createdAt)))])],1),o("v-card-actions",[o("v-btn",{staticClass:"grey--text",attrs:{text:"",fab:""},on:{click:function(o){return e.deleteHistory(t._id)}}},[o("v-icon",[e._v("mdi-close")])],1)],1)],1)],1)],1)})),o("infinite-loading",{attrs:{identifier:e.infiniteId},on:{infinite:e.getHistories},scopedSlots:e._u([{key:"error",fn:function(t){var n=t.trigger;return o("div",{},[o("v-alert",{attrs:{prominent:"",type:"error"}},[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"grow"},[o("div",{staticClass:"title"},[e._v("Error!")]),o("div",[e._v(" Something went wrong, but don’t fret — let’s give it another shot. ")])]),o("v-col",{staticClass:"shrink"},[o("v-btn",{on:{click:n}},[e._v("Take action")])],1)],1)],1)],1)}}])},[o("div",{attrs:{slot:"spinner"},slot:"spinner"},[o("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1),o("div",{attrs:{slot:"no-results"},slot:"no-results"}),o("span",{attrs:{slot:"no-more"},slot:"no-more"})])],2)]],2),o("v-col",{class:["pa-0",{"fill-height":!!e.$vuetify.breakpoint.name.smAndDown}],attrs:{cols:"12",sm:"12",order:"1","order-sm":"1","order-md":"2","order-lg":"2",md:"5",lg:"5"}},[o("v-card",{staticClass:"fill-height grey lighten-4 pa-10",attrs:{flat:"",id:"card-radiobox"}},[o("v-radio-group",{model:{value:e.historyType,callback:function(t){e.historyType=t},expression:"historyType"}},[o("p",{staticClass:"title font-weight-regular pl-5 mb-2"},[e._v("History Type")]),o("v-list",{staticClass:" grey lighten-4"},[o("v-list-item-group",[e._l(e.items,(function(t,n){return[o("v-divider",{key:n}),o("v-list-item",{key:"item-"+n,staticClass:"py-2",attrs:{"active-class":"grey lighten-4"},on:{click:function(o){return e.clickItem(t)}}},[o("v-list-item-content",[o("v-list-item-title",{domProps:{textContent:e._s(t)}})],1),o("v-list-item-action",[o("v-radio",{key:t,attrs:{value:t}})],1)],1)]}))],2)],1),o("div",[o("v-btn",{attrs:{text:"",loading:e.clearLoading},on:{click:e.clearHistory}},[e._v("Clear all "+e._s(e.historyType))])],1)],1)],1)],1)],1)],1),o("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.deleteMessage)+" "),o("v-btn",{attrs:{color:"white",text:"",icon:""},on:{click:function(t){e.snackbar=!1}}},[o("v-icon",[e._v("mdi-close-circle")])],1)],1)],1)},i=[],a=o("c1f9"),r=o("b5e5"),s=o("a19a"),l=(o("e186"),o("a9b6"),o("28fd"),o("3bdf"),o("caaf")),d=o.n(l),c=o("7736"),u=o("801c"),p=o("1a5f"),m=o.n(p),f={data:function(){return{loading:!1,loaded:!1,errored:!1,snackbar:!1,deleteMessage:"",items:["Watch History","Search History"],historyType:"Watch History",histories:[],page:1,infiniteId:+new Date,clearLoading:!1}},computed:Object(s["a"])({},Object(c["b"])(["currentUser","getUrl"])),methods:{getHistories:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,i,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.errored=!1,t.loaded||(t.loading=!0),n={page:t.page,type:"Watch History"===t.historyType?"watch":"search"},o.next=5,u["a"].getAll(n).catch((function(e){t.errored=!0,console.log(e)})).finally((function(){t.loading=!1}));case 5:if(i=o.sent,i){o.next=8;break}return o.abrupt("return");case 8:i.data.data.length?(t.page+=1,(r=t.histories).push.apply(r,Object(a["a"])(i.data.data)),e&&e.loaded(),t.loaded=!0):e&&e.complete();case 9:case"end":return o.stop()}}),o)})))()},clearHistory:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clearLoading=!0,o="Watch History"===e.historyType?"watch":"search",t.next=4,u["a"].deleteAll(o).catch((function(e){console.log(e)})).finally((function(){e.histories=e.histories.filter((function(e){return e.type!==o})),e.clearLoading=!1,e.deleteMessage="".concat(e.historyType," Cleared Successfully"),e.snackbar=!0}));case 4:case"end":return t.stop()}}),t)})))()},deleteHistory:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return t.histories=t.histories.filter((function(t){return t._id.toString()!==e.toString()})),o.next=3,u["a"].deleteById(e).catch((function(e){console.log(e)})).finally((function(){t.deleteMessage="History Deleted Successfully",t.snackbar=!0}));case 3:case"end":return o.stop()}}),o)})))()},clickItem:function(e){this.historyType=e,this.page=1,this.histories=[],this.infiniteId+=1},dateFormatter:function(e){return d()(e).fromNow()}},components:{InfiniteLoading:m.a},mounted:function(){this.getHistories()}},y=f,g=o("cba8"),v=o("72e9"),h=o.n(v),_=o("ff9c"),b=o("3df0"),C=o("c0ce"),k=o("c615"),w=o("8742"),P=o("262a"),E=o("dc3e"),A=o("1e55"),I=o("d46d"),T=o("4814"),L=o("1562"),O=o("3677"),R=o("3858"),V=o("d5b1"),S=o("d924"),B=(o("a991"),o("58d0")),x=o("f77f"),N=o("122c"),M=o("471d"),D=o("bd98"),F=o("fe4f"),U=o("1c73"),j=o("430a"),H=j["a"].extend({name:"rippleable",directives:{ripple:U["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(e={}){return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}}),W=o("cf9e"),z=o("a728"),$=o("89ea");function G(e){e.preventDefault()}var q=Object($["a"])(N["a"],H,z["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const e=this.value,t=this.internalValue;return this.isMultiple?!!Array.isArray(t)&&t.some(t=>this.valueComparator(t,e)):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,t):Boolean(t):this.valueComparator(t,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel(){const e=N["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:G},e):e},genInput(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:G},ref:"input"})},onBlur(){this.isFocused=!1},onClick(e){this.onChange(),this.$emit("click",e)},onChange(){if(!this.isInteractive)return;const e=this.value;let t=this.internalValue;if(this.isMultiple){Array.isArray(t)||(t=[]);const o=t.length;t=t.filter(t=>!this.valueComparator(t,e)),t.length===o&&t.push(e)}else t=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(t,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(t,e)?null:e:!t;this.validate(!0,t),this.internalValue=t,this.hasColor=t},onFocus(){this.isFocused=!0},onKeydown(e){}}}),X=o("bd15"),K=o("c132");const Q=Object($["a"])(M["a"],D["a"],H,Object(F["a"])("radioGroup"),W["a"]);var J=Q.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:()=>({isFocused:!1}),computed:{classes(){return{"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused,...this.themeClasses,...this.groupClasses}},computedColor(){return q.options.computed.computedColor.call(this)},computedIcon(){return this.isActive?this.onIcon:this.offIcon},computedId(){return N["a"].options.computed.computedId.call(this)},hasLabel:N["a"].options.computed.hasLabel,hasState(){return(this.radioGroup||{}).hasState},isDisabled(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||"radio-"+this.radioGroup._uid},rippleState(){return q.options.computed.rippleState.call(this)},validationState(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput(e){return q.options.methods.genInput.call(this,"radio",e)},genLabel(){return this.hasLabel?this.$createElement(B["a"],{on:{click:G},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},Object(X["s"])(this,"label")||this.label):null},genRadio(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(x["a"],this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput({name:this.computedName,value:this.value,...t}),this.genRipple(this.setTextColor(this.rippleState))])},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onChange(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:()=>{}},render(e){const t={staticClass:"v-radio",class:this.classes,on:Object(K["c"])({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}};return e("div",t,[this.genRadio(),this.genLabel()])}}),Y=(o("b3fd"),o("329d"),o("65f6"));const Z=Object($["a"])(z["a"],Y["a"],N["a"]);var ee=Z.extend({name:"v-radio-group",provide(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes(){return{...N["a"].options.computed.classes.call(this),"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row}}},methods:{genDefaultSlot(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},N["a"].options.methods.genDefaultSlot.call(this))},genInputSlot(){const e=N["a"].options.methods.genInputSlot.call(this);return delete e.data.on.click,e},genLabel(){const e=N["a"].options.methods.genLabel.call(this);return e?(e.data.attrs.id=this.computedId,delete e.data.attrs.for,e.tag="legend",e):null},onClick:Y["a"].options.methods.onClick}}),te=o("a519"),oe=o("6f1f"),ne=o("5f63"),ie=Object(g["a"])(y,n,i,!1,null,"4b599428",null);t["default"]=ie.exports;h()(ie,{VAlert:_["a"],VBtn:b["a"],VCard:C["a"],VCardActions:k["a"],VCardSubtitle:k["b"],VCardText:k["c"],VCardTitle:k["d"],VCol:w["a"],VContainer:P["a"],VDivider:E["a"],VIcon:A["a"],VImg:I["a"],VList:T["a"],VListItem:L["a"],VListItemAction:O["a"],VListItemContent:R["a"],VListItemGroup:V["a"],VListItemTitle:R["c"],VProgressCircular:S["a"],VRadio:J,VRadioGroup:ee,VRow:te["a"],VSkeletonLoader:oe["a"],VSnackbar:ne["a"]})},e63d:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pa-4 pl-0",attrs:{id:"video"}},[o("h2",[e._v("channel videos")]),o("v-tabs",{staticClass:"mt-5",attrs:{id:"tab"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[o("v-tab",[e._v(" Uploads ")]),o("v-tab",[e._v(" Live ")])],1),o("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[o("v-tab-item",[[o("v-card",{attrs:{flat:""}},[o("v-card-title",[o("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Filter","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("v-data-table",{attrs:{"no-data-text":"No videos available, please upload video.",headers:e.headers,items:e.videos,search:e.search,loading:e.loading,"loading-text":"Loading... Please wait"},scopedSlots:e._u([{key:"item.feelings",fn:function(t){var n=t.item;return[o("span",{staticClass:"mr-3"},[o("v-icon",{staticClass:"pr-1",attrs:{small:""}},[e._v("mdi-thumb-up")]),e._v(e._s(n.likes))],1),o("span",[o("v-icon",{staticClass:"pr-1",attrs:{small:""}},[e._v("mdi-thumb-down")]),e._v(e._s(n.dislikes))],1)]}},{key:"top",fn:function(){return[o("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[e._v("Permanently delete this video?")])]),o("v-card-text",[o("v-container",[o("v-card",{staticClass:"card",attrs:{tile:"",flat:""}},[o("v-row",{attrs:{"no-gutters":""}},[o("v-col",{attrs:{cols:"3",sm:"2",md:"5",lg:"5"}},[o("v-img",{staticClass:"align-center",attrs:{src:e.url+"/uploads/thumbnails/"+e.itemToDelete.thumbnailUrl}})],1),o("v-col",[o("div",{staticClass:"ml-2"},[o("v-card-title",{staticClass:"pl-2 subtitle-1 font-weight-bold",staticStyle:{"line-height":"1"}},[e._v(" "+e._s(e.itemToDelete.title)+" ")]),o("v-card-subtitle",{staticClass:"pl-2 pt-2 pb-0",staticStyle:{"line-height":"1"}},[e._v(" Published "+e._s(e.dateFormatter(e.itemToDelete.createdAt))+" "),o("br"),e._v(" "+e._s(e.itemToDelete.views)+" views ")])],1)])],1)],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogDelete=!e.dialogDelete}}},[e._v("Cancel")]),o("v-btn",{attrs:{loading:e.deleteBtnLoading,color:"blue darken-1",text:""},on:{click:e.deleteItem}},[e._v("Delete Forever")])],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var n=t.item;return[o("v-btn",{staticClass:"mr-2",attrs:{icon:"",href:"",text:""}},[o("v-icon",{on:{click:function(t){return e.editItem(n)}}},[e._v(" mdi-pencil ")])],1),o("v-btn",{staticClass:"mr-2",attrs:{icon:"",href:"",text:"",router:"",to:"/watch/"+n._id}},[o("v-icon",[e._v(" mdi-youtube ")])],1),o("v-btn",{attrs:{icon:"",text:""},on:{click:function(t){return t.stopPropagation(),e.deleteBtn(n)}}},[o("v-icon",[e._v(" mdi-delete ")])],1)]}}])})],1)]],2),o("v-tab-item",[e._v(" live ")])],1),o("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" Video deleted successfully "),o("v-btn",{attrs:{color:"white",text:"",icon:""},on:{click:function(t){e.snackbar=!1}}},[o("v-icon",[e._v("mdi-close-circle")])],1)],1)],1)},i=[],a=o("b5e5"),r=(o("e186"),o("a9b6"),o("28fd"),o("7b4e")),s=o("caaf"),l=o.n(s),d={data:function(){return{loading:!1,deleteBtnLoading:!1,snackbar:!1,dialogDelete:!1,tab:null,search:"",url:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_URL,headers:[{text:"Video",align:"start",value:"title"},{text:"Visibility",value:"status"},{text:"Views",value:"views"},{text:"Comments",value:"comments"},{text:"Likes (vs. dislikes)",value:"feelings"},{text:"Actions",value:"actions",sortable:!1}],videos:[],itemToDelete:{}}},methods:{getVideos:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,r["a"].getAll("private",{limit:0}).catch((function(e){console.log(e)})).finally((function(){return e.loading=!1}));case 3:if(o=t.sent,o){t.next=6;break}return t.abrupt("return");case 6:e.videos=o.data.data;case 7:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.$router.push({name:"Detail",params:{id:e.id}})},deleteBtn:function(e){this.dialogDelete=!0,this.itemToDelete=e},deleteItem:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.deleteBtnLoading=!0,t.next=3,r["a"].deleteById(e.itemToDelete._id).catch((function(e){return console.log(e)})).finally((function(){e.videos=e.videos.filter((function(t){return e.itemToDelete.id!==t.id})),e.deleteBtnLoading=!1,e.dialogDelete=!1,e.itemToDelete={},e.snackbar=!0}));case 3:case"end":return t.stop()}}),t)})))()},dateFormatter:function(e){return l()(e).fromNow()}},mounted:function(){this.getVideos()},beforeRouteUpdate:function(e,t,o){this.getVideos(),o()}},c=d,u=(o("3f2f"),o("cba8")),p=o("72e9"),m=o.n(p),f=o("3df0"),y=o("c0ce"),g=o("c615"),v=o("8742"),h=o("262a"),_=o("c35a"),b=o("4a8d"),C=o("1e55"),k=o("d46d"),w=o("a519"),P=o("5f63"),E=o("4f27"),A=o("214d"),I=o("8ff6"),T=o("e253"),L=o("f88e"),O=o("69fa"),R=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=R.exports;m()(R,{VBtn:f["a"],VCard:y["a"],VCardActions:g["a"],VCardSubtitle:g["b"],VCardText:g["c"],VCardTitle:g["d"],VCol:v["a"],VContainer:h["a"],VDataTable:_["a"],VDialog:b["a"],VIcon:C["a"],VImg:k["a"],VRow:w["a"],VSnackbar:P["a"],VSpacer:E["a"],VTab:A["a"],VTabItem:I["a"],VTabs:T["a"],VTabsItems:L["a"],VTextField:O["a"]})},f370:function(e,t,o){"use strict";(function(e,n){o("750d");var i=o("9772");if("undefined"===typeof FP_HOMEPAGE&&(e.FP_HOMEPAGE="https://fluidplayer.com"),"undefined"===typeof FP_BUILD_VERSION&&(e.FP_BUILD_VERSION="v3"),"undefined"===typeof FP_ENV){const t=window&&window.location&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||""===window.location.hostname);n&&Object({NODE_ENV:"production",BASE_URL:"/"})||window&&!t?e.FP_ENV="production":e.FP_ENV="development"}"undefined"===typeof FP_DEBUG&&(e.FP_DEBUG=!1),t["a"]=i["a"]}).call(this,o("2409"),o("eef6"))}}]);
//# sourceMappingURL=video.c2224bc9.js.map