(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3232c3eb"],{"006a":function(e,t,r){},"1df9":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"watch",staticClass:" black",attrs:{id:"watch"}},[r("v-container",{attrs:{fluid:""}},[r("v-row",[e.errored?r("v-alert",{staticClass:"mx-auto",attrs:{prominent:"",type:"error"}},[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"grow"},[r("div",{staticClass:"title"},[e._v("Error!")]),r("div",[e._v(" 오류가 났습니다. 다시 시도하시기를 클릭하십시오. ")])]),r("v-col",{staticClass:"shrink"},[r("v-btn",{on:{click:e.actions}},[e._v("새로 고침해주세요")])],1)],1)],1):r("v-col",{staticClass:"mx-auto",attrs:{cols:"11"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"8",lg:"8"}},[r("v-skeleton-loader",{attrs:{type:"card-avatar, article, actions",tile:"",large:""}},[r("div",{ref:"hello"},[r("v-responsive",{attrs:{"max-height":"550"}},[r("nuevo-player",{attrs:{options:e.options}})],1),r("v-card",{staticClass:"card",attrs:{flat:"",tile:"",color:"black"}},[r("v-card-title",{staticClass:"pl-0 pb-0"},[e._v(e._s(e.video.title))]),r("div",{staticClass:"d-flex flex-wrap justify-space-between",attrs:{id:"btns"}},[r("v-card-subtitle",{staticClass:"pl-0 pt-0 pb-0 subtitle-1",staticStyle:{"line-height":"2.4em"}},[e._v(" "+e._s(e.video.views)+" 조회 "),r("v-icon",[e._v("mdi-circle-small")]),e._v(e._s(e.video.CreatedAt)+" ")],1),r("v-card-actions",{staticClass:"pt-0 pl-0"},[r("v-btn",{attrs:{text:""}},[r("v-icon",{class:"pr-2"+("like"!==e.feeling?" grey--text text--darken-1":"")},[e._v("mdi-thumb-up")]),e._v(e._s(e.video.likes))],1),r("v-btn",{attrs:{text:""}},[r("v-icon",{class:"pr-2"+("dislike"!==e.feeling?" grey--text text--darken-1":"")},[e._v("mdi-thumb-down")]),e._v(" "+e._s(e.video.dislikes))],1)],1)],1)],1)],1),e._l(e.posters,(function(e){return r("div",{key:e._id},[r("v-card",{attrs:{width:"100%",href:e.href,target:"_blank"}},[r("v-img",{staticClass:"grey darken-4",attrs:{src:e.pic_url,"max-height":"600",width:"100%",contain:""}})],1)],1)}))],2)],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"4",lg:"4"},scopedSlots:e._u([{key:"error",fn:function(t){var a=t.trigger;return r("div",{},[r("v-alert",{attrs:{prominent:"",type:"error"}},[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"grow"},[r("div",{staticClass:"title"},[e._v("Error!")]),r("div",[e._v(" 오류가 났습니다. 다시 시도하시기를 클릭하십시오. ")])]),r("v-col",{staticClass:"shrink"},[r("v-btn",{on:{click:a}},[e._v("새로 고침하기")])],1)],1)],1)],1)}}])},[r("hr",{staticClass:"grey--text"}),r("h4",{staticClass:"mb-3 mt-3"},[e._v(" 추 천 ")]),e._l(e.videos,(function(t,a){return r("div",{key:a,staticClass:"mb-5"},[r("v-card",{staticClass:"card",attrs:{tile:"",flat:"",color:"black"},on:{click:function(r){return e.nextVideo(t._id)}}},[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{staticClass:"mx-auto",attrs:{cols:"12",sm:"12",md:"5",lg:"5"}},[r("v-img",{staticClass:"align-center",attrs:{height:"110",src:t.thumbnailUrl}})],1),r("v-col",[r("div",{staticClass:"ml-2"},[r("v-card-title",{staticClass:"pl-2 pt-0 subtitle-1 font-weight-bold",staticStyle:{"line-height":"1"}},[e._v(" "+e._s(t.title)+" ")]),r("v-card-subtitle",{staticClass:"pl-2 pt-2 pb-0",staticStyle:{"line-height":"1"}},[e._v(" "+e._s(t.userId.channelName)),r("br"),e._v(" "+e._s(t.views)+" 시청하기 "),r("v-icon",[e._v("mdi-circle-small")]),e._v(" "+e._s(e.dateFormatter(t.CreatedAt))+" ")],1)],1)])],1)],1)],1)})),r("div",{attrs:{slot:"spinner"},slot:"spinner"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1),r("div",{attrs:{slot:"no-results"},slot:"no-results"}),r("span",{attrs:{slot:"no-more"},slot:"no-more"})],2)],1)],1)],1)],1),r("signin-modal",{attrs:{openModal:e.signinDialog,details:e.details},on:{closeModal:function(t){e.signinDialog=!1}}})],1)},n=[],i=r("2909"),s=r("1da1"),o=r("5530"),c=(r("96cf"),r("d3b7"),r("159b"),r("fb6a"),r("c1df")),l=r.n(c),u=r("2f62"),d=r("7b4e"),v=r("e7f4"),g=r("444b"),p=r("931e"),f=r("92ea"),b={name:"watchChina2",components:{SigninModal:p["a"],NuevoPlayer:f["a"]},data:function(){return{options:{posterUrl:"",url:"",ads:"",href:""},posters:[],videoOptions:{autoplay:!1,controls:!0,muted:!1,sources:[]},loading:!1,loaded:!1,errored:!1,videoLoading:!1,subscribed:!1,subscribeLoading:!1,showSubBtn:!0,feeling:"",video:{},videos:[],page:0,signinDialog:!1,details:{}}},computed:Object(o["a"])({},Object(u["b"])(["currentUser","getUrl","isAuthenticated"])),methods:{nextVideo:function(e){this.$router.push("/china2/"+e),window.location.reload()},getPosters:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].getPosters({typee:3});case 2:r=t.sent,r.data.data.forEach((function(t){e.posters.push(t)}));case 4:case"end":return t.stop()}}),t)})))()},getVideo:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.errored=!1,t.videoLoading=!0,t.video={},r.prev=3,r.next=6,d["a"].getChina2ById(e);case 6:return a=r.sent,r.next=9,d["a"].getPosters({typee:4});case 9:if(n=r.sent,a){r.next=12;break}return r.abrupt("return",t.$router.push("/"));case 12:t.video=a.data.data[0],i=a.data.data[0].url,t.options.posterUrl=a.data.data[0].thumbnailUrl,t.options.url=i,t.options.ads=n.data.data[0].video_url,t.options.href=n.data.data[0].href,r.next=24;break;case 20:r.prev=20,r.t0=r["catch"](3),t.errored=!0,console.log(r.t0);case 24:case"end":return r.stop()}}),r,null,[[3,20]])})))()},getVideos:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.errored=!1,t.loaded||(t.loading=!0),a=[1,2,3,4,5,6,7],n=a[Math.floor(Math.random()*a.length)],r.next=6,d["a"].getAll("china2",{page:t.page,classify:n}).catch((function(e){console.log(e),t.errored=!0})).finally((function(){return t.loading=!1}));case 6:if(s=r.sent,"undefined"!==typeof s){r.next=9;break}return r.abrupt("return");case 9:s.data.data.length?((o=t.videos).push.apply(o,Object(i["a"])(s.data.data)),e&&e.loaded(),t.loaded=!0):e&&e.complete();case 10:case"end":return r.stop()}}),r)})))()},checkSubscription:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.isAuthenticated){r.next=2;break}return r.abrupt("return");case 2:return t.loading=!0,r.next=5,v["a"].checkSubscription({channelId:e}).catch((function(e){console.log(e)})).finally((function(){t.loading=!1}));case 5:if(a=r.sent,a){r.next=8;break}return r.abrupt("return");case 8:a.data.data._id?t.subscribed=!0:t.subscribed=!1;case 9:case"end":return r.stop()}}),r)})))()},checkFeeling:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.isAuthenticated){r.next=2;break}return r.abrupt("return");case 2:return t.loading=!0,r.next=5,g["a"].checkFeeling({videoId:e}).catch((function(e){console.log(e)})).finally((function(){t.loading=!1}));case 5:if(a=r.sent,a){r.next=8;break}return r.abrupt("return");case 8:"like"===a.data.data.feeling?t.feeling="like":"dislike"===a.data.data.feeling&&(t.feeling="dislike");case 9:case"end":return r.stop()}}),r)})))()},createFeeling:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.isAuthenticated){r.next=4;break}return t.signinDialog=!0,t.details={title:"like"===e?"Like this video?":"Don't like this video?",text:"Sign in to make your opinion count."},r.abrupt("return");case 4:r.t0=!0,r.next=r.t0===("like"===e&&""===t.feeling)?7:r.t0===("like"===e&&t.feeling===e)?10:r.t0===("like"===e&&"dislike"===t.feeling)?13:r.t0===("dislike"===e&&""===t.feeling)?17:r.t0===("dislike"===e&&t.feeling===e)?20:r.t0===("dislike"===e&&"like"===t.feeling)?23:26;break;case 7:return t.feeling="like",t.video.likes++,r.abrupt("break",26);case 10:return t.feeling="",t.video.likes--,r.abrupt("break",26);case 13:return t.feeling="like",t.video.dislikes--,t.video.likes++,r.abrupt("break",26);case 17:return t.feeling="dislike",t.video.dislikes++,r.abrupt("break",26);case 20:return t.feeling="",t.video.dislikes--,r.abrupt("break",26);case 23:t.feeling="dislike",t.video.likes--,t.video.dislikes++;case 26:return r.next=28,g["a"].createFeeling({videoId:t.video._id,type:e}).catch((function(e){console.log(e)}));case 28:if(a=r.sent,a){r.next=31;break}return r.abrupt("return");case 31:case"end":return r.stop()}}),r)})))()},subscribe:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isAuthenticated){t.next=4;break}return e.signinDialog=!0,e.details={title:"Want to subscribe to this channel?",text:"Sign in to subscribe to this channel."},t.abrupt("return");case 4:return e.subscribeLoading=!0,t.next=7,v["a"].createSubscription({channelId:e.video.userId._id}).catch((function(e){return console.log(e)})).finally((function(){e.subscribeLoading=!1}));case 7:if(r=t.sent,r){t.next=10;break}return t.abrupt("return");case 10:r.data.data._id?(e.subscribed=!0,e.video.userId.subscribers++):(e.subscribed=!1,e.video.userId.subscribers--);case 11:case"end":return t.stop()}}),t)})))()},updateViews:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d["a"].updateViews(e).catch((function(e){console.log(e)}));case 2:if(a=r.sent,a){r.next=5;break}return r.abrupt("return");case 5:t.video.views++;case 6:case"end":return r.stop()}}),r)})))()},play:function(e){console.log(e)},actions:function(){this.getVideo()},show:function(e){"SHOW MORE"===e.target.innerText?(this.truncate=!1,e.target.innerText="SHOW LESS"):(this.truncate=!0,e.target.innerText="SHOW MORE")},truncateText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.length<=t?e:e.slice(0,t)},dateFormatter:function(e){return l()(e).format("YYYY-MM-DD")}},mounted:function(){this.getVideo(this.$route.params.id),this.getVideos(this.$state),this.getPosters()}},h=b,k=(r("65b6"),r("2877")),m=r("6544"),w=r.n(m),x=r("0798"),_=r("8336"),C=r("b0af"),y=r("99d9"),V=r("62ad"),R=r("a523"),O=r("132d"),S=r("adda"),j=r("490a"),I=r("6b53"),A=r("0fd9"),M=r("3129"),D=Object(k["a"])(h,a,n,!1,null,null,null);t["default"]=D.exports;w()(D,{VAlert:x["a"],VBtn:_["a"],VCard:C["a"],VCardActions:y["a"],VCardSubtitle:y["b"],VCardTitle:y["d"],VCol:V["a"],VContainer:R["a"],VIcon:O["a"],VImg:S["a"],VProgressCircular:j["a"],VResponsive:I["a"],VRow:A["a"],VSkeletonLoader:M["a"]})},"65b6":function(e,t,r){"use strict";r("006a")}}]);